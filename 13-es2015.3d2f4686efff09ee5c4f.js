(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{FYdh:function(t,e,r){"use strict";r.r(e),r.d(e,"AnalyticsModule",function(){return le});var a=r("zfYk"),i=r("e8Ap"),n=r("RbrB"),o=r("ofXK"),s=r("wd/R"),l=r.n(s),c=r("cp0P"),u=r("lJxs"),h=r("JIr8"),d=r("fXoL"),p=r("2Vo4"),f=r("LRne"),g=r("vkgz"),b=r("nYR2"),y=r("EZBn"),v=r("5eHb"),m=r("+BVi");let x=(()=>{class t{constructor(t,e,r,a,i,n,o,s){this.getAlgoTradesGQL=t,this.getStockTotalAlgoTradesGQL=e,this.getYearlyTotalAlgoTradesGQL=r,this.getMonthlyTotalAlgoTradesGQL=a,this.getDailyTotalAlgoTradesGQL=i,this.getStockAlgoTradesGQL=n,this.toastr=o,this.authService=s,this.isLoading=new p.a(!1),this.algotrades=new p.a([]),this.stockdetailalgotrades=new p.a([]),this.detailedalgotrades=new p.a([]),this.stockalgotrades=new p.a([]),this.monthalgotrades=new p.a([]),this.dailyalgotrades=new p.a([]),this.stocktotalalgotrades=new p.a([]),this.yearlytotalalgotrades=new p.a([]),this.subscriptions=[],this.errorMessage=new p.a("")}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}get isLoading$(){return this.isLoading.asObservable()}get errorMessage$(){return this.errorMessage.asObservable()}get algotrades$(){return this.algotrades.asObservable()}get stockdetailalgotrades$(){return this.stockdetailalgotrades.asObservable()}get detailedalgotrades$(){return this.detailedalgotrades.asObservable()}get stockalgotrades$(){return this.stockalgotrades.asObservable()}get monthalgotrades$(){return this.monthalgotrades.asObservable()}get dailyalgotrades$(){return this.dailyalgotrades.asObservable()}get stocktotalalgotrades$(){return this.stocktotalalgotrades.asObservable()}get yearlytotalalgotrades$(){return this.yearlytotalalgotrades.asObservable()}getAlgoTrades(t){this.isLoading.next(!0),this.errorMessage.next("");const e=this.getAlgoTradesGQL.fetch({argsQuery:t}).pipe(Object(g.a)(t=>{t.errors?"Unauthorized"===t.errors[0].message?this.authService.logout():(this.isLoading.next(!1),this.toastr.error(t.errors[0].message,"Algo Trades")):(this.algotrades.next(t.data.getAlgoTrades),this.isLoading.next(!1))}),Object(h.a)(t=>(this.isLoading.next(!1),this.errorMessage.next(t),this.toastr.error(t.message,"Algo Trades"),Object(f.a)(void 0))),Object(b.a)(()=>{this.isLoading.next(!1)})).subscribe();this.subscriptions.push(e)}getStockDetailAlgoTrades(t){this.isLoading.next(!0),this.errorMessage.next("");const e=this.getStockAlgoTradesGQL.fetch({argsQuery:t}).pipe(Object(g.a)(t=>{t.errors?"Unauthorized"===t.errors[0].message?this.authService.logout():(this.isLoading.next(!1),this.toastr.error(t.errors[0].message,"Stock Detail Algo Trades")):(this.stockdetailalgotrades.next(t.data.getStockAlgoTrades),this.isLoading.next(!1))}),Object(h.a)(t=>(this.isLoading.next(!1),this.errorMessage.next(t),this.toastr.error(t.message,"Stock Detail Algo Trades"),Object(f.a)(void 0))),Object(b.a)(()=>{this.isLoading.next(!1)})).subscribe();this.subscriptions.push(e)}getDetailedAlgoTrades(t){this.isLoading.next(!0),this.errorMessage.next("");const e=this.getAlgoTradesGQL.fetch({argsQuery:t}).pipe(Object(g.a)(t=>{t.errors?"Unauthorized"===t.errors[0].message?this.authService.logout():(this.isLoading.next(!1),this.toastr.error(t.errors[0].message,"Algo Trades")):(this.detailedalgotrades.next(t.data.getAlgoTrades),this.isLoading.next(!1))}),Object(h.a)(t=>(this.isLoading.next(!1),this.errorMessage.next(t),this.toastr.error(t.message,"Algo Trades"),Object(f.a)(void 0))),Object(b.a)(()=>{this.isLoading.next(!1)})).subscribe();this.subscriptions.push(e)}getStockAlgoTrades(t){this.isLoading.next(!0),this.errorMessage.next("");const e=this.getAlgoTradesGQL.fetch({argsQuery:t}).pipe(Object(g.a)(t=>{t.errors?"Unauthorized"===t.errors[0].message?this.authService.logout():(this.isLoading.next(!1),this.toastr.error(t.errors[0].message,"Algo Trades")):(this.stockalgotrades.next(t.data.getAlgoTrades),this.isLoading.next(!1))}),Object(h.a)(t=>(this.isLoading.next(!1),this.errorMessage.next(t),this.toastr.error(t.message,"Algo Trades"),Object(f.a)(void 0))),Object(b.a)(()=>{this.isLoading.next(!1)})).subscribe();this.subscriptions.push(e)}getStockTotalAlgoTrades(){this.isLoading.next(!0),this.errorMessage.next("");const t=this.getStockTotalAlgoTradesGQL.fetch().pipe(Object(g.a)(t=>{t.errors?"Unauthorized"===t.errors[0].message?this.authService.logout():(this.isLoading.next(!1),this.toastr.error(t.errors[0].message,"Algo Trades")):(this.stocktotalalgotrades.next(t.data.getStockTotalAlgoTrades),this.isLoading.next(!1))}),Object(h.a)(t=>(this.isLoading.next(!1),this.errorMessage.next(t),this.toastr.error(t.message,"Algo Trades"),Object(f.a)(void 0))),Object(b.a)(()=>{this.isLoading.next(!1)})).subscribe();this.subscriptions.push(t)}getyearlyTotalAlgoTrades(){this.isLoading.next(!0),this.errorMessage.next("");const t=this.getYearlyTotalAlgoTradesGQL.fetch().pipe(Object(g.a)(t=>{t.errors?"Unauthorized"===t.errors[0].message?this.authService.logout():(this.isLoading.next(!1),this.toastr.error(t.errors[0].message,"Algo Trades")):(this.yearlytotalalgotrades.next(t.data.getYearlyTotalAlgoTrades),this.isLoading.next(!1))}),Object(h.a)(t=>(this.isLoading.next(!1),this.errorMessage.next(t),this.toastr.error(t.message,"Algo Trades"),Object(f.a)(void 0))),Object(b.a)(()=>{this.isLoading.next(!1)})).subscribe();this.subscriptions.push(t)}getMonthAlgoTrades(t){this.isLoading.next(!0),this.errorMessage.next("");const e=this.getMonthlyTotalAlgoTradesGQL.fetch({argsQuery:t}).pipe(Object(g.a)(t=>{t.errors?"Unauthorized"===t.errors[0].message?this.authService.logout():(this.isLoading.next(!1),this.toastr.error(t.errors[0].message,"Algo Trades")):(this.monthalgotrades.next(t.data.getMonthlyTotalAlgoTrades),this.isLoading.next(!1))}),Object(h.a)(t=>(this.isLoading.next(!1),this.errorMessage.next(t),this.toastr.error(t.message,"Algo Trades"),Object(f.a)(void 0))),Object(b.a)(()=>{this.isLoading.next(!1)})).subscribe();this.subscriptions.push(e)}getDailyAlgoTrades(t){this.isLoading.next(!0),this.errorMessage.next("");const e=this.getDailyTotalAlgoTradesGQL.fetch({argsQuery:t}).pipe(Object(g.a)(t=>{t.errors?"Unauthorized"===t.errors[0].message?this.authService.logout():(this.isLoading.next(!1),this.toastr.error(t.errors[0].message,"Algo Trades")):(this.dailyalgotrades.next(t.data.getDailyTotalAlgoTrades),this.isLoading.next(!1))}),Object(h.a)(t=>(this.isLoading.next(!1),this.errorMessage.next(t),this.toastr.error(t.message,"Algo Trades"),Object(f.a)(void 0))),Object(b.a)(()=>{this.isLoading.next(!1)})).subscribe();this.subscriptions.push(e)}}return t.\u0275fac=function(e){return new(e||t)(d.ic(y.n),d.ic(y.z),d.ic(y.D),d.ic(y.v),d.ic(y.o),d.ic(y.x),d.ic(v.b),d.ic(m.a))},t.\u0275prov=d.Qb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var O=r("VV7X"),T=r("CV0D");const D=["chart"];function S(t,e){1&t&&(d.Yb(0),d.ac(1,"div",14),d.Vb(2,"div",15),d.Zb(),d.Xb())}function k(t,e){1&t&&(d.ac(0,"span"),d.Qc(1,"Profit : "),d.Zb())}function w(t,e){1&t&&(d.ac(0,"span"),d.Qc(1,"Loss : "),d.Zb())}const L=function(t){return{color:t}};function _(t,e){if(1&t&&(d.ac(0,"div",16),d.Vb(1,"div",17),d.ac(2,"div",18),d.ac(3,"h4",19),d.Oc(4,k,2,0,"span",1),d.Oc(5,w,2,0,"span",1),d.Qc(6),d.pc(7,"currency"),d.Zb(),d.Zb(),d.Vb(8,"div",20),d.Zb()),2&t){const t=d.oc();d.Hb(3),d.wc("ngStyle",d.Ac(8,L,t.getProfitColor(t.YearlyTotalPL))),d.Hb(1),d.wc("ngIf",t.YearlyTotalPL>0),d.Hb(1),d.wc("ngIf",t.YearlyTotalPL<0),d.Hb(1),d.Sc(" ",d.sc(7,4,t.YearlyTotalPL,"INR","")," ")}}function P(t,e){if(1&t&&(d.ac(0,"div",21),d.Vb(1,"apx-chart",22),d.Zb()),2&t){const t=d.oc();d.Hb(1),d.wc("series",t.chartOptions.series)("chart",t.chartOptions.chart)("dataLabels",t.chartOptions.dataLabels)("plotOptions",t.chartOptions.plotOptions)("yaxis",t.chartOptions.yaxis)("xaxis",t.chartOptions.xaxis)("title",t.chartOptions.title)("tooltip",t.chartOptions.tooltip)("noData",t.chartOptions.nodata)("colors",t.chartOptions.colors)}}function C(t,e){1&t&&d.Vb(0,"div",23)}function M(t,e){1&t&&(d.ac(0,"span"),d.Qc(1,"Profit : "),d.Zb())}function Z(t,e){1&t&&(d.ac(0,"span"),d.Qc(1,"Loss : "),d.Zb())}function Y(t,e){if(1&t&&(d.ac(0,"div",24),d.Vb(1,"div",25),d.ac(2,"div",26),d.ac(3,"h4",19),d.Oc(4,M,2,0,"span",1),d.Oc(5,Z,2,0,"span",1),d.Qc(6),d.pc(7,"currency"),d.Zb(),d.Zb(),d.Vb(8,"div",27),d.Zb()),2&t){const t=d.oc();d.Hb(3),d.wc("ngStyle",d.Ac(8,L,t.getProfitColor(t.DetailedMonthTotalPL))),d.Hb(1),d.wc("ngIf",t.DetailedMonthTotalPL>0),d.Hb(1),d.wc("ngIf",t.DetailedMonthTotalPL<0),d.Hb(1),d.Sc(" ",d.sc(7,4,t.DetailedMonthTotalPL,"INR","")," ")}}function j(t,e){if(1&t&&(d.ac(0,"div",21),d.Vb(1,"apx-chart",22),d.Zb()),2&t){const t=d.oc();d.Hb(1),d.wc("series",t.MonthChartOptions.series)("chart",t.MonthChartOptions.chart)("dataLabels",t.MonthChartOptions.dataLabels)("plotOptions",t.MonthChartOptions.plotOptions)("yaxis",t.MonthChartOptions.yaxis)("xaxis",t.MonthChartOptions.xaxis)("title",t.MonthChartOptions.title)("tooltip",t.MonthChartOptions.tooltip)("noData",t.MonthChartOptions.nodata)("colors",t.MonthChartOptions.colors)}}function W(t,e){1&t&&d.Vb(0,"div",23)}function A(t,e){1&t&&(d.ac(0,"span"),d.Qc(1,"Profit : "),d.Zb())}function I(t,e){1&t&&(d.ac(0,"span"),d.Qc(1,"Loss : "),d.Zb())}function R(t,e){if(1&t&&(d.ac(0,"div",24),d.Vb(1,"div",25),d.ac(2,"div",26),d.ac(3,"h4",19),d.Oc(4,A,2,0,"span",1),d.Oc(5,I,2,0,"span",1),d.Qc(6),d.pc(7,"currency"),d.Zb(),d.Zb(),d.Vb(8,"div",27),d.Zb()),2&t){const t=d.oc();d.Hb(3),d.wc("ngStyle",d.Ac(8,L,t.getProfitColor(t.DetailedDailyTotalPL))),d.Hb(1),d.wc("ngIf",t.DetailedDailyTotalPL>0),d.Hb(1),d.wc("ngIf",t.DetailedDailyTotalPL<0),d.Hb(1),d.Sc(" ",d.sc(7,4,t.DetailedDailyTotalPL,"INR","")," ")}}function E(t,e){if(1&t&&(d.ac(0,"div",21),d.Vb(1,"apx-chart",22),d.Zb()),2&t){const t=d.oc();d.Hb(1),d.wc("series",t.DailyChartOptions.series)("chart",t.DailyChartOptions.chart)("dataLabels",t.DailyChartOptions.dataLabels)("plotOptions",t.DailyChartOptions.plotOptions)("yaxis",t.DailyChartOptions.yaxis)("xaxis",t.DailyChartOptions.xaxis)("title",t.DailyChartOptions.title)("tooltip",t.DailyChartOptions.tooltip)("noData",t.DailyChartOptions.nodata)("colors",t.DailyChartOptions.colors)}}function H(t,e){1&t&&d.Vb(0,"div",23)}function F(t,e){1&t&&(d.ac(0,"span"),d.Qc(1,"Profit : "),d.Zb())}function N(t,e){1&t&&(d.ac(0,"span"),d.Qc(1,"Loss : "),d.Zb())}function Q(t,e){if(1&t&&(d.ac(0,"div",28),d.Vb(1,"div",17),d.ac(2,"div",18),d.ac(3,"h4",19),d.Oc(4,F,2,0,"span",1),d.Oc(5,N,2,0,"span",1),d.Qc(6),d.pc(7,"currency"),d.Zb(),d.Zb(),d.Vb(8,"div",20),d.Zb()),2&t){const t=d.oc();d.Hb(3),d.wc("ngStyle",d.Ac(8,L,t.getProfitColor(t.DailyTotalPL))),d.Hb(1),d.wc("ngIf",t.DailyTotalPL>0),d.Hb(1),d.wc("ngIf",t.DailyTotalPL<0),d.Hb(1),d.Sc(" ",d.sc(7,4,t.DailyTotalPL,"INR","")," ")}}function V(t,e){if(1&t&&(d.ac(0,"div",21),d.Vb(1,"apx-chart",22),d.Zb()),2&t){const t=d.oc();d.Hb(1),d.wc("series",t.DetailedChartOptions.series)("chart",t.DetailedChartOptions.chart)("dataLabels",t.DetailedChartOptions.dataLabels)("plotOptions",t.DetailedChartOptions.plotOptions)("yaxis",t.DetailedChartOptions.yaxis)("xaxis",t.DetailedChartOptions.xaxis)("title",t.DetailedChartOptions.title)("tooltip",t.DetailedChartOptions.tooltip)("noData",t.DetailedChartOptions.nodata)("colors",t.DetailedChartOptions.colors)}}let z=(()=>{class t{constructor(t,e){this.algotradesService=t,this.tradejournalsService=e,this.yearlytotalalgotrades=[],this.yearlytotaltradejournals=[],this.monthlytotaltradejournals=[],this.dailytotaltradejournals=[],this.detailedtradejournals=[],this.combineTrades=[],this.YearlyTotalPL=0,this.DetailedMonthTotalPL=0,this.DetailedDailyTotalPL=0,this.subscriptions=[],this.totalTrades=0,this.GetSortOrder=t=>(e,r)=>e[t]>r[t]?1:e[t]<r[t]?-1:0,this.chartOptions={series:[{name:"P&L",data:[]}],chart:{type:"bar",height:400,toolbar:{show:!1},zoom:{enabled:!1},events:{dataPointSelection:(t,e,r)=>{this.getMonthAlgoTrades(r.w.config.series[0].data[r.dataPointIndex].x)}}},colors:["#FF9800"],nodata:{text:"No trades found"},tooltip:{custom:({series:t,seriesIndex:e,dataPointIndex:r,w:a})=>'<div class="card card-custom bg-gray-700"  ><div class="card-header border-0" style = "min-height: 40px !important"><div class="card-title"><h3 class="card-label text-white">'+a.globals.labels[r]+'</h3></div></div><div class="separator separator-solid separator-white opacity-20"></div><div class="card-body text-white  mb-0" style=" margin-top: -15px"><p>Trades : '+a.config.series[0].data[r].trades+'</p><p style="margin-bottom: -15px">P&L : '+t[e][r]+"</p></div></div>"},title:{text:"Yearly Analysis",align:"left",margin:30,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"18px",fontWeight:"bold",color:"#263238"}},plotOptions:{bar:{columnWidth:"90%"}},dataLabels:{enabled:!1},yaxis:{labels:{formatter:t=>"\u20b9 "+t,style:{fontSize:"14px"}}},xaxis:{labels:{show:!0}}},this.MonthChartOptions={series:[{name:"P&L",data:[]}],chart:{type:"bar",height:400,toolbar:{show:!1},zoom:{enabled:!1},events:{dataPointSelection:(t,e,r)=>{this.getDailyAlgoTrades(r.w.config.series[0].data[r.dataPointIndex].x)}}},colors:["#FD6A6A"],nodata:{text:"No trades found"},tooltip:{custom:({series:t,seriesIndex:e,dataPointIndex:r,w:a})=>'<div class="card card-custom bg-gray-700"  ><div class="card-header border-0" style = "min-height: 40px !important"><div class="card-title"><h3 class="card-label text-white">'+a.globals.labels[r]+'</h3></div></div><div class="separator separator-solid separator-white opacity-20"></div><div class="card-body text-white  mb-0" style=" margin-top: -15px"><p style="margin-bottom: -15px">P&L : '+t[e][r]+"</p></div></div>"},title:{text:""},plotOptions:{bar:{columnWidth:"90%"}},dataLabels:{enabled:!1},yaxis:{labels:{formatter:t=>"\u20b9 "+t,style:{fontSize:"14px"}}},xaxis:{labels:{show:!0}}},this.DailyChartOptions={series:[{name:"P&L",data:[]}],chart:{type:"bar",height:400,toolbar:{show:!1},zoom:{enabled:!1},events:{dataPointSelection:(t,e,r)=>{this.getAlgoTrades(r.w.config.series[0].data[r.dataPointIndex].x)}}},colors:["#43BCCD"],nodata:{text:"No trades found"},tooltip:{custom:({series:t,seriesIndex:e,dataPointIndex:r,w:a})=>'<div class="card card-custom bg-gray-700"  ><div class="card-header border-0" style = "min-height: 40px !important"><div class="card-title"><h3 class="card-label text-white">'+a.globals.labels[r]+" "+this.selectedMonth+'</h3></div></div><div class="separator separator-solid separator-white opacity-20"></div><div class="card-body text-white  mb-0" style=" margin-top: -15px"><p style="margin-bottom: -15px">P&L : '+t[e][r]+"</p></div></div>"},title:{text:""},plotOptions:{bar:{columnWidth:"90%"}},dataLabels:{enabled:!1},yaxis:{labels:{formatter:t=>"\u20b9 "+t,style:{fontSize:"14px"}}},xaxis:{labels:{show:!0}}},this.DetailedChartOptions={series:[{name:"P&L",data:[]}],chart:{type:"bar",height:400,toolbar:{show:!1},zoom:{enabled:!1}},colors:["#C4BBAF"],nodata:{text:"No trades found"},tooltip:{custom:({series:t,seriesIndex:e,dataPointIndex:r,w:a})=>'<div class="card card-custom bg-gray-700"  ><div class="card-header border-0" style = "min-height: 40px !important"><div class="card-title"><h3 class="card-label text-white">'+a.globals.labels[r]+'</h3></div></div><div class="separator separator-solid separator-white opacity-20"></div><div class="card-body text-white  mb-0" style=" margin-top: -15px"><p>Date : '+a.config.series[0].data[r].tradedate+'</p><p style="margin-bottom: -15px">P&L : '+t[e][r]+"</p></div></div>"},title:{text:""},plotOptions:{bar:{columnWidth:"90%"}},dataLabels:{enabled:!1},yaxis:{labels:{formatter:t=>"\u20b9 "+t,style:{fontSize:"14px"}}},xaxis:{labels:{show:!1}}}}ngOnInit(){const t=Object(c.a)({algotrades:this.algotradesService.yearlytotalalgotrades$.pipe(Object(u.a)(t=>{this.yearlytotalalgotrades=[],this.yearlytotalalgotrades=t.map(t=>({x:t._id,y:t.Profit,trades:t.Trades})),this.updateYearlySeries()}),Object(h.a)(t=>t)),tradejournals:this.tradejournalsService.yearlytotaltradejournals$.pipe(Object(u.a)(t=>{this.yearlytotaltradejournals=[],this.yearlytotaltradejournals=t.map(t=>({x:t._id,y:t.Profit,trades:t.Trades})),this.updateYearlySeries()}),Object(h.a)(t=>t))}).subscribe();this.subscriptions.push(t);const e=Object(c.a)({algotrades:this.algotradesService.monthalgotrades$.pipe(Object(u.a)(t=>{this.monthalgotrades=[],this.monthalgotrades=t.map(t=>({x:l()(t._id,"M").format("MMM"),y:t.Profit,trades:t.Trades})),this.updateDetailedMonthSeries()}),Object(h.a)(t=>t)),tradejournals:this.tradejournalsService.monthlytotaltradejournals$.pipe(Object(u.a)(t=>{this.monthlytotaltradejournals=[],this.monthlytotaltradejournals=t.map(t=>({x:l()(t._id,"M").format("MMM"),y:t.Profit,trades:t.Trades})),this.updateDetailedMonthSeries()}),Object(h.a)(t=>t))}).subscribe();this.subscriptions.push(e);const r=Object(c.a)({algotrades:this.algotradesService.dailyalgotrades$.pipe(Object(u.a)(t=>{this.dailyalgotrades=[],this.dailyalgotrades=t.map(t=>({x:t._id,y:t.Profit,trades:t.Trades})),this.updateDetailedDailySeries()}),Object(h.a)(t=>t)),tradejournals:this.tradejournalsService.dailytotaltradejournals$.pipe(Object(u.a)(t=>{this.dailytotaltradejournals=[],this.dailytotaltradejournals=t.map(t=>({x:t._id,y:t.Profit,trades:t.Trades})),this.updateDetailedDailySeries()}),Object(h.a)(t=>t))}).subscribe();this.subscriptions.push(r);const a=Object(c.a)({algotrades:this.algotradesService.detailedalgotrades$.pipe(Object(u.a)(t=>{this.algotrades=[],this.algotrades=t.map(t=>({x:t.Stock,y:t.Profit,tradedate:l()(t.tradedate).format("DD MMM YYYY")})),this.updateDailySeries()}),Object(h.a)(t=>t)),tradejournals:this.tradejournalsService.detailedtradejournals$.pipe(Object(u.a)(t=>{this.detailedtradejournals=[],this.detailedtradejournals=t.map(t=>({x:"O:"+t.StockSymbol,y:t.totalgainloss,tradedate:l()(t.LastExitDate).format("DD MMM YYYY")})),this.updateDailySeries()}),Object(h.a)(t=>t))}).subscribe();this.subscriptions.push(a),this.resetAlgoTrades()}updateYearlySeries(){this.YearlyTotalPL=0,this.yearlytotaltradejournals.map(t=>{const e=this.yearlytotalalgotrades.find(e=>e.x===t.x);e?(e.y+=t.y,e.trades=Number(e.trades)+Number(t.trades)):this.yearlytotalalgotrades.push(t)}),this.yearlytotalalgotrades.map(t=>{this.YearlyTotalPL+=Number(t.y)}),this.yearlytotalalgotrades.sort(this.GetSortOrder("x")),this.chartOptions.series=[{name:"P&L",data:this.yearlytotalalgotrades}]}updateDetailedMonthSeries(){this.DetailedMonthTotalPL=0,console.log("Before monthlytotaltradejournals ",this.monthlytotaltradejournals),console.log("Before monthalgotrades ",this.monthalgotrades),this.monthlytotaltradejournals.map(t=>{const e=this.monthalgotrades.find(e=>e.x===t.x);e?e.y+=t.y:this.monthalgotrades.push(t)}),this.monthalgotrades.map(t=>{this.DetailedMonthTotalPL+=Number(t.y)}),console.log("After monthalgotrades ",this.monthalgotrades),this.MonthChartOptions.series=[{name:"P&L",data:this.monthalgotrades}],this.MonthChartOptions.title={text:"Monthly Trades in "+this.selectedYear,align:"left",margin:30,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"18px",fontWeight:"bold",color:"#263238"}}}updateDetailedDailySeries(){this.DetailedDailyTotalPL=0,this.dailytotaltradejournals.map(t=>{const e=this.dailyalgotrades.find(e=>e.x===t.x);e?e.y+=t.y:this.dailyalgotrades.push(t)}),this.dailyalgotrades.map(t=>{this.DetailedDailyTotalPL+=Number(t.y)}),this.DailyChartOptions.series=[{name:"P&L",data:this.dailyalgotrades}],this.DailyChartOptions.title={text:"Daily Trades in "+this.selectedMonth,align:"left",margin:30,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"18px",fontWeight:"bold",color:"#263238"}}}updateDailySeries(){this.DailyTotalPL=0,this.detailedtradejournals.length>0&&this.detailedtradejournals.map(t=>{this.algotrades.push(t)}),this.algotrades.map(t=>{this.DailyTotalPL+=Number(t.y)}),this.DetailedChartOptions.series=[{name:"P&L",data:this.algotrades}],this.DetailedChartOptions.title={text:"Daily Trades in "+this.selectedDate,align:"left",margin:30,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"18px",fontWeight:"bold",color:"#263238"}}}getMonthAlgoTrades(t){this.DetailedMonthTotalPL=0,this.monthalgotrades=[],this.monthlytotaltradejournals=[],this.DetailedDailyTotalPL=0,this.dailyalgotrades=[],this.dailytotaltradejournals=[],this.algotrades=[],this.detailedtradejournals=[],this.DailyTotalPL=0,this.selectedYear="",this.selectedMonth="",this.selectedDate="",this.tradejournalsService.getMonthlyTotalTradejournals({year:t}),this.algotradesService.getMonthAlgoTrades({year:t}),this.selectedYear=t}getDailyAlgoTrades(t){this.DetailedDailyTotalPL=0,this.dailyalgotrades=[],this.dailytotaltradejournals=[],this.algotrades=[],this.detailedtradejournals=[],this.DailyTotalPL=0,this.selectedMonth="",this.selectedDate="",this.tradejournalsService.getDailyTotalTradejournals({year:this.selectedYear,month:l()(t,"MMM").format("M")}),this.algotradesService.getDailyAlgoTrades({year:this.selectedYear,month:l()(t,"MMM").format("M")}),this.selectedMonth=t}getAlgoTrades(t){this.algotrades=[],this.detailedtradejournals=[],this.DailyTotalPL=0,this.selectedDate="";const e=l()([this.selectedYear,Number(l()(this.selectedMonth,"MMM").format("M"))-1,Number(t)]),r=l()([this.selectedYear,Number(l()(this.selectedMonth,"MMM").format("M"))-1,Number(t)]).add(1,"days");this.algotradesService.getDetailedAlgoTrades({type:"trade",fromDate:e,toDate:r}),this.tradejournalsService.getDetailedTradeJournals({RequestType:"AlgoTrades",StockType:"Option",Status:"Closed",fromDate:e,toDate:r}),this.selectedDate=t+" "+this.selectedMonth+" "+this.selectedYear}getProfitColor(t){return Number(t)>0?"green":"red"}resetAlgoTrades(){this.YearlyTotalPL=0,this.yearlytotalalgotrades=[],this.yearlytotaltradejournals=[],this.DetailedMonthTotalPL=0,this.monthalgotrades=[],this.monthlytotaltradejournals=[],this.DetailedDailyTotalPL=0,this.dailyalgotrades=[],this.dailytotaltradejournals=[],this.algotrades=[],this.detailedtradejournals=[],this.DailyTotalPL=0,this.selectedYear="",this.selectedMonth="",this.selectedDate="",this.tradejournalsService.getyearlyTotalTradejournals(),this.algotradesService.getyearlyTotalAlgoTrades()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(d.Ub(x),d.Ub(O.a))},t.\u0275cmp=d.Ob({type:t,selectors:[["app-equity-analytics"]],viewQuery:function(t,e){var r;1&t&&d.Vc(D,!0),2&t&&d.Dc(r=d.mc())&&(e.chart=r.first)},decls:24,vars:14,consts:[[1,"card","card-custom","card-stretch",2,"min-height","550px"],[4,"ngIf"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"card-toolbar"],[1,"btn","btn-sm","btn-secondary","form-control-sm",3,"click"],[1,"flaticon2-circular-arrow"],[1,"card-body"],["class","row",4,"ngIf"],["id","chart",4,"ngIf"],["class","separator separator-dashed my-5",4,"ngIf"],["class","row mt-5",4,"ngIf"],["class","row mt-20",4,"ngIf"],[1,"progress","progress-modal"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated","bg-primary",2,"width","100%"],[1,"row"],[1,"col-lg-6"],[1,"col-lg-5"],[1,"text-right","mr-15","mb-1",3,"ngStyle"],[1,"col-lg-1"],["id","chart"],[3,"series","chart","dataLabels","plotOptions","yaxis","xaxis","title","tooltip","noData","colors"],[1,"separator","separator-dashed","my-5"],[1,"row","mt-5"],[1,"col-lg-7"],[1,"col-lg-4"],[1,"col-lg-2"],[1,"row","mt-20"]],template:function(t,e){1&t&&(d.ac(0,"div",0),d.Oc(1,S,3,0,"ng-container",1),d.pc(2,"async"),d.ac(3,"div",0),d.ac(4,"div",2),d.ac(5,"div",3),d.ac(6,"h3",4),d.Qc(7,"Yearly P&L Analytics Dashboard"),d.Zb(),d.Zb(),d.ac(8,"div",5),d.ac(9,"button",6),d.lc("click",function(){return e.resetAlgoTrades()}),d.Vb(10,"i",7),d.Qc(11," Reset "),d.Zb(),d.Zb(),d.Zb(),d.ac(12,"div",8),d.Oc(13,_,9,10,"div",9),d.Oc(14,P,2,10,"div",10),d.Oc(15,C,1,0,"div",11),d.Oc(16,Y,9,10,"div",12),d.Oc(17,j,2,10,"div",10),d.Oc(18,W,1,0,"div",11),d.Oc(19,R,9,10,"div",12),d.Oc(20,E,2,10,"div",10),d.Oc(21,H,1,0,"div",11),d.Oc(22,Q,9,10,"div",13),d.Oc(23,V,2,10,"div",10),d.Zb(),d.Zb(),d.Zb()),2&t&&(d.Hb(1),d.wc("ngIf",d.qc(2,12,e.algotradesService.isLoading$)),d.Hb(12),d.wc("ngIf",e.yearlytotalalgotrades.length>0),d.Hb(1),d.wc("ngIf",e.yearlytotalalgotrades.length>0),d.Hb(1),d.wc("ngIf",e.monthalgotrades.length>0),d.Hb(1),d.wc("ngIf",e.monthalgotrades.length>0),d.Hb(1),d.wc("ngIf",e.monthalgotrades.length>0),d.Hb(1),d.wc("ngIf",e.dailyalgotrades.length>0),d.Hb(1),d.wc("ngIf",e.dailyalgotrades.length>0),d.Hb(1),d.wc("ngIf",e.dailyalgotrades.length>0),d.Hb(1),d.wc("ngIf",e.algotrades.length>0),d.Hb(1),d.wc("ngIf",e.algotrades.length>0),d.Hb(1),d.wc("ngIf",e.algotrades.length>0))},directives:[o.o,o.p,T.a],pipes:[o.b,o.d],styles:["#chart[_ngcontent-%COMP%], #DetailedChart[_ngcontent-%COMP%]{max-width:75%;margin:35px auto}#chart[_ngcontent-%COMP%]   .apexcharts-tooltip[_ngcontent-%COMP%]{color:#000}#chart[_ngcontent-%COMP%]   .apexcharts-tooltip[_ngcontent-%COMP%]   .apexcharts-tooltip-series-group.active[_ngcontent-%COMP%]{background:#fff!important}"]}),t})();var B=r("WsYS"),$=r("1kSV"),U=r("U1i7"),J=r("tyNb"),G=r("3Pt+");const q=["chart"];function X(t,e){1&t&&(d.Yb(0),d.ac(1,"div",28),d.Vb(2,"div",29),d.Zb(),d.Xb())}function K(t,e){1&t&&(d.ac(0,"span"),d.Qc(1,"Profit : "),d.Zb())}function tt(t,e){1&t&&(d.ac(0,"span"),d.Qc(1,"Loss : "),d.Zb())}const et=function(t){return{color:t}};function rt(t,e){if(1&t&&(d.ac(0,"div",30),d.Vb(1,"div",31),d.ac(2,"div",32),d.ac(3,"h4",33),d.Oc(4,K,2,0,"span",1),d.Oc(5,tt,2,0,"span",1),d.Qc(6),d.pc(7,"currency"),d.Zb(),d.Zb(),d.Vb(8,"div",8),d.Zb()),2&t){const t=d.oc();d.Hb(3),d.wc("ngStyle",d.Ac(8,et,t.getProfitColor(t.totalPL))),d.Hb(1),d.wc("ngIf",t.totalPL>0),d.Hb(1),d.wc("ngIf",t.totalPL<0),d.Hb(1),d.Sc(" ",d.sc(7,4,t.totalPL,"INR","")," ")}}function at(t,e){if(1&t&&(d.ac(0,"div",34),d.Vb(1,"apx-chart",35),d.Zb()),2&t){const t=d.oc();d.Hb(1),d.wc("series",t.chartOptions.series)("chart",t.chartOptions.chart)("dataLabels",t.chartOptions.dataLabels)("plotOptions",t.chartOptions.plotOptions)("yaxis",t.chartOptions.yaxis)("xaxis",t.chartOptions.xaxis)("title",t.chartOptions.title)("tooltip",t.chartOptions.tooltip)("noData",t.chartOptions.nodata)("colors",t.chartOptions.colors)("fill",t.chartOptions.fill)}}function it(t,e){1&t&&d.Vb(0,"div",36)}function nt(t,e){1&t&&(d.ac(0,"span"),d.Qc(1,"Profit : "),d.Zb())}function ot(t,e){1&t&&(d.ac(0,"span"),d.Qc(1,"Loss : "),d.Zb())}function st(t,e){if(1&t&&(d.ac(0,"div",37),d.Vb(1,"div",31),d.ac(2,"div",32),d.ac(3,"h4",33),d.Oc(4,nt,2,0,"span",1),d.Oc(5,ot,2,0,"span",1),d.Qc(6),d.pc(7,"currency"),d.Zb(),d.Zb(),d.Vb(8,"div",8),d.Zb()),2&t){const t=d.oc();d.Hb(3),d.wc("ngStyle",d.Ac(8,et,t.getProfitColor(t.DetailedTotalPL))),d.Hb(1),d.wc("ngIf",t.DetailedTotalPL>0),d.Hb(1),d.wc("ngIf",t.DetailedTotalPL<0),d.Hb(1),d.Sc(" ",d.sc(7,4,t.DetailedTotalPL,"INR","")," ")}}function lt(t,e){if(1&t&&(d.ac(0,"div",38),d.Vb(1,"apx-chart",35),d.Zb()),2&t){const t=d.oc();d.Hb(1),d.wc("series",t.DetailedChartOptions.series)("chart",t.DetailedChartOptions.chart)("dataLabels",t.DetailedChartOptions.dataLabels)("plotOptions",t.DetailedChartOptions.plotOptions)("yaxis",t.DetailedChartOptions.yaxis)("xaxis",t.DetailedChartOptions.xaxis)("title",t.DetailedChartOptions.title)("tooltip",t.DetailedChartOptions.tooltip)("noData",t.DetailedChartOptions.nodata)("colors",t.DetailedChartOptions.colors)("fill",t.DetailedChartOptions.fill)}}let ct=(()=>{class t{constructor(t,e,r){this.keywordsService=t,this.tradejournalsService=e,this.router=r,this.tradejournals=[],this.subscriptions=[],this.totalPL=0,this.DetailedTotalPL=0,this.optionTrades=[],this.chartOptions={series:[{name:"P&L",data:[]}],chart:{type:"bar",height:450,toolbar:{show:!1},zoom:{enabled:!1},events:{dataPointSelection:(t,e,r)=>{this.getDetailedOptionTrades(r.w.config.series[0].data[r.dataPointIndex].x)}}},fill:{colors:[(t,e,r)=>t.value<0?"#FF4560":"#008FFB"],opacity:.9,type:"solid"},nodata:{text:"No trades found"},tooltip:{custom:({series:t,seriesIndex:e,dataPointIndex:r,w:a})=>'<div class="card card-custom bg-gray-700"  ><div class="card-header border-0" style = "min-height: 40px !important"><div class="card-title"><h3 class="card-label text-white">'+a.globals.labels[r]+'</h3></div></div><div class="separator separator-solid separator-white opacity-20"></div><div class="card-body text-white  mb-0" style=" margin-top: -15px"><p  style="margin-bottom: -15px">P&L : '+t[e][r]+"</p>  </></div></div>"},title:{text:"Option Strategy Analysis",align:"left",margin:30,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"18px",fontWeight:"bold",color:"#263238"}},plotOptions:{bar:{horizontal:!0,barHeight:"80%"}},dataLabels:{enabled:!0,formatter:t=>"\u20b9 "+t,style:{fontSize:"12px",colors:["#fff"],fontFamily:void 0}},yaxis:{labels:{align:"right",minWidth:0,maxWidth:250,style:{fontSize:"12px"}}},xaxis:{labels:{formatter:t=>"\u20b9 "+t}}},this.DetailedChartOptions={series:[{name:"P&L",data:[]}],chart:{type:"bar",height:400,toolbar:{show:!1},zoom:{enabled:!1},events:{dataPointSelection:(t,e,r)=>{this.openJournal(r.w.config.series[0].data[r.dataPointIndex].id)}}},colors:["#00E396"],nodata:{text:"No trades found"},fill:{colors:[(t,e,r)=>t.value<0?"#FEB019":"#00E396"],opacity:.9,type:"solid"},tooltip:{custom:({series:t,seriesIndex:e,dataPointIndex:r,w:a})=>'<div class="card card-custom bg-gray-700" ><div class="card-header border-0" style = "min-height: 40px !important"><div class="card-title"><h3 class="card-label text-white">'+a.globals.labels[r]+'</h3></div></div><div class="separator separator-solid separator-white opacity-20"></div><div class="card-body text-white  mb-0" style=" margin-top: -15px"><p>Date : '+a.config.series[0].data[r].LastExitDate+"</p><p>P&L : "+t[e][r]+'</p> <p style="margin-bottom: -15px">'+a.config.series[0].data[r].OptionStrategy+"</p></div></div>"},title:{text:""},plotOptions:{bar:{columnWidth:"90%"}},dataLabels:{enabled:!1},yaxis:{labels:{formatter:t=>"\u20b9 "+t,style:{fontSize:"14px"}}},xaxis:{labels:{show:!1}}}}ngOnInit(){this.toDate=l()().format("M/DD/YYYY").toString(),this.fromDate=l()([l()().year(),l()().month()]).format("M/DD/YYYY"),this.tradejournals=[],this.totalPL=0,this.optionTrades=[],this.detailedtradejournals=[],this.DetailedTotalPL=0,this.DetailedStrategy="",this.keywordsService.fetch();const t=this.tradejournalsService.detailedtradejournals$.pipe(Object(u.a)(t=>{this.detailedtradejournals=t.map(t=>({x:t.StockSymbol,y:t.totalgainloss,OptionStrategy:t.OptionStrategy,LastExitDate:l()(t.LastExitDate).format("DD MMM YYYY"),id:t.id})),this.updateDetailedSeries()}),Object(h.a)(t=>t)).subscribe(),e=Object(c.a)({algotrades:this.keywordsService.keywords$.pipe(Object(u.a)(t=>{this.OptionStrategies=t.filter(t=>"Option Strategy"===t.keywordtype),this.tradejournalsService.getTradeJournals({RequestType:"AlgoTrades",Status:"Closed",StockType:"Option",fromDate:l()([l()().year(),l()().month()]).format("M/DD/YYYY"),toDate:l()().add(1,"days").format()})}),Object(h.a)(t=>t)),tradejournals:this.tradejournalsService.tradejournals$.pipe(Object(u.a)(t=>{this.tradejournals=t,this.updateSeries()}),Object(h.a)(t=>t))}).subscribe();this.subscriptions.push(e),this.subscriptions.push(t)}refreshTradeJournals(){this.detailedtradejournals=[],this.DetailedTotalPL=0,this.DetailedStrategy="",this.tradejournalsService.getTradeJournals({RequestType:"AlgoTrades",Status:"Closed",StockType:"Option",fromDate:l()(this.fromDate),toDate:l()(this.toDate).add(1,"days").format()})}resetTradeJournals(){this.toDate=l()().format("M/DD/YYYY").toString(),this.fromDate=l()([l()().year(),l()().month()]).format("M/DD/YYYY"),this.tradejournals=[],this.totalPL=0,this.optionTrades=[],this.detailedtradejournals=[],this.DetailedTotalPL=0,this.DetailedStrategy="",this.tradejournalsService.getTradeJournals({Status:"Closed",RequestType:"AlgoTrades",StockType:"Option",fromDate:l()([l()().year(),l()().month()]).format("M/DD/YYYY"),toDate:l()().add(1,"days").format()})}getDetailedOptionTrades(t){this.DetailedStrategy=t,this.tradejournalsService.getDetailedTradeJournals({RequestType:"OptionStrategy",Status:"Closed",StockType:"Option",OptionStrategy:t,fromDate:l()(this.fromDate),toDate:l()(this.toDate).add(1,"days").format()})}updateSeries(){this.totalPL=0,this.optionTrades=[],this.OptionStrategies.map(t=>{let e=0;this.tradejournals.length>0&&this.tradejournals.map(r=>{r.OptionStrategy===t.keywordname&&(e+=Number(r.totalgainloss),this.totalPL+=Number(r.totalgainloss))}),this.optionTrades.push({x:t.keywordname,y:e})}),this.chartOptions.series=[{name:"P&L",data:this.optionTrades}]}updateDetailedSeries(){this.DetailedTotalPL=0,this.detailedtradejournals.map(t=>{this.DetailedTotalPL+=Number(t.y)}),this.DetailedChartOptions.series=[{name:"P&L",data:this.detailedtradejournals}],this.DetailedStrategy&&(this.DetailedChartOptions.title={text:"Trades for "+this.DetailedStrategy,align:"left",margin:30,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"18px",fontWeight:"bold",color:"#263238"}})}openJournal(t){this.router.navigate(["/trade/tradeJournal/edit/"+t])}getProfitColor(t){return Number(t)>0?"green":"red"}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(d.Ub(U.a),d.Ub(O.a),d.Ub(J.h))},t.\u0275cmp=d.Ob({type:t,selectors:[["app-option-analytics"]],viewQuery:function(t,e){var r;1&t&&d.Vc(q,!0),2&t&&d.Dc(r=d.mc())&&(e.chart=r.first)},features:[d.Gb([{provide:$.b,useClass:B.b},{provide:$.c,useClass:B.c}])],decls:46,vars:10,consts:[[1,"card","card-custom","card-stretch",2,"min-height","550px"],[4,"ngIf"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"card-toolbar"],[1,"card-body"],[1,"form-group","row"],[1,"col-lg-1"],[1,"col-lg-3"],[1,"input-group"],["type","text","name","fromDate","autocomplete","off","placeholder","dd/mm/yyyy","ngbDatepicker","","readonly","true",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["from","ngbDatepicker"],[1,"input-group-append",3,"click"],[1,"input-group-text"],[1,"text-dark-50","flaticon-calendar"],["type","text","name","toDate","autocomplete","off","placeholder","dd/mm/yyyy","ngbDatepicker","","readonly","true",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["to","ngbDatepicker"],[1,"btn","btn-sm","btn-primary","form-control-sm","mr-5",3,"click"],[1,"flaticon-refresh"],[1,"btn","btn-sm","btn-secondary","form-control-sm",3,"click"],[1,"flaticon2-circular-arrow"],[1,"separator","separator-dashed","my-10"],["class","row",4,"ngIf"],["id","chart",4,"ngIf"],["class","separator separator-dashed my-5",4,"ngIf"],["class","row mt-20",4,"ngIf"],["id","DetailedChart",4,"ngIf"],[1,"progress","progress-modal"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated","bg-primary",2,"width","100%"],[1,"row"],[1,"col-lg-6"],[1,"col-lg-5"],[1,"text-right","mr-15","mb-1",3,"ngStyle"],["id","chart"],[3,"series","chart","dataLabels","plotOptions","yaxis","xaxis","title","tooltip","noData","colors","fill"],[1,"separator","separator-dashed","my-5"],[1,"row","mt-20"],["id","DetailedChart"]],template:function(t,e){if(1&t){const t=d.bc();d.ac(0,"div",0),d.Oc(1,X,3,0,"ng-container",1),d.pc(2,"async"),d.ac(3,"div",0),d.ac(4,"div",2),d.ac(5,"div",3),d.ac(6,"h3",4),d.Qc(7,"Options Analytics Dashboard"),d.Zb(),d.Zb(),d.Vb(8,"div",5),d.Zb(),d.ac(9,"div",6),d.ac(10,"div",7),d.Vb(11,"div",8),d.ac(12,"div",9),d.ac(13,"label"),d.Qc(14,"From"),d.Zb(),d.ac(15,"div",10),d.ac(16,"input",11,12),d.lc("ngModelChange",function(t){return e.fromDate=t}),d.Zb(),d.ac(18,"div",13),d.lc("click",function(){return d.Gc(t),d.Ec(17).toggle()}),d.ac(19,"span",14),d.Vb(20,"i",15),d.Zb(),d.Zb(),d.Zb(),d.Zb(),d.ac(21,"div",9),d.ac(22,"label"),d.Qc(23,"To"),d.Zb(),d.ac(24,"div",10),d.ac(25,"input",16,17),d.lc("ngModelChange",function(t){return e.toDate=t}),d.Zb(),d.ac(27,"div",13),d.lc("click",function(){return d.Gc(t),d.Ec(26).toggle()}),d.ac(28,"span",14),d.Vb(29,"i",15),d.Zb(),d.Zb(),d.Zb(),d.Zb(),d.ac(30,"div",9),d.ac(31,"label"),d.Qc(32,"\xa0"),d.Zb(),d.ac(33,"div",10),d.ac(34,"button",18),d.lc("click",function(){return e.refreshTradeJournals()}),d.Vb(35,"i",19),d.Qc(36," Get Trades "),d.Zb(),d.ac(37,"button",20),d.lc("click",function(){return e.resetTradeJournals()}),d.Vb(38,"i",21),d.Qc(39," Reset "),d.Zb(),d.Zb(),d.Zb(),d.Zb(),d.Vb(40,"div",22),d.Oc(41,rt,9,10,"div",23),d.Oc(42,at,2,11,"div",24),d.Oc(43,it,1,0,"div",25),d.Oc(44,st,9,10,"div",26),d.Oc(45,lt,2,11,"div",27),d.Zb(),d.Zb(),d.Zb()}2&t&&(d.Hb(1),d.wc("ngIf",d.qc(2,8,e.tradejournalsService.isLoading$)),d.Hb(15),d.wc("ngModel",e.fromDate),d.Hb(9),d.wc("ngModel",e.toDate),d.Hb(16),d.wc("ngIf",e.tradejournals.length>0),d.Hb(1),d.wc("ngIf",e.tradejournals.length>0),d.Hb(1),d.wc("ngIf",e.detailedtradejournals.length>0),d.Hb(1),d.wc("ngIf",e.detailedtradejournals.length>0),d.Hb(1),d.wc("ngIf",e.detailedtradejournals.length>0))},directives:[o.o,$.i,G.a,G.j,G.l,o.p,T.a],pipes:[o.b,o.d],styles:["#chart[_ngcontent-%COMP%], #DetailedChart[_ngcontent-%COMP%]{max-width:80%;margin:35px auto}"]}),t})();const ut=["chart"];function ht(t,e){1&t&&(d.Yb(0),d.ac(1,"div",13),d.Vb(2,"div",14),d.Zb(),d.Xb())}function dt(t,e){1&t&&(d.ac(0,"span"),d.Qc(1,"Profit : "),d.Zb())}function pt(t,e){1&t&&(d.ac(0,"span"),d.Qc(1,"Loss : "),d.Zb())}const ft=function(t){return{color:t}};function gt(t,e){if(1&t&&(d.ac(0,"div",15),d.Vb(1,"div",16),d.ac(2,"div",17),d.ac(3,"h4",18),d.Oc(4,dt,2,0,"span",1),d.Oc(5,pt,2,0,"span",1),d.Qc(6),d.pc(7,"currency"),d.Zb(),d.Zb(),d.Vb(8,"div",19),d.Zb()),2&t){const t=d.oc();d.Hb(3),d.wc("ngStyle",d.Ac(8,ft,t.getProfitColor(t.StockTotalPL))),d.Hb(1),d.wc("ngIf",t.StockTotalPL>0),d.Hb(1),d.wc("ngIf",t.StockTotalPL<0),d.Hb(1),d.Sc(" ",d.sc(7,4,t.StockTotalPL,"INR","")," ")}}function bt(t,e){if(1&t&&(d.ac(0,"div",20),d.Vb(1,"apx-chart",21),d.Zb()),2&t){const t=d.oc();d.Hb(1),d.wc("series",t.chartOptions.series)("chart",t.chartOptions.chart)("dataLabels",t.chartOptions.dataLabels)("plotOptions",t.chartOptions.plotOptions)("yaxis",t.chartOptions.yaxis)("xaxis",t.chartOptions.xaxis)("title",t.chartOptions.title)("tooltip",t.chartOptions.tooltip)("noData",t.chartOptions.nodata)("colors",t.chartOptions.colors)}}function yt(t,e){1&t&&d.Vb(0,"div",22)}function vt(t,e){if(1&t&&(d.ac(0,"h4",28),d.Qc(1),d.Zb()),2&t){const t=d.oc(2);d.Hb(1),d.Sc(" Total Trades : ",t.totalTrades," ")}}function mt(t,e){1&t&&(d.ac(0,"span"),d.Qc(1,"Profit : "),d.Zb())}function xt(t,e){1&t&&(d.ac(0,"span"),d.Qc(1,"Loss : "),d.Zb())}function Ot(t,e){if(1&t&&(d.ac(0,"div",23),d.Vb(1,"div",24),d.ac(2,"div",25),d.Oc(3,vt,2,1,"h4",26),d.Zb(),d.ac(4,"div",24),d.ac(5,"h4",18),d.Oc(6,mt,2,0,"span",1),d.Oc(7,xt,2,0,"span",1),d.Qc(8),d.pc(9,"currency"),d.Zb(),d.Zb(),d.Vb(10,"div",27),d.Zb()),2&t){const t=d.oc();d.Hb(3),d.wc("ngIf",t.totalTrades>0),d.Hb(2),d.wc("ngStyle",d.Ac(9,ft,t.getProfitColor(t.DetailedStockTotalPL))),d.Hb(1),d.wc("ngIf",t.DetailedStockTotalPL>0),d.Hb(1),d.wc("ngIf",t.DetailedStockTotalPL<0),d.Hb(1),d.Sc(" ",d.sc(9,5,t.DetailedStockTotalPL,"INR","")," ")}}function Tt(t,e){if(1&t&&(d.ac(0,"div",20),d.Vb(1,"apx-chart",21),d.Zb()),2&t){const t=d.oc();d.Hb(1),d.wc("series",t.StockChartOptions.series)("chart",t.StockChartOptions.chart)("dataLabels",t.StockChartOptions.dataLabels)("plotOptions",t.StockChartOptions.plotOptions)("yaxis",t.StockChartOptions.yaxis)("xaxis",t.StockChartOptions.xaxis)("title",t.StockChartOptions.title)("tooltip",t.StockChartOptions.tooltip)("noData",t.StockChartOptions.nodata)("colors",t.StockChartOptions.colors)}}let Dt=(()=>{class t{constructor(t,e){this.algotradesService=t,this.tradejournalsService=e,this.stocktotalalgotrades=[],this.stockanalyticstradejournals=[],this.StockTotalPL=0,this.stockalgotrades=[],this.DetailedStockTotalPL=0,this.subscriptions=[],this.totalTrades=0,this.stocktradejournals=[],this.combineTrades=[],this.GetSortOrder=t=>(e,r)=>e[t]>r[t]?1:e[t]<r[t]?-1:0,this.chartOptions={series:[{name:"P&L",data:[]}],chart:{type:"bar",height:400,toolbar:{show:!1},zoom:{enabled:!1},events:{dataPointSelection:(t,e,r)=>{this.getStockAlgoTrades(r.w.config.series[0].data[r.dataPointIndex].x)}}},colors:["#7D02EB"],nodata:{text:"No trades found"},tooltip:{custom:({series:t,seriesIndex:e,dataPointIndex:r,w:a})=>'<div class="card card-custom bg-gray-700"  ><div class="card-header border-0" style = "min-height: 40px !important"><div class="card-title"><h3 class="card-label text-white">'+a.globals.labels[r]+'</h3></div></div><div class="separator separator-solid separator-white opacity-20"></div><div class="card-body text-white  mb-0" style=" margin-top: -15px"><p>Trades : '+a.config.series[0].data[r].trades+'</p><p style="margin-bottom: -15px">P&L : '+t[e][r]+"</p></div></div>"},title:{text:"Stock Analysis",align:"left",margin:30,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"18px",fontWeight:"bold",color:"#263238"}},plotOptions:{bar:{columnWidth:"90%"}},dataLabels:{enabled:!1},yaxis:{labels:{formatter:t=>"\u20b9 "+t,style:{fontSize:"14px"}}},xaxis:{labels:{show:!1}}},this.StockChartOptions={series:[{name:"P&L",data:[]}],chart:{type:"bar",height:400,toolbar:{show:!1},zoom:{enabled:!1}},colors:["#546E7A"],nodata:{text:"No trades found"},tooltip:{custom:({series:t,seriesIndex:e,dataPointIndex:r,w:a})=>'<div class="card card-custom bg-gray-700"  ><div class="card-header border-0" style = "min-height: 40px !important"><div class="card-title"><h3 class="card-label text-white">'+a.globals.labels[r]+'</h3></div></div><div class="separator separator-solid separator-white opacity-20"></div><div class="card-body text-white  mb-0" style=" margin-top: -15px"><p >P&L : '+t[e][r]+'</p><p style="margin-bottom: -15px">Stock : '+a.config.series[0].data[r].stock+"</p></div></div>"},title:{text:""},plotOptions:{bar:{columnWidth:"90%"}},dataLabels:{enabled:!1},yaxis:{labels:{formatter:t=>"\u20b9 "+t,style:{fontSize:"14px"}}},xaxis:{labels:{show:!1}}}}ngOnInit(){this.algotradesService.getStockTotalAlgoTrades(),this.tradejournalsService.getStockAnalyticsTradejournals();const t=Object(c.a)({algotrades:this.algotradesService.stocktotalalgotrades$.pipe(Object(u.a)(t=>{this.stocktotalalgotrades=[],this.stocktotalalgotrades=t.map(t=>({x:t._id,y:t.Profit,trades:t.Trades})),this.updateStockSeries()}),Object(h.a)(t=>t)),tradejournals:this.tradejournalsService.stockanalyticstradejournals$.pipe(Object(u.a)(t=>{this.stockanalyticstradejournals=[],this.stockanalyticstradejournals=t.map(t=>({x:t._id,y:t.Profit,trades:t.Trades})),this.updateStockSeries()}),Object(h.a)(t=>t))}).subscribe();this.subscriptions.push(t);const e=Object(c.a)({algotrades:this.algotradesService.stockalgotrades$.pipe(Object(u.a)(t=>{this.stockalgotrades=[],this.stockalgotrades=t.map(t=>({x:l()(t.tradedate).format("DD MMM YYYY"),y:t.Profit,stock:t.StockSymbol})),this.updateDetailedStockSeries()}),Object(h.a)(t=>t)),tradejournals:this.tradejournalsService.stockanalyticsdetailtradejournals$.pipe(Object(u.a)(t=>{this.stocktradejournals=[],this.stocktradejournals=t.map(t=>({x:l()(t.LastExitDate).format("DD MMM YYYY"),y:Number(t.totalgainloss),stock:"O "+t.StockSymbol})),this.updateDetailedStockSeries()}),Object(h.a)(t=>t))}).subscribe();this.subscriptions.push(e),this.resetAlgoTrades()}getProfitColor(t){return Number(t)>0?"green":"red"}updateStockSeries(){this.StockTotalPL=0,this.stockanalyticstradejournals.map(t=>{const e=this.stocktotalalgotrades.find(e=>e.x===t.x);e?(e.y+=t.y,e.trades=Number(e.trades)+Number(t.trades)):this.stocktotalalgotrades.push(t)}),this.stocktotalalgotrades.map(t=>{this.StockTotalPL+=Number(t.y)}),this.stocktotalalgotrades.sort(this.GetSortOrder("x")),this.chartOptions.series=[{name:"P&L",data:this.stocktotalalgotrades}]}updateDetailedStockSeries(){this.DetailedStockTotalPL=0,this.combineTrades=[],this.combineTrades=[...this.stockalgotrades,...this.stocktradejournals],this.totalTrades=this.combineTrades.length,this.StockChartOptions.series=[{name:"P&L",data:this.combineTrades}],this.combineTrades.map(t=>{this.DetailedStockTotalPL+=Number(t.y)}),this.StockSymbol&&(this.StockChartOptions.title={text:"Trades for "+this.StockSymbol,align:"left",margin:30,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"18px",fontWeight:"bold",color:"#263238"}})}getStockAlgoTrades(t){this.tradejournalsService.getStockAnalyticsDetailTradejournals({RequestType:"StockTotals",StockType:"Option",Status:"Closed",StockSymbol:t}),this.algotradesService.getStockAlgoTrades({StockSymbol:t}),this.StockSymbol=t}resetAlgoTrades(){this.StockTotalPL=0,this.stocktotalalgotrades=[],this.DetailedStockTotalPL=0,this.stockalgotrades=[],this.StockSymbol="",this.stockalgotrades=[],this.stocktradejournals=[],this.combineTrades=[],this.tradejournalsService.getStockAnalyticsTradejournals(),this.algotradesService.getStockTotalAlgoTrades()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(d.Ub(x),d.Ub(O.a))},t.\u0275cmp=d.Ob({type:t,selectors:[["app-stock-analytics"]],viewQuery:function(t,e){var r;1&t&&d.Lc(ut,!0),2&t&&d.Dc(r=d.mc())&&(e.chart=r.first)},decls:18,vars:8,consts:[[1,"card","card-custom","card-stretch",2,"min-height","550px"],[4,"ngIf"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"card-toolbar"],[1,"btn","btn-sm","btn-secondary","form-control-sm",3,"click"],[1,"flaticon2-circular-arrow"],[1,"card-body"],["class","row",4,"ngIf"],["id","chart",4,"ngIf"],["class","separator separator-dashed my-5",4,"ngIf"],["class","row mt-5",4,"ngIf"],[1,"progress","progress-modal"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated","bg-primary",2,"width","100%"],[1,"row"],[1,"col-lg-6"],[1,"col-lg-5"],[1,"text-right","mr-15","mb-1",3,"ngStyle"],[1,"col-lg-1"],["id","chart"],[3,"series","chart","dataLabels","plotOptions","yaxis","xaxis","title","tooltip","noData","colors"],[1,"separator","separator-dashed","my-5"],[1,"row","mt-5"],[1,"col-lg-4"],[1,"col-lg-3"],["class","text-right text-muted mr-15 mb-1",4,"ngIf"],[1,"col-lg-2"],[1,"text-right","text-muted","mr-15","mb-1"]],template:function(t,e){1&t&&(d.ac(0,"div",0),d.Oc(1,ht,3,0,"ng-container",1),d.pc(2,"async"),d.ac(3,"div",0),d.ac(4,"div",2),d.ac(5,"div",3),d.ac(6,"h3",4),d.Qc(7,"Stock Analytics Dashboard"),d.Zb(),d.Zb(),d.ac(8,"div",5),d.ac(9,"button",6),d.lc("click",function(){return e.resetAlgoTrades()}),d.Vb(10,"i",7),d.Qc(11," Reset "),d.Zb(),d.Zb(),d.Zb(),d.ac(12,"div",8),d.Oc(13,gt,9,10,"div",9),d.Oc(14,bt,2,10,"div",10),d.Oc(15,yt,1,0,"div",11),d.Oc(16,Ot,11,11,"div",12),d.Oc(17,Tt,2,10,"div",10),d.Zb(),d.Zb(),d.Zb()),2&t&&(d.Hb(1),d.wc("ngIf",d.qc(2,6,e.algotradesService.isLoading$)),d.Hb(12),d.wc("ngIf",e.stocktotalalgotrades.length>0),d.Hb(1),d.wc("ngIf",e.stocktotalalgotrades.length>0),d.Hb(1),d.wc("ngIf",e.combineTrades.length>0),d.Hb(1),d.wc("ngIf",e.combineTrades.length>0),d.Hb(1),d.wc("ngIf",e.combineTrades.length>0))},directives:[o.o,o.p,T.a],pipes:[o.b,o.d],styles:["#chart[_ngcontent-%COMP%], #DetailedChart[_ngcontent-%COMP%]{max-width:75%;margin:35px auto}#chart[_ngcontent-%COMP%]   .apexcharts-tooltip[_ngcontent-%COMP%]{color:#000}#chart[_ngcontent-%COMP%]   .apexcharts-tooltip[_ngcontent-%COMP%]   .apexcharts-tooltip-series-group.active[_ngcontent-%COMP%]{background:#fff!important}"]}),t})();var St=r("LvDl"),kt=r("Kj3r"),wt=r("9wGw");const Lt=["chart"];function _t(t,e){1&t&&(d.Yb(0),d.ac(1,"div",32),d.Vb(2,"div",33),d.Zb(),d.Xb())}function Pt(t,e){1&t&&d.Qc(0),2&t&&d.Sc(" ",e.result.stock," ")}function Ct(t,e){1&t&&d.Vb(0,"span",39),2&t&&d.wc("inlineSVG","./assets/media/svg/icons/Code/trending-down.svg")}function Mt(t,e){1&t&&d.Vb(0,"span",39),2&t&&d.wc("inlineSVG","./assets/media/svg/icons/Code/trending-up.svg")}const Zt=function(t){return{color:t}};function Yt(t,e){if(1&t&&(d.ac(0,"div",34),d.Vb(1,"div",35),d.ac(2,"div",36),d.ac(3,"h4",37),d.Qc(4),d.pc(5,"currency"),d.Oc(6,Ct,1,1,"span",38),d.Oc(7,Mt,1,1,"span",38),d.Zb(),d.Zb(),d.Vb(8,"div",8),d.Zb()),2&t){const t=d.oc();d.Hb(3),d.wc("ngStyle",d.Ac(8,Zt,t.getProfitColor(t.totalPL))),d.Hb(1),d.Sc(" ",d.sc(5,4,t.totalPL,"INR"," \u20b9 ")," "),d.Hb(2),d.wc("ngIf",t.totalPL<=0),d.Hb(1),d.wc("ngIf",t.totalPL>0)}}function jt(t,e){if(1&t&&(d.ac(0,"div",50),d.Vb(1,"apx-chart",51),d.Zb()),2&t){const t=d.oc(2);d.Hb(1),d.wc("series",t.chartOptions.series)("chart",t.chartOptions.chart)("dataLabels",t.chartOptions.dataLabels)("plotOptions",t.chartOptions.plotOptions)("yaxis",t.chartOptions.yaxis)("xaxis",t.chartOptions.xaxis)("title",t.chartOptions.title)("tooltip",t.chartOptions.tooltip)("noData",t.chartOptions.nodata)}}function Wt(t,e){if(1&t&&(d.ac(0,"div",34),d.ac(1,"div",40),d.Oc(2,jt,2,9,"div",41),d.Zb(),d.ac(3,"div",18),d.ac(4,"div",42),d.ac(5,"div",43),d.ac(6,"div",44),d.Vb(7,"apx-chart",45),d.Zb(),d.Zb(),d.Zb(),d.ac(8,"div",34),d.Vb(9,"div",9),d.ac(10,"div",46),d.ac(11,"span",47),d.Qc(12," Total Trades : \xa0 "),d.Zb(),d.ac(13,"span",48),d.Qc(14),d.Zb(),d.Zb(),d.Zb(),d.ac(15,"div",34),d.Vb(16,"div",9),d.ac(17,"div",49),d.ac(18,"span",47),d.Qc(19," Profit Factor : \xa0 "),d.Zb(),d.ac(20,"span",48),d.Qc(21),d.pc(22,"number"),d.Zb(),d.Zb(),d.Zb(),d.ac(23,"div",34),d.Vb(24,"div",9),d.ac(25,"div",49),d.ac(26,"span",47),d.Qc(27," Avg. Win : \xa0 "),d.Zb(),d.ac(28,"span",48),d.Qc(29),d.pc(30,"currency"),d.Zb(),d.Zb(),d.Zb(),d.ac(31,"div",34),d.Vb(32,"div",9),d.ac(33,"div",49),d.ac(34,"span",47),d.Qc(35," Avg. Loss : \xa0 "),d.Zb(),d.ac(36,"span",48),d.Qc(37),d.pc(38,"currency"),d.Zb(),d.Zb(),d.Zb(),d.ac(39,"div",34),d.Vb(40,"div",9),d.ac(41,"div",49),d.ac(42,"span",47),d.Qc(43," Best Trade : \xa0 "),d.Zb(),d.ac(44,"span",48),d.Qc(45),d.pc(46,"number"),d.Zb(),d.Zb(),d.Zb(),d.ac(47,"div",34),d.Vb(48,"div",9),d.ac(49,"div",49),d.ac(50,"span",47),d.Qc(51," Worst Trade : \xa0 "),d.Zb(),d.ac(52,"span",48),d.Qc(53),d.pc(54,"number"),d.Zb(),d.Zb(),d.Zb(),d.Zb(),d.Zb()),2&t){const t=d.oc();d.Hb(2),d.wc("ngIf",t.algotrades.length>0),d.Hb(5),d.wc("series",t.winRateChartOptions.series)("chart",t.winRateChartOptions.chart)("plotOptions",t.winRateChartOptions.plotOptions)("labels",t.winRateChartOptions.labels)("fill",t.winRateChartOptions.fill)("stroke",t.winRateChartOptions.stroke),d.Hb(7),d.Sc(" ",t.currentTotalTrades," "),d.Hb(7),d.Sc(" ",d.rc(22,13,t.currentProfitFactor,"0.2-2")," "),d.Hb(8),d.Sc(" ",d.sc(30,16,t.currentAvgProfit,"INR","\u20b9 ")," "),d.Hb(8),d.Sc(" ",d.sc(38,20,t.currentAvgLoss,"INR","\u20b9 ")," "),d.Hb(8),d.Sc(" ",d.rc(46,24,t.currentMaxProfit,"0.2-2")," "),d.Hb(8),d.Sc(" ",d.rc(54,27,t.currentMaxLoss,"0.2-2")," ")}}function At(t,e){if(1&t&&(d.ac(0,"div",34),d.Vb(1,"div",8),d.ac(2,"div",18),d.ac(3,"div",52),d.Vb(4,"apx-chart",53),d.Zb(),d.Zb(),d.ac(5,"div",54),d.ac(6,"div",34),d.ac(7,"div",35),d.ac(8,"div",55),d.ac(9,"div",56),d.ac(10,"span",57),d.Qc(11," 9 "),d.Zb(),d.Zb(),d.ac(12,"div",58),d.ac(13,"span",59),d.Qc(14,"9:00 - 10:00"),d.Zb(),d.ac(15,"span",60),d.Qc(16),d.Zb(),d.Zb(),d.ac(17,"div",61),d.Vb(18,"apx-chart",45),d.Zb(),d.Zb(),d.ac(19,"div",62),d.ac(20,"div",56),d.ac(21,"span",57),d.Qc(22," 10 "),d.Zb(),d.Zb(),d.ac(23,"div",58),d.ac(24,"span",59),d.Qc(25,"10:00 - 11:00"),d.Zb(),d.ac(26,"span",60),d.Qc(27),d.Zb(),d.Zb(),d.ac(28,"div",61),d.Vb(29,"apx-chart",45),d.Zb(),d.Zb(),d.ac(30,"div",62),d.ac(31,"div",56),d.ac(32,"span",57),d.Qc(33," 11 "),d.Zb(),d.Zb(),d.ac(34,"div",58),d.ac(35,"span",59),d.Qc(36,"11:00 - 12:00"),d.Zb(),d.ac(37,"span",60),d.Qc(38),d.Zb(),d.Zb(),d.ac(39,"div",61),d.Vb(40,"apx-chart",45),d.Zb(),d.Zb(),d.ac(41,"div",62),d.ac(42,"div",56),d.ac(43,"span",57),d.Qc(44," 12 "),d.Zb(),d.Zb(),d.ac(45,"div",58),d.ac(46,"span",59),d.Qc(47,"12:00 - 01:00"),d.Zb(),d.ac(48,"span",60),d.Qc(49),d.Zb(),d.Zb(),d.ac(50,"div",61),d.Vb(51,"apx-chart",45),d.Zb(),d.Zb(),d.Zb(),d.ac(52,"div",35),d.ac(53,"div",63),d.ac(54,"div",56),d.ac(55,"span",57),d.Qc(56," 13 "),d.Zb(),d.Zb(),d.ac(57,"div",58),d.ac(58,"span",59),d.Qc(59,"01:00 - 02:00"),d.Zb(),d.ac(60,"span",60),d.Qc(61),d.Zb(),d.Zb(),d.ac(62,"div",61),d.Vb(63,"apx-chart",45),d.Zb(),d.Zb(),d.ac(64,"div",64),d.ac(65,"div",56),d.ac(66,"span",57),d.Qc(67," 14 "),d.Zb(),d.Zb(),d.ac(68,"div",58),d.ac(69,"span",59),d.Qc(70,"02:00 - 03:00"),d.Zb(),d.ac(71,"span",60),d.Qc(72),d.Zb(),d.Zb(),d.ac(73,"div",61),d.Vb(74,"apx-chart",45),d.Zb(),d.Zb(),d.ac(75,"div",64),d.ac(76,"div",56),d.ac(77,"span",57),d.Qc(78," 15 "),d.Zb(),d.Zb(),d.ac(79,"div",58),d.ac(80,"span",59),d.Qc(81,"03:00 - 04:00"),d.Zb(),d.ac(82,"span",60),d.Qc(83),d.Zb(),d.Zb(),d.ac(84,"div",61),d.Vb(85,"apx-chart",45),d.Zb(),d.Zb(),d.Zb(),d.Zb(),d.Zb(),d.Zb()),2&t){const t=d.oc();d.Hb(4),d.wc("series",t.stockTypeChartOptions.series)("chart",t.stockTypeChartOptions.chart)("plotOptions",t.stockTypeChartOptions.plotOptions)("labels",t.stockTypeChartOptions.labels)("legend",t.stockTypeChartOptions.legend)("colors",t.stockTypeChartOptions.colors),d.Hb(12),d.Tc("Win: ",t.hourlyDetails[0].hourWins," Loss: ",t.hourlyDetails[0].hourLoses,""),d.Hb(2),d.wc("series",t.hourlyDetails[0].winRate)("chart",t.hourlyWinRateChartOptions.chart)("plotOptions",t.hourlyWinRateChartOptions.plotOptions)("labels",t.hourlyWinRateChartOptions.labels)("fill",t.hourlyWinRateChartOptions.fill)("stroke",t.hourlyWinRateChartOptions.stroke),d.Hb(9),d.Tc("Win: ",t.hourlyDetails[1].hourWins," Loss: ",t.hourlyDetails[1].hourLoses,""),d.Hb(2),d.wc("series",t.hourlyDetails[1].winRate)("chart",t.hourlyWinRateChartOptions.chart)("plotOptions",t.hourlyWinRateChartOptions.plotOptions)("labels",t.hourlyWinRateChartOptions.labels)("fill",t.hourlyWinRateChartOptions.fill)("stroke",t.hourlyWinRateChartOptions.stroke),d.Hb(9),d.Tc("Win: ",t.hourlyDetails[2].hourWins," Loss: ",t.hourlyDetails[2].hourLoses,""),d.Hb(2),d.wc("series",t.hourlyDetails[2].winRate)("chart",t.hourlyWinRateChartOptions.chart)("plotOptions",t.hourlyWinRateChartOptions.plotOptions)("labels",t.hourlyWinRateChartOptions.labels)("fill",t.hourlyWinRateChartOptions.fill)("stroke",t.hourlyWinRateChartOptions.stroke),d.Hb(9),d.Tc("Win: ",t.hourlyDetails[3].hourWins," Loss: ",t.hourlyDetails[3].hourLoses,""),d.Hb(2),d.wc("series",t.hourlyDetails[3].winRate)("chart",t.hourlyWinRateChartOptions.chart)("plotOptions",t.hourlyWinRateChartOptions.plotOptions)("labels",t.hourlyWinRateChartOptions.labels)("fill",t.hourlyWinRateChartOptions.fill)("stroke",t.hourlyWinRateChartOptions.stroke),d.Hb(10),d.Tc("Win: ",t.hourlyDetails[4].hourWins," Loss: ",t.hourlyDetails[4].hourLoses,""),d.Hb(2),d.wc("series",t.hourlyDetails[4].winRate)("chart",t.hourlyWinRateChartOptions.chart)("plotOptions",t.hourlyWinRateChartOptions.plotOptions)("labels",t.hourlyWinRateChartOptions.labels)("fill",t.hourlyWinRateChartOptions.fill)("stroke",t.hourlyWinRateChartOptions.stroke),d.Hb(9),d.Tc("Win: ",t.hourlyDetails[5].hourWins," Loss: ",t.hourlyDetails[5].hourLoses,""),d.Hb(2),d.wc("series",t.hourlyDetails[5].winRate)("chart",t.hourlyWinRateChartOptions.chart)("plotOptions",t.hourlyWinRateChartOptions.plotOptions)("labels",t.hourlyWinRateChartOptions.labels)("fill",t.hourlyWinRateChartOptions.fill)("stroke",t.hourlyWinRateChartOptions.stroke),d.Hb(9),d.Tc("Win: ",t.hourlyDetails[6].hourWins," Loss: ",t.hourlyDetails[6].hourLoses,""),d.Hb(2),d.wc("series",t.hourlyDetails[6].winRate)("chart",t.hourlyWinRateChartOptions.chart)("plotOptions",t.hourlyWinRateChartOptions.plotOptions)("labels",t.hourlyWinRateChartOptions.labels)("fill",t.hourlyWinRateChartOptions.fill)("stroke",t.hourlyWinRateChartOptions.stroke)}}function It(t,e){1&t&&d.Vb(0,"div",65)}function Rt(t,e){1&t&&d.Vb(0,"span",39),2&t&&d.wc("inlineSVG","./assets/media/svg/icons/Code/trending-down.svg")}function Et(t,e){1&t&&d.Vb(0,"span",39),2&t&&d.wc("inlineSVG","./assets/media/svg/icons/Code/trending-up.svg")}function Ht(t,e){if(1&t&&(d.ac(0,"h4",37),d.Qc(1),d.pc(2,"currency"),d.Oc(3,Rt,1,1,"span",38),d.Oc(4,Et,1,1,"span",38),d.Zb()),2&t){const t=d.oc(2);d.wc("ngStyle",d.Ac(8,Zt,t.getProfitColor(t.DetailedTotalPL))),d.Hb(1),d.Sc(" ",d.sc(2,4,t.DetailedTotalPL,"INR"," \u20b9 ")," "),d.Hb(2),d.wc("ngIf",t.DetailedTotalPL<0),d.Hb(1),d.wc("ngIf",t.DetailedTotalPL>0)}}function Ft(t,e){if(1&t&&(d.ac(0,"div",42),d.Vb(1,"div",35),d.ac(2,"div",36),d.Oc(3,Ht,5,10,"h4",66),d.Zb(),d.Vb(4,"div",8),d.Zb()),2&t){const t=d.oc();d.Hb(3),d.wc("ngIf",t.detailedalgotrades.length>0)}}function Nt(t,e){if(1&t&&(d.ac(0,"div",67),d.Vb(1,"apx-chart",68),d.Zb()),2&t){const t=d.oc();d.Hb(1),d.wc("series",t.DetailedChartOptions.series)("chart",t.DetailedChartOptions.chart)("dataLabels",t.DetailedChartOptions.dataLabels)("plotOptions",t.DetailedChartOptions.plotOptions)("yaxis",t.DetailedChartOptions.yaxis)("xaxis",t.DetailedChartOptions.xaxis)("title",t.DetailedChartOptions.title)("tooltip",t.DetailedChartOptions.tooltip)("noData",t.DetailedChartOptions.nodata)("colors",t.DetailedChartOptions.colors)}}function Qt(t,e){if(1&t&&(d.ac(0,"div",34),d.ac(1,"div",69),d.ac(2,"div",70),d.Vb(3,"apx-chart",71),d.Zb(),d.Zb(),d.Zb()),2&t){const t=d.oc();d.Hb(3),d.wc("series",t.tradeTagsChartOptions.series)("chart",t.tradeTagsChartOptions.chart)("dataLabels",t.tradeTagsChartOptions.dataLabels)("plotOptions",t.tradeTagsChartOptions.plotOptions)("yaxis",t.tradeTagsChartOptions.yaxis)("xaxis",t.tradeTagsChartOptions.xaxis)("title",t.tradeTagsChartOptions.title)("tooltip",t.tradeTagsChartOptions.tooltip)("noData",t.tradeTagsChartOptions.nodata)("colors",t.tradeTagsChartOptions.colors)("fill",t.tradeTagsChartOptions.fill)}}let Vt=(()=>{class t{constructor(t,e,r,a){this.stockmasterService=t,this.router=e,this.keywordsService=r,this.tradejournalsService=a,this.algotrades=[],this.tradejournals=[],this.dailyTradeJournals=[],this.detailedalgotrades=[],this.detailedtradejournals=[],this.stockTradeJournals=[],this.totalPL=0,this.DetailedTotalPL=0,this.currentTotalTrades=0,this.currentProfit=0,this.currentMaxProfit=0,this.currentMaxLoss=0,this.currentAvgProfit=0,this.currentAvgLoss=0,this.currentFuturesProfit=0,this.currentOptionsProfit=0,this.detailedStockType=[],this.currentEntryHours=[],this.hourlyDetails=[],this.allTradeTags=[],this.currentTradeTags=[],this.filteredTradeTags=[],this.subscriptions=[],this.isLoading=new p.a(!1),this.RequestType="",this.searchStocks=t=>t.pipe(Object(kt.a)(200),Object(u.a)(t=>""===t?[]:this.stocks.filter(e=>e.stock.toLowerCase().indexOf(t.toLowerCase())>-1).slice(0,10))),this.formatter=t=>t.stock,this.chartOptions={series:[{name:"P&L",data:[]}],chart:{type:"bar",height:400,toolbar:{show:!1},zoom:{enabled:!1},events:{dataPointSelection:(t,e,r)=>{this.getDetailedAlgoTrades(r.w.config.series[0].data[r.dataPointIndex].x)}}},nodata:{text:"No trades found"},tooltip:{custom:({series:t,seriesIndex:e,dataPointIndex:r,w:a})=>'<div class="card card-custom bg-gray-700"  ><div class="card-header border-0" style = "min-height: 40px !important"><div class="card-title"><h3 class="card-label text-white">'+a.globals.labels[r]+'</h3></div></div><div class="separator separator-solid separator-white opacity-20"></div><div class="card-body text-white  mb-0" style=" margin-top: -15px"><p  style="margin-bottom: -15px">P&L : '+t[e][r]+"</p>  </></div></div>"},title:{text:"Daily Trade Analysis",align:"left",margin:30,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"18px",fontWeight:"bold",color:"#263238"}},plotOptions:{bar:{columnWidth:"90%"}},dataLabels:{enabled:!1},yaxis:{labels:{formatter:t=>"\u20b9 "+t,style:{fontSize:"14px"}}},xaxis:{labels:{show:!1}}},this.DetailedChartOptions={series:[{name:"P&L",data:[]}],chart:{type:"bar",height:400,toolbar:{show:!1},zoom:{enabled:!1},events:{dataPointSelection:(t,e,r)=>{this.openTradeJournal(r.w.config.series[0].data[r.dataPointIndex].id)}}},nodata:{text:"No trades found"},tooltip:{custom:({series:t,seriesIndex:e,dataPointIndex:r,w:a})=>'<div class="card card-custom bg-gray-700"  ><div class="card-header border-0" style = "min-height: 40px !important"><div class="card-title"><h3 class="card-label text-white">'+a.config.series[0].data[r].stockSymbol+'</h3></div></div><div class="separator separator-solid separator-white opacity-20"></div><div class="card-body text-white  mb-0" style=" margin-top: -15px"><p>Date : '+a.config.series[0].data[r].tradedate+"</p><p >P&L : "+t[e][r]+'</p><p style="margin-bottom: -15px"> '+a.config.series[0].data[r].TradeType+"</p></div></div>"},title:{text:""},plotOptions:{bar:{columnWidth:"90%"}},dataLabels:{enabled:!1},yaxis:{labels:{formatter:t=>"\u20b9 "+t,style:{fontSize:"14px"}}},xaxis:{labels:{show:!1}}},this.winRateChartOptions={series:[],chart:{height:200,type:"radialBar",offsetY:-10},plotOptions:{radialBar:{startAngle:-135,endAngle:135,dataLabels:{name:{fontSize:"14px",color:void 0,offsetY:50},value:{offsetY:-10,fontSize:"16px",color:void 0,formatter:function(t){return t+"%"}}}}},fill:{type:"gradient",gradient:{shade:"dark",shadeIntensity:.15,inverseColors:!1,opacityFrom:1,opacityTo:1,stops:[0,50,65,91]}},stroke:{dashArray:3},labels:["Win Rate"]},this.stockTypeChartOptions={series:[],chart:{height:300,type:"radialBar"},plotOptions:{radialBar:{offsetY:0,startAngle:0,endAngle:270,hollow:{margin:5,size:"25%",background:"transparent",image:void 0},dataLabels:{name:{show:!1},value:{show:!1}}}},colors:["#0066c4","#0084ff","#39539E","#0077B5","#0088cf"],labels:[],legend:{show:!0,floating:!0,fontSize:"12px",position:"left",offsetX:5,offsetY:-10,labels:{useSeriesColors:!0},formatter:function(t,e){return t+" : "+e.w.globals.series[e.seriesIndex]+"%"},itemMargin:{horizontal:3}}},this.hourlyWinRateChartOptions={series:[0],chart:{height:100,type:"radialBar",offsetY:-10},plotOptions:{radialBar:{startAngle:-135,endAngle:135,hollow:{size:"40%"},dataLabels:{name:{fontSize:"9px",color:void 0,offsetY:30},value:{offsetY:-10,fontSize:"12px",color:void 0,formatter:function(t){return t+"%"}}}}},fill:{type:"gradient",gradient:{shade:"dark",shadeIntensity:.15,inverseColors:!1,opacityFrom:1,opacityTo:1,stops:[0,50,65,91]}},stroke:{dashArray:2},labels:["Win Rate"]},this.tradeTagsChartOptions={series:[{name:"P&L",data:[]}],chart:{type:"bar",height:450,toolbar:{show:!1},zoom:{enabled:!1},events:{dataPointSelection:(t,e,r)=>{this.getDetailedTagTrades(r.w.config.series[0].data[r.dataPointIndex].x)}}},fill:{colors:[(t,e,r)=>t.value<0?"#fa4b42":"#6b8abc"],opacity:.9,type:"solid"},nodata:{text:"No trades found"},tooltip:{custom:({series:t,seriesIndex:e,dataPointIndex:r,w:a})=>'<div class="card card-custom bg-gray-700"  ><div class="card-header border-0" style = "min-height: 40px !important"><div class="card-title"><h3 class="card-label text-white">'+a.globals.labels[r]+'</h3></div></div><div class="separator separator-solid separator-white opacity-20"></div><div class="card-body text-white  mb-0" style=" margin-top: -15px"><p  style="margin-bottom: -15px">P&L : '+t[e][r]+'</p>  <p  style="margin-bottom: -15px;margin-top: 20px">Count : '+a.config.series[0].data[r].count+"</p>  </></div></div>"},title:{text:"Trade Tags Analysis",align:"left",margin:30,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"18px",fontWeight:"bold",color:"#263238"}},plotOptions:{bar:{horizontal:!0,barHeight:"80%"}},dataLabels:{enabled:!0,formatter:t=>"\u20b9 "+t,style:{fontSize:"12px",colors:["#fff"],fontFamily:void 0}},yaxis:{labels:{align:"right",minWidth:0,maxWidth:250,style:{fontSize:"12px"}}},xaxis:{labels:{formatter:t=>"\u20b9 "+t}}}}ngOnInit(){this.tradejournals=[],this.totalPL=0,this.tradejournalsService.getTradeJournals({RequestType:"ClosedPositions",Status:"Closed",fromDate:l()([l()().year()]).format("M/DD/YYYY"),toDate:l()().add(1,"days").format()});const t=this.tradejournalsService.tradejournals$.pipe(Object(u.a)(t=>{this.tradejournals=[],this.totalPL=0,this.dailyTradeJournals=[],this.stockTradeJournals=[],this.tradejournals=t.map(t=>(t.LastExitDate=l()(t.LastExitDate).format("DD MMM YYYY"),t)),this.updateSeries()}),Object(h.a)(t=>t)).subscribe();this.subscriptions.push(t);const e=this.stockmasterService.stockmasters$.pipe(Object(u.a)(t=>{t.length?this.stocks=t:this.stockmasterService.fetch()}),Object(h.a)(t=>t)).subscribe();this.subscriptions.push(e),this.keywordsService.fetch();const r=this.keywordsService.keywords$.pipe(Object(u.a)(t=>{this.allTradeTags=t.filter(t=>"Trade Tag"===t.keywordtype)}),Object(h.a)(t=>t)).subscribe();this.subscriptions.push(r),this.toDate=l()().format("M/DD/YYYY").toString(),this.fromDate=l()([l()().year(),l()().month()]).format("M/DD/YYYY"),this.detailedalgotrades=[],this.detailedtradejournals=[],this.DetailedTotalPL=0,this.StockSymbol="",this.selectedStock=""}refreshAlgoTrades(){this.algotrades=[],this.totalPL=0,this.detailedalgotrades=[],this.detailedtradejournals=[],this.DetailedTotalPL=0,this.totalPL=0,this.tradejournalsService.getTradeJournals({RequestType:"ClosedPositions",Status:"Closed",fromDate:l()(this.fromDate),toDate:l()(this.toDate).add(1,"days").format()})}resetAlgoTrades(){this.toDate=l()().format("M/DD/YYYY").toString(),this.fromDate=l()([l()().year(),l()().month()]).format("M/DD/YYYY"),this.algotrades=[],this.tradejournals=[],this.dailyTradeJournals=[],this.totalPL=0,this.detailedalgotrades=[],this.detailedtradejournals=[],this.DetailedTotalPL=0,this.StockSymbol="",this.selectedStock="",this.tradejournalsService.getTradeJournals({RequestType:"ClosedPositions",Status:"Closed",fromDate:l()([l()().year(),l()().month()]).format("M/DD/YYYY"),toDate:l()().add(1,"days").format()})}getProfitColor(t){return Number(t)>0?"green":"red"}updateSeries(){this.winRateChartOptions.series=[],this.totalPL=0,this.dailyTradeJournals=[],this.stockTradeJournals=[],this.algotrades=[],this.detailedalgotrades=[],this.DetailedTotalPL=0,this.currentTotalTrades=0,this.currentProfit=0,this.currentMaxProfit=0,this.currentMaxLoss=0,this.currentAvgProfit=0,this.currentAvgLoss=0,this.currentWinRate=0,this.currentProfitFactor=0,this.detailedStockType=[],this.currentEntryHours=[],this.hourlyDetails=[],this.detailedalgotrades=[],this.detailedtradejournals=[],this.DetailedTotalPL=0,this.StockSymbol?(this.stockTradeJournals=this.tradejournals.filter(t=>t.StockSymbol===this.StockSymbol.stock),this.dailyTradeJournals=St(this.stockTradeJournals).sortBy(t=>this.stockTradeJournals.indexOf(t[0])).groupBy("LastExitDate").map(t=>({x:t[0].LastExitDate,y:St.sumBy(t,"totalgainloss"),tradedate:l()(t[0].LastExitDate).format("DD MMM YYYY"),lastExitDate:t[0].LastExitDate})).value(),this.currentTradeTags=[],this.allTradeTags.map(t=>{let e=0,r=0;this.stockTradeJournals.length>0&&this.stockTradeJournals.map(a=>{a.AllTradeTag&&a.AllTradeTag.map(i=>{i.keywordvalue===t.keywordvalue&&(e+=Number(a.totalgainloss),r+=1)})}),r>0&&this.currentTradeTags.push({x:t.keywordvalue,y:e,count:r})})):(this.dailyTradeJournals=St(this.tradejournals).sortBy(t=>this.tradejournals.indexOf(t[0])).groupBy("LastExitDate").map(t=>({x:t[0].LastExitDate,y:St.sumBy(t,"totalgainloss"),tradedate:l()(t[0].LastExitDate).format("DD MMM YYYY"),lastExitDate:t[0].LastExitDate})).value(),this.currentTradeTags=[],this.allTradeTags.map(t=>{let e=0,r=0;this.tradejournals.length>0&&this.tradejournals.map(a=>{a.AllTradeTag&&a.AllTradeTag.map(i=>{i.keywordvalue===t.keywordvalue&&(e+=Number(a.totalgainloss),r+=1)})}),r>0&&this.currentTradeTags.push({x:t.keywordvalue,y:e,count:r})})),this.dailyTradeJournals.map(t=>{this.algotrades.push(t)}),this.algotrades.map(t=>{this.totalPL+=Number(t.y)}),this.chartOptions.series=[{name:"P&L",data:this.algotrades}],this.chartOptions.title=this.StockSymbol?{text:"Stock Trades : "+this.StockSymbol.stock,align:"left",margin:30,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"18px",fontWeight:"bold",color:"#263238"}}:{text:"Daily Trade Analysis",align:"left",margin:30,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"18px",fontWeight:"bold",color:"#263238"}};var t=[],e=[],r=0,a=0,i=[],n=[],o=[],s=[],c=[9,10,11,12,13,14,15];this.StockSymbol?(this.stockTradeJournals=this.tradejournals.filter(t=>t.StockSymbol===this.StockSymbol.stock),this.stockTradeJournals.forEach(r=>{this.currentTotalTrades+=0==r.tradeHour.length?1:r.tradeHour.length,this.currentProfit+=Number(r.totalgainloss),r.totalgainloss>0?t.push(r.totalgainloss):e.push(r.totalgainloss)})):this.tradejournals.forEach(r=>{this.currentTotalTrades+=0==r.tradeHour.length?1:r.tradeHour.length,this.currentProfit+=Number(r.totalgainloss),r.totalgainloss>0?t.push(r.totalgainloss):e.push(r.totalgainloss),"Future"===r.StockType&&(r.totalgainloss>0?i.push(r.totalgainloss):n.push(r.totalgainloss),this.currentFuturesProfit+=Number(r.totalgainloss)),"Option"===r.StockType&&(r.totalgainloss>0?o.push(r.totalgainloss):s.push(r.totalgainloss),this.currentOptionsProfit+=Number(r.totalgainloss))}),t.length>0&&(r=t.reduce((t,e)=>t+e),this.currentMaxProfit=t.reduce((t,e)=>Math.max(t,e))),e.length>0&&(a=e.reduce((t,e)=>t+e),this.currentMaxLoss=e.reduce((t,e)=>Math.min(t,e))),this.currentAvgProfit=r/t.length,this.currentAvgLoss=a/e.length,this.currentWinRate=Number(t.length/this.currentTotalTrades*100).toFixed(0),this.currentProfitFactor=Math.abs(r/a),this.winRateChartOptions.series=isNaN(this.currentWinRate)?[0]:[this.currentWinRate],this.StockSymbol?(this.stockTradeJournals=this.tradejournals.filter(t=>t.StockSymbol===this.StockSymbol.stock),this.detailedStockType=St(this.stockTradeJournals).groupBy("OptionStrategy").map(t=>({totalgainloss:St.sumBy(t,"totalgainloss"),OptionStrategy:t[0].OptionStrategy})).value()):this.detailedStockType=St(this.tradejournals).groupBy("OptionStrategy").map(t=>({totalgainloss:St.sumBy(t,"totalgainloss"),OptionStrategy:t[0].OptionStrategy})).value();var u=[],h=0,d=0,p=0,f=0,g=0;this.detailedStockType.forEach(t=>{"Futures Intraday"!==t.OptionStrategy&&"Futures"!==t.OptionStrategy||(h=t.totalgainloss/this.currentProfit*100)<0&&(h=-h),"Long Call Intraday"===t.OptionStrategy&&(d=t.totalgainloss/this.currentProfit*100)<0&&(d=-d),"Long Put Intraday"===t.OptionStrategy&&(p=t.totalgainloss/this.currentProfit*100)<0&&(p=-p),"Short Call Intraday"===t.OptionStrategy&&(f=t.totalgainloss/this.currentProfit*100)<0&&(f=-f),"Short Put Intraday"===t.OptionStrategy&&(g=t.totalgainloss/this.currentProfit*100)<0&&(g=-g)}),this.stockTypeChartOptions.labels=[],h>0&&(u.push(h.toFixed(0)),this.stockTypeChartOptions.labels.push("Futures")),d>0&&(u.push(d.toFixed(0)),this.stockTypeChartOptions.labels.push("Long Call")),p>0&&(u.push(p.toFixed(0)),this.stockTypeChartOptions.labels.push("Long Put")),f>0&&(u.push(f.toFixed(0)),this.stockTypeChartOptions.labels.push("Short Call")),g>0&&(u.push(g.toFixed(0)),this.stockTypeChartOptions.labels.push("Short Put")),this.stockTypeChartOptions.series=u,this.StockSymbol?(this.stockTradeJournals=this.tradejournals.filter(t=>t.StockSymbol===this.StockSymbol.stock),this.currentEntryHours=[],c.forEach(t=>{var e=0,r=0,a=0;this.stockTradeJournals.forEach(i=>{i.tradeHour&&i.tradeHour.forEach(n=>{const o=l()(i.LastExitDate).set({h:t,m:0}),s=l()(i.LastExitDate).set({h:t+1,m:1});l()(i.LastExitDate).set({h:n.entryHour,m:n.entryMinute}).isBetween(o,s)&&(e+=1,"Profit"===n.outcome&&(r+=1),"Loss"===n.outcome&&(a+=1))})});var i=0;r>0&&(i=Number(Number(100*Number((r/e).toFixed(2))).toFixed(0))),this.currentEntryHours.push({hour:t,hourTrades:e,hourWins:r,hourLoses:a,winRate:[i]})})):(this.currentEntryHours=[],c.forEach(t=>{var e=0,r=0,a=0;this.tradejournals.forEach(i=>{i.tradeHour&&i.tradeHour.forEach(n=>{const o=l()(i.LastExitDate).set({h:t,m:0}),s=l()(i.LastExitDate).set({h:t+1,m:1});l()(i.LastExitDate).set({h:n.entryHour,m:n.entryMinute}).isBetween(o,s)&&(e+=1,"Profit"===n.outcome&&(r+=1),"Loss"===n.outcome&&(a+=1))})});var i=0;r>0&&(i=Number(Number(100*Number((r/e).toFixed(2))).toFixed(0))),this.currentEntryHours.push({hour:t,hourTrades:e,hourWins:r,hourLoses:a,winRate:[i]})})),this.hourlyDetails=this.currentEntryHours,this.tradeTagsChartOptions.series=[{name:"P&L",data:this.currentTradeTags}],this.isLoading.next(!0)}getDetailedTagTrades(t){this.filteredTradeTags=[],this.StockSymbol?(this.stockTradeJournals=this.tradejournals.filter(t=>t.StockSymbol===this.StockSymbol.stock),this.stockTradeJournals.length>0&&this.stockTradeJournals.map(e=>{e.AllTradeTag&&e.AllTradeTag.map(r=>{r.keywordvalue===t&&this.filteredTradeTags.push({x:l()(e.LastExitDate).format("DD"),y:e.totalgainloss,tradedate:l()(e.LastExitDate).format("ddd, MMM Do YYYY"),stockSymbol:e.StockSymbol,TradeType:e.OptionStrategy,id:e.id})})})):this.tradejournals.length>0&&this.tradejournals.map(e=>{e.AllTradeTag&&e.AllTradeTag.map(r=>{r.keywordvalue===t&&this.filteredTradeTags.push({x:l()(e.LastExitDate).format("DD"),y:e.totalgainloss,tradedate:l()(e.LastExitDate).format("ddd, MMM Do YYYY"),stockSymbol:e.StockSymbol,TradeType:e.OptionStrategy,id:e.id})})}),this.DetailedChartOptions.series=[{name:"P&L",data:this.filteredTradeTags}],this.isLoading.next(!0)}getDetailedAlgoTrades(t){this.detailedalgotrades=[],this.DetailedTotalPL=0,this.detailedalgotrades=St(this.tradejournals).filter(e=>l()(e.LastExitDate).isSameOrAfter(l()(t).startOf("day"))&&l()(e.LastExitDate).isSameOrBefore(l()(t).endOf("day"))).map(t=>({x:l()(t.LastExitDate).format("DD"),y:t.totalgainloss,tradedate:l()(t.LastExitDate).format("DD MMM YYYY"),stockSymbol:t.StockSymbol,TradeType:t.OptionStrategy,tradeHour:t.tradeHour,id:t.id})).value(),this.detailedalgotrades.map(t=>{this.DetailedTotalPL+=Number(t.y)}),this.DetailedChartOptions.series=[{name:"P&L",data:this.detailedalgotrades}],t&&(this.DetailedChartOptions.title={text:"Trades on "+t,align:"left",margin:30,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"18px",fontWeight:"bold",color:"#263238"}}),this.isLoading.next(!0)}openTradeJournal(t){this.router.navigate(["/trade/tradeJournal/edit/"+t])}get isLoading$(){return this.isLoading.asObservable()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(d.Ub(wt.a),d.Ub(J.h),d.Ub(U.a),d.Ub(O.a))},t.\u0275cmp=d.Ob({type:t,selectors:[["app-algo-analytics"]],viewQuery:function(t,e){var r;1&t&&d.Vc(Lt,!0),2&t&&d.Dc(r=d.mc())&&(e.chart=r.first)},features:[d.Gb([{provide:$.b,useClass:B.b},{provide:$.c,useClass:B.c}])],decls:61,vars:22,consts:[[1,"card","card-custom","card-stretch",2,"min-height","550px"],[4,"ngIf"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"card-toolbar"],[1,"card-body"],[1,"form-group","row"],[1,"col-lg-1"],[1,"col-lg-2"],[1,"input-group"],["type","text","name","fromDate","autocomplete","off","placeholder","dd/mm/yyyy","ngbDatepicker","","readonly","true",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["from","ngbDatepicker"],[1,"input-group-append",3,"click"],[1,"input-group-text"],[1,"text-dark-50","flaticon-calendar"],["type","text","name","toDate","autocomplete","off","placeholder","dd/mm/yyyy","ngbDatepicker","","readonly","true",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["to","ngbDatepicker"],[1,"col-lg-3"],["rt",""],["type","text","name","stockSymbol","placeholder","Stock Symbol","autocomplete","off",1,"form-control","form-control-sm",3,"ngModel","ngbTypeahead","inputFormatter","resultTemplate","ngModelChange"],[1,"input-group-append"],[1,"flaticon-layer"],[1,"btn","btn-sm","btn-primary","form-control-sm","mr-5",3,"click"],[1,"flaticon-refresh"],[1,"btn","btn-sm","btn-secondary","form-control-sm",3,"click"],[1,"flaticon2-circular-arrow"],[1,"separator","separator-dashed","my-10"],["class","row",4,"ngIf"],["class","separator separator-dashed my-5",4,"ngIf"],["class","row mt-20",4,"ngIf"],["id","DetailedChart",4,"ngIf"],[1,"progress","progress-modal"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated","bg-primary",2,"width","100%"],[1,"row"],[1,"col-lg-6"],[1,"col-lg-5"],[1,".text-dark",2,"margin-top","10px","text-align","right","margin-right","10px",3,"ngStyle"],["cacheSVG","true","class","svg-icon svg-icon-md ml-2",3,"inlineSVG",4,"ngIf"],["cacheSVG","true",1,"svg-icon","svg-icon-md","ml-2",3,"inlineSVG"],[1,"col-lg-9"],["id","chart",4,"ngIf"],[1,"row","mt-20"],[1,"col-lg-9",2,"text-align","left"],["id","winRateChart"],[3,"series","chart","plotOptions","labels","fill","stroke"],[1,"col-lg-8",2,"text-align","left","margin-top","-10px"],[1,"font-weight-bold"],[1,"font-weight-bolder","text-primary"],[1,"col-lg-8",2,"text-align","left","margin-top","5px"],["id","chart"],[3,"series","chart","dataLabels","plotOptions","yaxis","xaxis","title","tooltip","noData"],["id","stockTypeChart",2,"margin-top","40px"],[3,"series","chart","plotOptions","labels","legend","colors"],[1,"col-lg-8"],[1,"d-flex","align-items-center","mt-5",2,"margin-left","30px"],[1,"symbol","symbol-40","symbol-light-primary","mr-5"],[1,"symbol-label","font-weight-bolder","font-size-lg"],[1,"d-flex","flex-column","font-weight-bold"],[1,"text-dark","text-hover-primary","mb-1","font-size-lg"],[1,"text-muted"],["id","hourlyWinRateChart",2,"margin-top","10px","margin-left","-50px"],[1,"d-flex","align-items-center",2,"margin-left","30px"],[1,"d-flex","align-items-center","mt-5",2,"margin-left","-50px"],[1,"d-flex","align-items-center",2,"margin-left","-50px"],[1,"separator","separator-dashed","my-5"],["class",".text-dark","style","margin-top: 10px; text-align: right; margin-right: 10px",3,"ngStyle",4,"ngIf"],["id","DetailedChart"],[3,"series","chart","dataLabels","plotOptions","yaxis","xaxis","title","tooltip","noData","colors"],[1,"col-lg-12"],["id","tradeTagsChart"],[3,"series","chart","dataLabels","plotOptions","yaxis","xaxis","title","tooltip","noData","colors","fill"]],template:function(t,e){if(1&t){const t=d.bc();d.ac(0,"div",0),d.Oc(1,_t,3,0,"ng-container",1),d.pc(2,"async"),d.ac(3,"div",0),d.ac(4,"div",2),d.ac(5,"div",3),d.ac(6,"h3",4),d.Qc(7,"Analytics Dashboard"),d.Zb(),d.Zb(),d.Vb(8,"div",5),d.Zb(),d.ac(9,"div",6),d.ac(10,"div",7),d.Vb(11,"div",8),d.ac(12,"div",9),d.ac(13,"label"),d.Qc(14,"From"),d.Zb(),d.ac(15,"div",10),d.ac(16,"input",11,12),d.lc("ngModelChange",function(t){return e.fromDate=t}),d.Zb(),d.ac(18,"div",13),d.lc("click",function(){return d.Gc(t),d.Ec(17).toggle()}),d.ac(19,"span",14),d.Vb(20,"i",15),d.Zb(),d.Zb(),d.Zb(),d.Zb(),d.ac(21,"div",9),d.ac(22,"label"),d.Qc(23,"To"),d.Zb(),d.ac(24,"div",10),d.ac(25,"input",16,17),d.lc("ngModelChange",function(t){return e.toDate=t}),d.Zb(),d.ac(27,"div",13),d.lc("click",function(){return d.Gc(t),d.Ec(26).toggle()}),d.ac(28,"span",14),d.Vb(29,"i",15),d.Zb(),d.Zb(),d.Zb(),d.Zb(),d.ac(30,"div",18),d.Oc(31,Pt,1,1,"ng-template",null,19,d.Pc),d.ac(33,"label"),d.Qc(34,"Stock"),d.Zb(),d.ac(35,"div",10),d.ac(36,"input",20),d.lc("ngModelChange",function(t){return e.StockSymbol=t}),d.Zb(),d.ac(37,"div",21),d.ac(38,"span",14),d.Vb(39,"i",22),d.Zb(),d.Zb(),d.Zb(),d.Zb(),d.ac(40,"div",18),d.ac(41,"label"),d.Qc(42,"\xa0"),d.Zb(),d.ac(43,"div",10),d.ac(44,"button",23),d.lc("click",function(){return e.refreshAlgoTrades()}),d.Vb(45,"i",24),d.Qc(46," Get Trades "),d.Zb(),d.ac(47,"button",25),d.lc("click",function(){return e.resetAlgoTrades()}),d.Vb(48,"i",26),d.Qc(49," Reset "),d.Zb(),d.Zb(),d.Zb(),d.Zb(),d.Vb(50,"div",27),d.Oc(51,Yt,9,10,"div",28),d.Oc(52,Wt,55,30,"div",28),d.Oc(53,At,86,62,"div",28),d.pc(54,"async"),d.Oc(55,It,1,0,"div",29),d.Oc(56,Ft,5,1,"div",30),d.pc(57,"async"),d.Oc(58,Nt,2,10,"div",31),d.Oc(59,Qt,4,11,"div",28),d.pc(60,"async"),d.Zb(),d.Zb(),d.Zb()}if(2&t){const t=d.Ec(32);d.Hb(1),d.wc("ngIf",d.qc(2,14,e.tradejournalsService.isLoading$)),d.Hb(15),d.wc("ngModel",e.fromDate),d.Hb(9),d.wc("ngModel",e.toDate),d.Hb(11),d.wc("ngModel",e.StockSymbol)("ngbTypeahead",e.searchStocks)("inputFormatter",e.formatter)("resultTemplate",t),d.Hb(15),d.wc("ngIf",e.algotrades.length>0),d.Hb(1),d.wc("ngIf",e.algotrades.length>0),d.Hb(1),d.wc("ngIf",d.qc(54,16,e.isLoading$)),d.Hb(2),d.wc("ngIf",e.detailedalgotrades.length>0),d.Hb(1),d.wc("ngIf",d.qc(57,18,e.isLoading$)),d.Hb(2),d.wc("ngIf",e.detailedalgotrades.length>0||e.filteredTradeTags.length>0),d.Hb(1),d.wc("ngIf",d.qc(60,20,e.isLoading$))}},directives:[o.o,$.i,G.a,G.j,G.l,$.o,o.p,i.a,T.a],pipes:[o.b,o.d,o.g],styles:["#chart[_ngcontent-%COMP%], #DetailedChart[_ngcontent-%COMP%]{max-width:75%;margin:35px auto}"]}),t})();const zt=["chart"];function Bt(t,e){1&t&&(d.Yb(0),d.ac(1,"div",33),d.Vb(2,"div",34),d.Zb(),d.Xb())}function $t(t,e){1&t&&d.Vb(0,"span",37),2&t&&d.wc("inlineSVG","./assets/media/svg/icons/Code/trending-down.svg")}function Ut(t,e){1&t&&d.Vb(0,"span",37),2&t&&d.wc("inlineSVG","./assets/media/svg/icons/Code/trending-up.svg")}const Jt=function(t){return{color:t}};function Gt(t,e){if(1&t&&(d.ac(0,"h4",35),d.Qc(1),d.pc(2,"currency"),d.Oc(3,$t,1,1,"span",36),d.Oc(4,Ut,1,1,"span",36),d.Zb()),2&t){const t=d.oc();d.wc("ngStyle",d.Ac(8,Jt,t.getProfitColor(t.currentWeekProfit))),d.Hb(1),d.Sc(" ",d.sc(2,4,t.currentWeekProfit,"INR"," \u20b9 ")," "),d.Hb(2),d.wc("ngIf",t.currentWeekProfit<=0),d.Hb(1),d.wc("ngIf",t.currentWeekProfit>0)}}function qt(t,e){1&t&&d.Vb(0,"span",37),2&t&&d.wc("inlineSVG","./assets/media/svg/icons/Code/trending-down.svg")}function Xt(t,e){1&t&&d.Vb(0,"span",37),2&t&&d.wc("inlineSVG","./assets/media/svg/icons/Code/trending-up.svg")}function Kt(t,e){if(1&t&&(d.ac(0,"h4",35),d.Qc(1),d.pc(2,"currency"),d.Oc(3,qt,1,1,"span",36),d.Oc(4,Xt,1,1,"span",36),d.Zb()),2&t){const t=d.oc();d.wc("ngStyle",d.Ac(8,Jt,t.getProfitColor(t.currentMonthProfit))),d.Hb(1),d.Sc(" ",d.sc(2,4,t.currentMonthProfit,"INR"," \u20b9 ")," "),d.Hb(2),d.wc("ngIf",t.currentMonthProfit<=0),d.Hb(1),d.wc("ngIf",t.currentMonthProfit>0)}}function te(t,e){1&t&&d.Vb(0,"span",37),2&t&&d.wc("inlineSVG","./assets/media/svg/icons/Code/trending-down.svg")}function ee(t,e){1&t&&d.Vb(0,"span",37),2&t&&d.wc("inlineSVG","./assets/media/svg/icons/Code/trending-up.svg")}function re(t,e){if(1&t&&(d.ac(0,"h4",35),d.Qc(1),d.pc(2,"currency"),d.Oc(3,te,1,1,"span",36),d.Oc(4,ee,1,1,"span",36),d.Zb()),2&t){const t=d.oc();d.wc("ngStyle",d.Ac(8,Jt,t.getProfitColor(t.currentYearProfit))),d.Hb(1),d.Sc(" ",d.sc(2,4,t.currentYearProfit,"INR"," \u20b9 ")," "),d.Hb(2),d.wc("ngIf",t.currentYearProfit<=0),d.Hb(1),d.wc("ngIf",t.currentYearProfit>0)}}function ae(t,e){if(1&t&&(d.ac(0,"div",9),d.ac(1,"div",10),d.ac(2,"div",38),d.Vb(3,"apx-chart",39),d.Zb(),d.Zb(),d.ac(4,"div",10),d.ac(5,"div",9),d.ac(6,"div",10),d.ac(7,"div",40),d.ac(8,"div",41),d.ac(9,"span",42),d.Qc(10," 9 "),d.Zb(),d.Zb(),d.ac(11,"div",43),d.ac(12,"span",44),d.Qc(13,"9:00 - 10:00"),d.Zb(),d.ac(14,"span",45),d.Qc(15),d.Zb(),d.Zb(),d.ac(16,"div",46),d.Vb(17,"apx-chart",23),d.Zb(),d.Zb(),d.ac(18,"div",47),d.ac(19,"div",41),d.ac(20,"span",42),d.Qc(21," 10 "),d.Zb(),d.Zb(),d.ac(22,"div",43),d.ac(23,"span",44),d.Qc(24,"10:00 - 11:00"),d.Zb(),d.ac(25,"span",45),d.Qc(26),d.Zb(),d.Zb(),d.ac(27,"div",46),d.Vb(28,"apx-chart",23),d.Zb(),d.Zb(),d.ac(29,"div",47),d.ac(30,"div",41),d.ac(31,"span",42),d.Qc(32," 11 "),d.Zb(),d.Zb(),d.ac(33,"div",43),d.ac(34,"span",44),d.Qc(35,"11:00 - 12:00"),d.Zb(),d.ac(36,"span",45),d.Qc(37),d.Zb(),d.Zb(),d.ac(38,"div",46),d.Vb(39,"apx-chart",23),d.Zb(),d.Zb(),d.ac(40,"div",47),d.ac(41,"div",41),d.ac(42,"span",42),d.Qc(43," 12 "),d.Zb(),d.Zb(),d.ac(44,"div",43),d.ac(45,"span",44),d.Qc(46,"12:00 - 01:00"),d.Zb(),d.ac(47,"span",45),d.Qc(48),d.Zb(),d.Zb(),d.ac(49,"div",46),d.Vb(50,"apx-chart",23),d.Zb(),d.Zb(),d.Zb(),d.ac(51,"div",10),d.ac(52,"div",48),d.ac(53,"div",41),d.ac(54,"span",42),d.Qc(55," 13 "),d.Zb(),d.Zb(),d.ac(56,"div",43),d.ac(57,"span",44),d.Qc(58,"01:00 - 02:00"),d.Zb(),d.ac(59,"span",45),d.Qc(60),d.Zb(),d.Zb(),d.ac(61,"div",46),d.Vb(62,"apx-chart",23),d.Zb(),d.Zb(),d.ac(63,"div",49),d.ac(64,"div",41),d.ac(65,"span",42),d.Qc(66," 14 "),d.Zb(),d.Zb(),d.ac(67,"div",43),d.ac(68,"span",44),d.Qc(69,"02:00 - 03:00"),d.Zb(),d.ac(70,"span",45),d.Qc(71),d.Zb(),d.Zb(),d.ac(72,"div",46),d.Vb(73,"apx-chart",23),d.Zb(),d.Zb(),d.ac(74,"div",49),d.ac(75,"div",41),d.ac(76,"span",42),d.Qc(77," 15 "),d.Zb(),d.Zb(),d.ac(78,"div",43),d.ac(79,"span",44),d.Qc(80,"03:00 - 04:00"),d.Zb(),d.ac(81,"span",45),d.Qc(82),d.Zb(),d.Zb(),d.ac(83,"div",46),d.Vb(84,"apx-chart",23),d.Zb(),d.Zb(),d.Zb(),d.Zb(),d.Zb(),d.Zb()),2&t){const t=d.oc();d.Hb(3),d.wc("series",t.DetailedChartOptions.series)("chart",t.DetailedChartOptions.chart)("dataLabels",t.DetailedChartOptions.dataLabels)("plotOptions",t.DetailedChartOptions.plotOptions)("yaxis",t.DetailedChartOptions.yaxis)("xaxis",t.DetailedChartOptions.xaxis)("title",t.DetailedChartOptions.title)("tooltip",t.DetailedChartOptions.tooltip)("noData",t.DetailedChartOptions.nodata)("colors",t.DetailedChartOptions.colors),d.Hb(12),d.Tc("Win: ",t.hourlyDetails[0].hourWins," Loss: ",t.hourlyDetails[0].hourLoses,""),d.Hb(2),d.wc("series",t.hourlyDetails[0].winRate)("chart",t.hourlyWinRateChartOptions.chart)("plotOptions",t.hourlyWinRateChartOptions.plotOptions)("labels",t.hourlyWinRateChartOptions.labels)("fill",t.hourlyWinRateChartOptions.fill)("stroke",t.hourlyWinRateChartOptions.stroke),d.Hb(9),d.Tc("Win: ",t.hourlyDetails[1].hourWins," Loss: ",t.hourlyDetails[1].hourLoses,""),d.Hb(2),d.wc("series",t.hourlyDetails[1].winRate)("chart",t.hourlyWinRateChartOptions.chart)("plotOptions",t.hourlyWinRateChartOptions.plotOptions)("labels",t.hourlyWinRateChartOptions.labels)("fill",t.hourlyWinRateChartOptions.fill)("stroke",t.hourlyWinRateChartOptions.stroke),d.Hb(9),d.Tc("Win: ",t.hourlyDetails[2].hourWins," Loss: ",t.hourlyDetails[2].hourLoses,""),d.Hb(2),d.wc("series",t.hourlyDetails[2].winRate)("chart",t.hourlyWinRateChartOptions.chart)("plotOptions",t.hourlyWinRateChartOptions.plotOptions)("labels",t.hourlyWinRateChartOptions.labels)("fill",t.hourlyWinRateChartOptions.fill)("stroke",t.hourlyWinRateChartOptions.stroke),d.Hb(9),d.Tc("Win: ",t.hourlyDetails[3].hourWins," Loss: ",t.hourlyDetails[3].hourLoses,""),d.Hb(2),d.wc("series",t.hourlyDetails[3].winRate)("chart",t.hourlyWinRateChartOptions.chart)("plotOptions",t.hourlyWinRateChartOptions.plotOptions)("labels",t.hourlyWinRateChartOptions.labels)("fill",t.hourlyWinRateChartOptions.fill)("stroke",t.hourlyWinRateChartOptions.stroke),d.Hb(10),d.Tc("Win: ",t.hourlyDetails[4].hourWins," Loss: ",t.hourlyDetails[4].hourLoses,""),d.Hb(2),d.wc("series",t.hourlyDetails[4].winRate)("chart",t.hourlyWinRateChartOptions.chart)("plotOptions",t.hourlyWinRateChartOptions.plotOptions)("labels",t.hourlyWinRateChartOptions.labels)("fill",t.hourlyWinRateChartOptions.fill)("stroke",t.hourlyWinRateChartOptions.stroke),d.Hb(9),d.Tc("Win: ",t.hourlyDetails[5].hourWins," Loss: ",t.hourlyDetails[5].hourLoses,""),d.Hb(2),d.wc("series",t.hourlyDetails[5].winRate)("chart",t.hourlyWinRateChartOptions.chart)("plotOptions",t.hourlyWinRateChartOptions.plotOptions)("labels",t.hourlyWinRateChartOptions.labels)("fill",t.hourlyWinRateChartOptions.fill)("stroke",t.hourlyWinRateChartOptions.stroke),d.Hb(9),d.Tc("Win: ",t.hourlyDetails[6].hourWins," Loss: ",t.hourlyDetails[6].hourLoses,""),d.Hb(2),d.wc("series",t.hourlyDetails[6].winRate)("chart",t.hourlyWinRateChartOptions.chart)("plotOptions",t.hourlyWinRateChartOptions.plotOptions)("labels",t.hourlyWinRateChartOptions.labels)("fill",t.hourlyWinRateChartOptions.fill)("stroke",t.hourlyWinRateChartOptions.stroke)}}function ie(t,e){if(1&t&&(d.ac(0,"div",9),d.ac(1,"div",14),d.ac(2,"div",50),d.Vb(3,"apx-chart",51),d.Zb(),d.Zb(),d.Zb()),2&t){const t=d.oc();d.Hb(3),d.wc("series",t.tradeTagsChartOptions.series)("chart",t.tradeTagsChartOptions.chart)("dataLabels",t.tradeTagsChartOptions.dataLabels)("plotOptions",t.tradeTagsChartOptions.plotOptions)("yaxis",t.tradeTagsChartOptions.yaxis)("xaxis",t.tradeTagsChartOptions.xaxis)("title",t.tradeTagsChartOptions.title)("tooltip",t.tradeTagsChartOptions.tooltip)("noData",t.tradeTagsChartOptions.nodata)("colors",t.tradeTagsChartOptions.colors)("fill",t.tradeTagsChartOptions.fill)}}const ne=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Ob({type:t,selectors:[["app-analytics"]],decls:1,vars:0,template:function(t,e){1&t&&d.Vb(0,"router-outlet")},directives:[J.m],styles:[""]}),t})(),children:[{path:"performanceAnalytics",component:(()=>{class t{constructor(t,e,r){this.tradejournalsService=t,this.keywordsService=e,this.router=r,this.subscriptions=[],this.isLoading=new p.a(!1),this.tradejournals=[],this.currentWeekPositions=[],this.currentWeekMaxProfit=0,this.currentWeekMaxLoss=0,this.currentWeekAvgProfit=0,this.currentWeekAvgLoss=0,this.currentWeekTotalTrades=0,this.currentWeekProfit=0,this.currentWeekOptionsProfit=0,this.currentWeekOptionsMaxProfit=0,this.currentWeekOptionsMaxLoss=0,this.currentWeekFuturesProfit=0,this.currentWeekFuturesMaxProfit=0,this.currentWeekFuturesMaxLoss=0,this.currentWeekProfitFactor=0,this.currentWeekChartTrades=[],this.currentWeekEntryHours=[],this.currentWeekTradeTags=[],this.currentMonthPositions=[],this.currentMonthMaxProfit=0,this.currentMonthMaxLoss=0,this.currentMonthAvgProfit=0,this.currentMonthAvgLoss=0,this.currentMonthTotalTrades=0,this.currentMonthProfit=0,this.currentMonthOptionsProfit=0,this.currentMonthOptionsMaxProfit=0,this.currentMonthOptionsMaxLoss=0,this.currentMonthFuturesProfit=0,this.currentMonthFuturesMaxProfit=0,this.currentMonthFuturesMaxLoss=0,this.currentMonthProfitFactor=0,this.currentMonthChartTrades=[],this.currentMonthEntryHours=[],this.currentMonthTradeTags=[],this.currentYearPositions=[],this.currentYearMaxProfit=0,this.currentYearMaxLoss=0,this.currentYearAvgProfit=0,this.currentYearAvgLoss=0,this.currentYearTotalTrades=0,this.currentYearProfit=0,this.currentYearOptionsProfit=0,this.currentYearOptionsMaxProfit=0,this.currentYearOptionsMaxLoss=0,this.currentYearFuturesProfit=0,this.currentYearFuturesMaxProfit=0,this.currentYearFuturesMaxLoss=0,this.currentYearProfitFactor=0,this.currentYearChartTrades=[],this.currentYearEntryHours=[],this.currentYearTradeTags=[],this.detailedDayTrades=[],this.hourlyDetails=[],this.allTradeTagTrades=[],this.detailedStockType=[],this.detailedMonthlyStockType=[],this.detailedYearlyStockType=[],this.allTradeTags=[],this.chartDisplay="Weekly",this.chartOptions={series:[{name:"P&L",data:[]}],chart:{type:"bar",height:450,toolbar:{show:!1},zoom:{enabled:!1},events:{dataPointSelection:(t,e,r)=>{this.getDetailedTrades(r.w.config.series[0].data[r.dataPointIndex].lastExitDate)}}},nodata:{text:"No trades found"},tooltip:{custom:({series:t,seriesIndex:e,dataPointIndex:r,w:a})=>'<div class="card card-custom bg-gray-700"  ><div class="card-header border-0" style = "min-height: 40px !important"><div class="card-title"><h3 class="card-label text-white">'+a.config.series[0].data[r].tradedate+'</h3></div></div><div class="separator separator-solid separator-white opacity-20"></div><div class="card-body text-white  mb-0" style=" margin-top: -15px"><p  style="margin-bottom: -15px">P&L : '+t[e][r]+"</p>  </></div></div>"},title:{text:"Trade Analysis",align:"left",margin:30,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"18px",fontWeight:"bold",color:"#263238"}},plotOptions:{bar:{columnWidth:"90%"}},dataLabels:{enabled:!1},yaxis:{labels:{formatter:t=>"\u20b9 "+t,style:{fontSize:"12px"}}},xaxis:{labels:{show:!0}}},this.DetailedChartOptions={series:[{name:"P&L",data:[]}],chart:{type:"bar",height:400,toolbar:{show:!1},zoom:{enabled:!1},events:{dataPointSelection:(t,e,r)=>{this.openTradeJournal(r.w.config.series[0].data[r.dataPointIndex].id)}}},colors:["#2983FF"],title:{text:"Detailed Trades",align:"left",margin:30,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"18px",fontWeight:"bold",color:"#263238"}},nodata:{text:"No trades found"},tooltip:{custom:({series:t,seriesIndex:e,dataPointIndex:r,w:a})=>'<div class="card card-custom bg-gray-700"  ><div class="card-header border-0" style = "min-height: 40px !important"><div class="card-title"><h3 class="card-label text-white">'+a.config.series[0].data[r].tradedate+'</h3></div></div><div class="separator separator-solid separator-white opacity-20"></div><div class="card-body text-white  mb-0" style=" margin-top: -15px"><p>Stock : '+a.config.series[0].data[r].stockSymbol+"</p><p>Trade : "+a.config.series[0].data[r].TradeType+'</p><p style="margin-bottom: -15px">P&L : '+t[e][r]+"</p></div></div>"},plotOptions:{bar:{columnWidth:"90%"}},dataLabels:{enabled:!1},yaxis:{labels:{formatter:t=>"\u20b9 "+t,style:{fontSize:"14px"}}},xaxis:{labels:{show:!1}}},this.winRateChartOptions={series:[],chart:{height:200,type:"radialBar",offsetY:-10},plotOptions:{radialBar:{startAngle:-135,endAngle:135,dataLabels:{name:{fontSize:"14px",color:void 0,offsetY:50},value:{offsetY:-10,fontSize:"16px",color:void 0,formatter:function(t){return t+"%"}}}}},fill:{type:"gradient",gradient:{shade:"dark",shadeIntensity:.15,inverseColors:!1,opacityFrom:1,opacityTo:1,stops:[0,50,65,91]}},stroke:{dashArray:3},labels:["Win Rate"]},this.hourlyWinRateChartOptions={series:[0],chart:{height:100,type:"radialBar",offsetY:-10},plotOptions:{radialBar:{startAngle:-135,endAngle:135,hollow:{size:"40%"},dataLabels:{name:{fontSize:"9px",color:void 0,offsetY:30},value:{offsetY:-10,fontSize:"12px",color:void 0,formatter:function(t){return t+"%"}}}}},fill:{type:"gradient",gradient:{shade:"dark",shadeIntensity:.15,inverseColors:!1,opacityFrom:1,opacityTo:1,stops:[0,50,65,91]}},stroke:{dashArray:2},labels:["Win Rate"]},this.stockTypeChartOptions={series:[],chart:{height:300,type:"radialBar"},plotOptions:{radialBar:{offsetY:0,startAngle:0,endAngle:270,hollow:{margin:5,size:"25%",background:"transparent",image:void 0},dataLabels:{name:{show:!1},value:{show:!1}}}},colors:["#0066c4","#0084ff","#39539E","#0077B5","#0088cf"],labels:[],legend:{show:!0,floating:!0,fontSize:"12px",position:"left",offsetX:5,offsetY:-10,labels:{useSeriesColors:!0},formatter:function(t,e){return t+" : "+e.w.globals.series[e.seriesIndex]+"%"},itemMargin:{horizontal:3}}},this.tradeTagsChartOptions={series:[{name:"P&L",data:[]}],chart:{type:"bar",height:450,toolbar:{show:!1},zoom:{enabled:!1},events:{dataPointSelection:(t,e,r)=>{this.getDetailedTagTrades(r.w.config.series[0].data[r.dataPointIndex].x)}}},fill:{colors:[(t,e,r)=>t.value<0?"#fa4b42":"#6b8abc"],opacity:.9,type:"solid"},nodata:{text:"No trades found"},tooltip:{custom:({series:t,seriesIndex:e,dataPointIndex:r,w:a})=>'<div class="card card-custom bg-gray-700"  ><div class="card-header border-0" style = "min-height: 40px !important"><div class="card-title"><h3 class="card-label text-white">'+a.globals.labels[r]+'</h3></div></div><div class="separator separator-solid separator-white opacity-20"></div><div class="card-body text-white  mb-0" style=" margin-top: -15px"><p  style="margin-bottom: -15px">P&L : '+t[e][r]+'</p>  <p  style="margin-bottom: -15px;margin-top: 20px">Count : '+a.config.series[0].data[r].count+"</p>  </></div></div>"},title:{text:"Trade Tags Analysis",align:"left",margin:30,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"18px",fontWeight:"bold",color:"#263238"}},plotOptions:{bar:{horizontal:!0,barHeight:"80%"}},dataLabels:{enabled:!0,formatter:t=>"\u20b9 "+t,style:{fontSize:"12px",colors:["#fff"],fontFamily:void 0}},yaxis:{labels:{align:"right",minWidth:0,maxWidth:250,style:{fontSize:"12px"}}},xaxis:{labels:{formatter:t=>"\u20b9 "+t}}}}ngOnInit(){this.tradejournalsService.getTradeJournals({RequestType:"ClosedPositions",Status:"Closed",fromDate:l()([l()().year()]).format("M/DD/YYYY"),toDate:l()().add(1,"days").format()}),this.keywordsService.fetch();const t=this.tradejournalsService.tradejournals$.pipe(Object(u.a)(t=>{this.tradejournals=t,this.filterJournals()}),Object(h.a)(t=>t)).subscribe();this.subscriptions.push(t);const e=this.keywordsService.keywords$.pipe(Object(u.a)(t=>{this.allTradeTags=t.filter(t=>"Trade Tag"===t.keywordtype)}),Object(h.a)(t=>t)).subscribe();this.subscriptions.push(e)}filterJournals(){var t=[9,10,11,12,13,14,15];this.currentWeekPositions=[],this.currentWeekMaxProfit=0,this.currentWeekMaxLoss=0,this.currentWeekAvgProfit=0,this.currentWeekAvgLoss=0,this.currentWeekTotalTrades=0,this.currentWeekProfit=0,this.currentWeekOptionsMaxProfit=0,this.currentWeekOptionsMaxLoss=0,this.currentWeekFuturesProfit=0,this.currentWeekFuturesMaxProfit=0,this.currentWeekFuturesMaxLoss=0,this.currentWeekWinRate=0,this.currentWeekProfitFactor=0,this.currentWeekChartTrades=[];var e=[],r=[],a=[],i=[],n=[],o=[],s=0,c=0;this.currentMonthPositions=[],this.currentMonthMaxProfit=0,this.currentMonthMaxLoss=0,this.currentMonthAvgProfit=0,this.currentMonthAvgLoss=0,this.currentMonthTotalTrades=0,this.currentMonthProfit=0,this.currentMonthOptionsMaxProfit=0,this.currentMonthOptionsMaxLoss=0,this.currentMonthFuturesProfit=0,this.currentMonthFuturesMaxProfit=0,this.currentMonthFuturesMaxLoss=0,this.currentMonthWinRate=0,this.currentMonthProfitFactor=0;var u=[],h=[],d=[],p=[],f=[],g=[],b=0,y=0;this.currentYearPositions=[],this.currentYearMaxProfit=0,this.currentYearMaxLoss=0,this.currentYearAvgProfit=0,this.currentYearAvgLoss=0,this.currentYearTotalTrades=0,this.currentYearProfit=0,this.currentYearOptionsMaxProfit=0,this.currentYearOptionsMaxLoss=0,this.currentYearFuturesProfit=0,this.currentYearFuturesMaxProfit=0,this.currentYearFuturesMaxLoss=0,this.currentYearWinRate=0,this.currentYearProfitFactor=0;var v=[],m=[],x=[],O=[],T=[],D=[],S=0,k=0;this.currentWeekPositions=this.tradejournals.filter(t=>(t.weekDay=l()(t.LastExitDate).format("ddd"),l()(t.LastExitDate).isSameOrAfter(l()().startOf("week"))&&l()(t.LastExitDate).isSameOrBefore(l()().endOf("week")))),this.currentWeekChartTrades=St(this.currentWeekPositions).sortBy(t=>this.currentWeekPositions.indexOf(t[0])).groupBy("weekDay").map(t=>({x:t[0].weekDay,y:St.sumBy(t,"totalgainloss"),tradedate:l()(t[0].LastExitDate).format("ddd, MMM Do YYYY"),lastExitDate:t[0].LastExitDate})).value(),this.detailedDayTrades=St(this.currentWeekPositions).sortBy(t=>this.currentWeekPositions.indexOf(t[0])).map(t=>({x:l()(t.LastExitDate).format("DD"),y:t.totalgainloss,tradedate:l()(t.LastExitDate).format("ddd, MMM Do YYYY"),stockSymbol:t.StockSymbol,TradeType:t.OptionStrategy,id:t.id})).value(),this.detailedStockType=St(this.currentWeekPositions).groupBy("OptionStrategy").map(t=>({totalgainloss:St.sumBy(t,"totalgainloss"),OptionStrategy:t[0].OptionStrategy})).value(),this.isLoading.next(!0),this.currentWeekPositions.forEach(t=>{this.currentWeekTotalTrades+=0==t.tradeHour.length?1:t.tradeHour.length,this.currentWeekProfit+=Number(t.totalgainloss),t.totalgainloss>0?e.push(t.totalgainloss):r.push(t.totalgainloss),"Future"===t.StockType&&(t.totalgainloss>0?a.push(t.totalgainloss):i.push(t.totalgainloss),this.currentWeekFuturesProfit+=Number(t.totalgainloss)),"Option"===t.StockType&&(t.totalgainloss>0?n.push(t.totalgainloss):o.push(t.totalgainloss),this.currentWeekOptionsProfit+=Number(t.totalgainloss))}),e.length>0&&(s=e.reduce((t,e)=>t+e),this.currentWeekMaxProfit=e.reduce((t,e)=>Math.max(t,e))),r.length>0&&(c=r.reduce((t,e)=>t+e),this.currentWeekMaxLoss=r.reduce((t,e)=>Math.min(t,e))),this.currentWeekAvgProfit=s/e.length,this.currentWeekAvgLoss=c/r.length,n.length>0&&(this.currentWeekOptionsMaxProfit=n.reduce((t,e)=>Math.max(t,e))),o.length>0&&(this.currentWeekOptionsMaxLoss=o.reduce((t,e)=>Math.min(t,e))),a.length>0&&(this.currentWeekFuturesMaxProfit=a.reduce((t,e)=>Math.max(t,e))),i.length>0&&(this.currentWeekFuturesMaxLoss=i.reduce((t,e)=>Math.min(t,e))),this.currentWeekWinRate=Number(e.length/this.currentWeekTotalTrades*100).toFixed(0),this.currentWeekProfitFactor=Math.abs(s/c),this.currentWeekEntryHours=[],t.forEach(t=>{var e=0,r=0,a=0;this.currentWeekPositions.forEach(i=>{i.tradeHour&&i.tradeHour.forEach(n=>{const o=l()(i.LastExitDate).set({h:t,m:0}),s=l()(i.LastExitDate).set({h:t+1,m:1});l()(i.LastExitDate).set({h:n.entryHour,m:n.entryMinute}).isBetween(o,s)&&(e+=1,"Profit"===n.outcome&&(r+=1),"Loss"===n.outcome&&(a+=1))})});var i=0;r>0&&(i=Number(Number(100*Number((r/e).toFixed(2))).toFixed(0))),this.currentWeekEntryHours.push({hour:t,hourTrades:e,hourWins:r,hourLoses:a,winRate:[i]})}),this.currentWeekTradeTags=[],this.allTradeTags.map(t=>{let e=0,r=0;this.currentWeekPositions.length>0&&this.currentWeekPositions.map(a=>{a.AllTradeTag&&a.AllTradeTag.map(i=>{i.keywordvalue===t.keywordvalue&&(e+=Number(a.totalgainloss),r+=1)})}),r>0&&this.currentWeekTradeTags.push({x:t.keywordvalue,y:e,count:r})}),this.currentMonthPositions=this.tradejournals.filter(t=>(t.dateOnly=l()(t.LastExitDate).format("DD"),l()(t.LastExitDate).isSameOrAfter(l()().startOf("month"))&&l()(t.LastExitDate).isSameOrBefore(l()().endOf("month")))),this.currentMonthChartTrades=St(this.currentMonthPositions).groupBy("dateOnly").sortBy(t=>this.currentMonthPositions.indexOf(t[0])).map(t=>({x:t[0].dateOnly,y:St.sumBy(t,"totalgainloss"),tradedate:l()(t[0].LastExitDate).format("MMM Do YYYY"),lastExitDate:t[0].LastExitDate})).value(),this.detailedMonthlyStockType=St(this.currentMonthPositions).groupBy("OptionStrategy").map(t=>({totalgainloss:St.sumBy(t,"totalgainloss"),OptionStrategy:t[0].OptionStrategy})).value(),this.currentMonthPositions.forEach(t=>{this.currentMonthTotalTrades+=t.tradeHour?0==t.tradeHour.length?1:t.tradeHour.length:1,this.currentMonthProfit+=Number(t.totalgainloss),t.totalgainloss>0?u.push(t.totalgainloss):h.push(t.totalgainloss),"Future"===t.StockType&&(t.totalgainloss>0?d.push(t.totalgainloss):p.push(t.totalgainloss),this.currentMonthFuturesProfit+=Number(t.totalgainloss)),"Option"===t.StockType&&(t.totalgainloss>0?f.push(t.totalgainloss):g.push(t.totalgainloss),this.currentMonthOptionsProfit+=Number(t.totalgainloss))}),u.length>0&&(b=u.reduce((t,e)=>t+e),this.currentMonthMaxProfit=u.reduce((t,e)=>Math.max(t,e))),h.length>0&&(y=h.reduce((t,e)=>t+e),this.currentMonthMaxLoss=h.reduce((t,e)=>Math.min(t,e))),this.currentMonthAvgProfit=b/u.length,this.currentMonthAvgLoss=y/h.length,f.length>0&&(this.currentMonthOptionsMaxProfit=f.reduce((t,e)=>Math.max(t,e))),g.length>0&&(this.currentMonthOptionsMaxLoss=g.reduce((t,e)=>Math.min(t,e))),d.length>0&&(this.currentMonthFuturesMaxProfit=d.reduce((t,e)=>Math.max(t,e))),p.length>0&&(this.currentMonthFuturesMaxLoss=p.reduce((t,e)=>Math.min(t,e))),this.currentMonthWinRate=Number(u.length/this.currentMonthTotalTrades*100).toFixed(0),this.currentMonthProfitFactor=Math.abs(b/y),this.currentMonthEntryHours=[],t.forEach(t=>{var e=0,r=0,a=0;this.currentMonthPositions.forEach(i=>{i.tradeHour&&i.tradeHour.forEach(n=>{const o=l()(i.LastExitDate).set({h:t,m:0}),s=l()(i.LastExitDate).set({h:t+1,m:0});l()(i.LastExitDate).set({h:n.entryHour,m:n.entryMinute}).isBetween(o,s)&&(e+=1,"Profit"===n.outcome&&(r+=1),"Loss"===n.outcome&&(a+=1))})});var i=0;r>0&&(i=Number(Number(100*Number((r/e).toFixed(2))).toFixed(0))),this.currentMonthEntryHours.push({hour:t,hourTrades:e,hourWins:r,hourLoses:a,winRate:[i]})}),this.currentMonthTradeTags=[],this.allTradeTags.map(t=>{let e=0,r=0;this.currentMonthPositions.length>0&&this.currentMonthPositions.map(a=>{a.AllTradeTag&&a.AllTradeTag.map(i=>{i.keywordvalue===t.keywordvalue&&(e+=Number(a.totalgainloss),r+=1)})}),r>0&&this.currentMonthTradeTags.push({x:t.keywordvalue,y:e,count:r})}),this.currentYearPositions=this.tradejournals.filter(t=>(t.yearOnly=l()(t.LastExitDate).format("MMM"),l()(t.LastExitDate).isSameOrAfter(l()().startOf("year"))&&l()(t.LastExitDate).isSameOrBefore(l()().endOf("year")))),this.currentYearChartTrades=St(this.currentYearPositions).groupBy("yearOnly").sortBy(t=>this.currentYearPositions.indexOf(t[0])).map(t=>({x:t[0].yearOnly,y:St.sumBy(t,"totalgainloss"),tradedate:l()(t[0].LastExitDate).format("MMM YYYY"),lastExitDate:t[0].LastExitDate})).value(),this.detailedYearlyStockType=St(this.currentYearPositions).groupBy("OptionStrategy").map(t=>({totalgainloss:St.sumBy(t,"totalgainloss"),OptionStrategy:t[0].OptionStrategy})).value(),this.currentYearPositions.forEach(t=>{this.currentYearTotalTrades+=t.tradeHour?0==t.tradeHour.length?1:t.tradeHour.length:1,this.currentYearProfit+=Number(t.totalgainloss),t.totalgainloss>0?v.push(t.totalgainloss):m.push(t.totalgainloss),"Future"===t.StockType&&(t.totalgainloss>0?x.push(t.totalgainloss):O.push(t.totalgainloss),this.currentYearFuturesProfit+=Number(t.totalgainloss)),"Option"===t.StockType&&(t.totalgainloss>0?T.push(t.totalgainloss):D.push(t.totalgainloss),this.currentYearOptionsProfit+=Number(t.totalgainloss))}),v.length>0&&(S=v.reduce((t,e)=>t+e),this.currentYearMaxProfit=v.reduce((t,e)=>Math.max(t,e))),m.length>0&&(k=m.reduce((t,e)=>t+e),this.currentYearMaxLoss=m.reduce((t,e)=>Math.min(t,e))),this.currentYearAvgProfit=S/v.length,this.currentYearAvgLoss=k/m.length,T.length>0&&(this.currentYearOptionsMaxProfit=T.reduce((t,e)=>Math.max(t,e))),D.length>0&&(this.currentYearOptionsMaxLoss=D.reduce((t,e)=>Math.min(t,e))),x.length>0&&(this.currentYearFuturesMaxProfit=x.reduce((t,e)=>Math.max(t,e))),O.length>0&&(this.currentYearFuturesMaxLoss=O.reduce((t,e)=>Math.min(t,e))),this.currentYearWinRate=Number(v.length/this.currentYearTotalTrades*100).toFixed(0),this.currentYearProfitFactor=Math.abs(S/k),this.currentYearEntryHours=[],t.forEach(t=>{var e=0,r=0,a=0;this.currentYearPositions.forEach(i=>{i.tradeHour&&i.tradeHour.forEach(n=>{const o=l()(i.LastExitDate).set({h:t,m:0}),s=l()(i.LastExitDate).set({h:t+1,m:0});l()(i.LastExitDate).set({h:n.entryHour,m:n.entryMinute}).isBetween(o,s)&&(e+=1,"Profit"===n.outcome&&(r+=1),"Loss"===n.outcome&&(a+=1))})});var i=0;r>0&&(i=Number(Number(100*Number((r/e).toFixed(2))).toFixed(0))),this.currentYearEntryHours.push({hour:t,hourTrades:e,hourWins:r,hourLoses:a,winRate:[i]})}),this.currentYearTradeTags=[],this.allTradeTags.map(t=>{let e=0,r=0;this.currentYearPositions.length>0&&this.currentYearPositions.map(a=>{a.AllTradeTag&&a.AllTradeTag.map(i=>{i.keywordvalue===t.keywordvalue&&(e+=Number(a.totalgainloss),r+=1)})}),r>0&&this.currentYearTradeTags.push({x:t.keywordvalue,y:e,count:r})}),this.updateSeries()}getProfitColor(t){return Number(t)>0?"green":"red"}getDetailedTrades(t){var e=[9,10,11,12,13,14,15];this.currentWeekEntryHours=[],this.currentMonthEntryHours=[],this.currentYearEntryHours=[],this.detailedDayTrades=[],"Weekly"===this.chartDisplay&&(this.detailedDayTrades=St(this.tradejournals).filter(e=>l()(e.LastExitDate).isSameOrAfter(l()(t).startOf("day"))&&l()(e.LastExitDate).isSameOrBefore(l()(t).endOf("day"))).map(t=>({x:l()(t.LastExitDate).format("DD"),y:t.totalgainloss,tradedate:l()(t.LastExitDate).format("ddd, MMM Do YYYY"),stockSymbol:t.StockSymbol,TradeType:t.OptionStrategy,tradeHour:t.tradeHour,id:t.id})).value(),this.detailedDayTrades.length>0&&(this.DetailedChartOptions.series=[{name:"P&L",data:this.detailedDayTrades}]),e.forEach(t=>{var e=0,r=0,a=0;this.detailedDayTrades.forEach(i=>{i.tradeHour&&i.tradeHour.forEach(n=>{const o=l()(i.LastExitDate).set({h:t,m:0}),s=l()(i.LastExitDate).set({h:t+1,m:0});l()(i.LastExitDate).set({h:n.entryHour,m:n.entryMinute}).isBetween(o,s)&&(e+=1,"Profit"===n.outcome&&(r+=1),"Loss"===n.outcome&&(a+=1))})});var i=0;r>0&&(i=Number(Number(100*Number((r/e).toFixed(2))).toFixed(0))),this.currentWeekEntryHours.push({hour:t,hourTrades:e,hourWins:r,hourLoses:a,winRate:[i]})}),this.hourlyDetails=this.currentWeekEntryHours),"Monthly"===this.chartDisplay&&(this.detailedDayTrades=St(this.tradejournals).filter(e=>l()(e.LastExitDate).isSameOrAfter(l()(t).startOf("day"))&&l()(e.LastExitDate).isSameOrBefore(l()(t).endOf("day"))).map(t=>({x:l()(t.LastExitDate).format("DD"),y:t.totalgainloss,tradedate:l()(t.LastExitDate).format("ddd, MMM Do YYYY"),stockSymbol:t.StockSymbol,TradeType:t.OptionStrategy,tradeHour:t.tradeHour,id:t.id})).value(),this.detailedDayTrades.length>0&&(this.DetailedChartOptions.series=[{name:"P&L",data:this.detailedDayTrades}]),e.forEach(t=>{var e=0,r=0,a=0;this.detailedDayTrades.forEach(i=>{i.tradeHour&&i.tradeHour.forEach(n=>{const o=l()(i.LastExitDate).set({h:t,m:0}),s=l()(i.LastExitDate).set({h:t+1,m:0});l()(i.LastExitDate).set({h:n.entryHour,m:n.entryMinute}).isBetween(o,s)&&(e+=1,"Profit"===n.outcome&&(r+=1),"Loss"===n.outcome&&(a+=1))})});var i=0;r>0&&(i=Number(Number(100*Number((r/e).toFixed(2))).toFixed(0))),this.currentMonthEntryHours.push({hour:t,hourTrades:e,hourWins:r,hourLoses:a,winRate:[i]})}),this.hourlyDetails=this.currentMonthEntryHours),"Yearly"===this.chartDisplay&&(this.detailedDayTrades=St(this.tradejournals).filter(e=>l()(e.LastExitDate).isSameOrAfter(l()(t).startOf("month"))&&l()(e.LastExitDate).isSameOrBefore(l()(t).endOf("month"))).sortBy(t=>this.currentYearPositions.indexOf(t[0])).map(t=>({x:l()(t.LastExitDate).format("DD"),y:t.totalgainloss,tradedate:l()(t.LastExitDate).format("ddd, MMM Do YYYY"),stockSymbol:t.StockSymbol,TradeType:t.OptionStrategy,tradeHour:t.tradeHour,id:t.id})).value(),this.detailedDayTrades.length>0&&(this.DetailedChartOptions.series=[{name:"P&L",data:this.detailedDayTrades}]),e.forEach(t=>{var e=0,r=0,a=0;this.detailedDayTrades.forEach(i=>{i.tradeHour&&i.tradeHour.forEach(n=>{const o=l()(i.LastExitDate).set({h:t,m:0}),s=l()(i.LastExitDate).set({h:t+1,m:0});l()(i.LastExitDate).set({h:n.entryHour,m:n.entryMinute}).isBetween(o,s)&&(e+=1,"Profit"===n.outcome&&(r+=1),"Loss"===n.outcome&&(a+=1))})});var i=0;r>0&&(i=Number(Number(100*Number((r/e).toFixed(2))).toFixed(0))),this.currentYearEntryHours.push({hour:t,hourTrades:e,hourWins:r,hourLoses:a,winRate:[i]})}),this.hourlyDetails=this.currentYearEntryHours),this.isLoading.next(!0)}getDetailedTagTrades(t){var e=[];"Weekly"===this.chartDisplay&&(this.currentWeekPositions.length>0&&this.currentWeekPositions.map(r=>{r.AllTradeTag&&r.AllTradeTag.map(a=>{a.keywordvalue===t&&e.push({x:l()(r.LastExitDate).format("DD"),y:r.totalgainloss,tradedate:l()(r.LastExitDate).format("ddd, MMM Do YYYY"),stockSymbol:r.StockSymbol,TradeType:r.OptionStrategy,id:r.id})})}),this.DetailedChartOptions.series=[{name:"P&L",data:e}]),"Monthly"===this.chartDisplay&&(this.currentMonthPositions.length>0&&this.currentMonthPositions.map(r=>{r.AllTradeTag&&r.AllTradeTag.map(a=>{a.keywordvalue===t&&e.push({x:l()(r.LastExitDate).format("DD"),y:r.totalgainloss,tradedate:l()(r.LastExitDate).format("ddd, MMM Do YYYY"),stockSymbol:r.StockSymbol,TradeType:r.OptionStrategy,id:r.id})})}),this.DetailedChartOptions.series=[{name:"P&L",data:e}]),"Yearly"===this.chartDisplay&&(this.currentYearPositions.length>0&&this.currentYearPositions.map(r=>{r.AllTradeTag&&r.AllTradeTag.map(a=>{a.keywordvalue===t&&e.push({x:l()(r.LastExitDate).format("DD"),y:r.totalgainloss,tradedate:l()(r.LastExitDate).format("ddd, MMM Do YYYY"),stockSymbol:r.StockSymbol,TradeType:r.OptionStrategy,id:r.id})})}),this.DetailedChartOptions.series=[{name:"P&L",data:e}]),this.isLoading.next(!0)}updateSeries(){if(this.winRateChartOptions.series=[],this.hourlyDetails=[],"Weekly"===this.chartDisplay&&(this.detailedDayTrades=St(this.tradejournals).filter(t=>l()(t.LastExitDate).isSameOrAfter(l()().startOf("week"))&&l()(t.LastExitDate).isSameOrBefore(l()().endOf("week"))).map(t=>({x:l()(t.LastExitDate).format("DD"),y:t.totalgainloss,tradedate:l()(t.LastExitDate).format("ddd, MMM Do YYYY"),stockSymbol:t.StockSymbol,TradeType:t.OptionStrategy,id:t.id})).value(),this.currentWeekChartTrades.length>0)){this.chartOptions.series=[{name:"P&L",data:this.currentWeekChartTrades}],this.DetailedChartOptions.series=[{name:"P&L",data:this.detailedDayTrades}],this.winRateChartOptions.series=isNaN(this.currentWeekWinRate)?[0]:[this.currentWeekWinRate],this.detailedDayTrades.length>0&&(this.DetailedChartOptions.series=[{name:"P&L",data:this.detailedDayTrades}]);var t=[],e=0,r=0,a=0,i=0,n=0;this.detailedStockType.forEach(t=>{"Futures Intraday"!==t.OptionStrategy&&"Futures"!==t.OptionStrategy||(e=t.totalgainloss/this.currentWeekProfit*100)<0&&(e=-e),"Long Call Intraday"===t.OptionStrategy&&(r=t.totalgainloss/this.currentWeekProfit*100)<0&&(r=-r),"Long Put Intraday"===t.OptionStrategy&&(a=t.totalgainloss/this.currentWeekProfit*100)<0&&(a=-a),"Short Call Intraday"===t.OptionStrategy&&(i=t.totalgainloss/this.currentWeekProfit*100)<0&&(i=-i),"Short Put Intraday"===t.OptionStrategy&&(n=t.totalgainloss/this.currentWeekProfit*100)<0&&(n=-n)}),this.stockTypeChartOptions.labels=[],e>0&&(t.push(e.toFixed(0)),this.stockTypeChartOptions.labels.push("Futures")),r>0&&(t.push(r.toFixed(0)),this.stockTypeChartOptions.labels.push("Long Call")),a>0&&(t.push(a.toFixed(0)),this.stockTypeChartOptions.labels.push("Long Put")),i>0&&(t.push(i.toFixed(0)),this.stockTypeChartOptions.labels.push("Short Call")),n>0&&(t.push(n.toFixed(0)),this.stockTypeChartOptions.labels.push("Short Put")),this.stockTypeChartOptions.series=t,this.hourlyDetails=this.currentWeekEntryHours,this.tradeTagsChartOptions.series=[{name:"P&L",data:this.currentWeekTradeTags}],this.isLoading.next(!0)}"Monthly"===this.chartDisplay&&(this.detailedDayTrades=St(this.tradejournals).filter(t=>l()(t.LastExitDate).isSameOrAfter(l()().startOf("month"))&&l()(t.LastExitDate).isSameOrBefore(l()().endOf("month"))).map(t=>({x:l()(t.LastExitDate).format("DD"),y:t.totalgainloss,tradedate:l()(t.LastExitDate).format("ddd, MMM Do YYYY"),stockSymbol:t.StockSymbol,TradeType:t.OptionStrategy,id:t.id})).value(),this.currentMonthChartTrades.length>0)&&(this.chartOptions.series=[{name:"P&L",data:this.currentMonthChartTrades}],this.winRateChartOptions.series=isNaN(this.currentMonthWinRate)?[0]:[this.currentMonthWinRate],this.detailedDayTrades.length>0&&(this.DetailedChartOptions.series=[{name:"P&L",data:this.detailedDayTrades}]),t=[],e=0,r=0,a=0,i=0,n=0,this.detailedMonthlyStockType.forEach(t=>{"Futures Intraday"!==t.OptionStrategy&&"Futures"!==t.OptionStrategy||(e=t.totalgainloss/this.currentMonthProfit*100)<0&&(e=-e),"Long Call Intraday"===t.OptionStrategy&&(r=t.totalgainloss/this.currentMonthProfit*100)<0&&(r=-r),"Long Put Intraday"===t.OptionStrategy&&(a=t.totalgainloss/this.currentMonthProfit*100)<0&&(a=-a),"Short Call Intraday"===t.OptionStrategy&&(i=t.totalgainloss/this.currentMonthProfit*100)<0&&(i=-i),"Short Put Intraday"===t.OptionStrategy&&(n=t.totalgainloss/this.currentMonthProfit*100)<0&&(n=-n)}),this.stockTypeChartOptions.labels=[],e>0&&(t.push(e.toFixed(0)),this.stockTypeChartOptions.labels.push("Futures")),r>0&&(t.push(r.toFixed(0)),this.stockTypeChartOptions.labels.push("Long Call")),a>0&&(t.push(a.toFixed(0)),this.stockTypeChartOptions.labels.push("Long Put")),i>0&&(t.push(i.toFixed(0)),this.stockTypeChartOptions.labels.push("Short Call")),n>0&&(t.push(n.toFixed(0)),this.stockTypeChartOptions.labels.push("Short Put")),this.stockTypeChartOptions.series=t,this.hourlyDetails=this.currentMonthEntryHours,this.tradeTagsChartOptions.series=[{name:"P&L",data:this.currentMonthTradeTags}],this.isLoading.next(!0)),"Yearly"===this.chartDisplay&&(this.detailedDayTrades=St(this.tradejournals).filter(t=>l()(t.LastExitDate).isSameOrAfter(l()().startOf("year"))&&l()(t.LastExitDate).isSameOrBefore(l()().endOf("year"))).map(t=>({x:l()(t.LastExitDate).format("DD"),y:t.totalgainloss,tradedate:l()(t.LastExitDate).format("ddd, MMM Do YYYY"),stockSymbol:t.StockSymbol,TradeType:t.OptionStrategy,id:t.id})).value(),this.chartOptions.series=[{name:"P&L",data:this.currentYearChartTrades}],this.winRateChartOptions.series=isNaN(this.currentYearWinRate)?[0]:[this.currentYearWinRate],this.detailedDayTrades.length>0&&(this.DetailedChartOptions.series=[{name:"P&L",data:this.detailedDayTrades}]),t=[],e=0,r=0,a=0,i=0,n=0,this.detailedYearlyStockType.forEach(t=>{"Futures Intraday"!==t.OptionStrategy&&"Futures"!==t.OptionStrategy||(e=t.totalgainloss/this.currentYearProfit*100)<0&&(e=-e),"Long Call Intraday"===t.OptionStrategy&&(r=t.totalgainloss/this.currentYearProfit*100)<0&&(r=-r),"Long Put Intraday"===t.OptionStrategy&&(a=t.totalgainloss/this.currentYearProfit*100)<0&&(a=-a),"Short Call Intraday"===t.OptionStrategy&&(i=t.totalgainloss/this.currentYearProfit*100)<0&&(i=-i),"Short Put Intraday"===t.OptionStrategy&&(n=t.totalgainloss/this.currentYearProfit*100)<0&&(n=-n)}),this.stockTypeChartOptions.labels=[],e>0&&(t.push(e.toFixed(0)),this.stockTypeChartOptions.labels.push("Futures")),r>0&&(t.push(r.toFixed(0)),this.stockTypeChartOptions.labels.push("Long Call")),a>0&&(t.push(a.toFixed(0)),this.stockTypeChartOptions.labels.push("Long Put")),i>0&&(t.push(i.toFixed(0)),this.stockTypeChartOptions.labels.push("Short Call")),n>0&&(t.push(n.toFixed(0)),this.stockTypeChartOptions.labels.push("Short Put")),this.stockTypeChartOptions.series=t,this.hourlyDetails=this.currentYearEntryHours,this.tradeTagsChartOptions.series=[{name:"P&L",data:this.currentYearTradeTags}],this.isLoading.next(!0)),this.tradejournals.length>0&&("Weekly"===this.chartDisplay?this.currentWeekChartTrades.length<=0&&(this.detailedDayTrades=St(this.tradejournals).filter(t=>l()(t.LastExitDate).isSameOrAfter(l()().startOf("month"))&&l()(t.LastExitDate).isSameOrBefore(l()().endOf("month"))).map(t=>({x:l()(t.LastExitDate).format("DD"),y:t.totalgainloss,tradedate:l()(t.LastExitDate).format("ddd, MMM Do YYYY"),stockSymbol:t.StockSymbol,TradeType:t.OptionStrategy,id:t.id})).value(),this.chartOptions.series=[{name:"P&L",data:this.currentMonthChartTrades}],this.winRateChartOptions.series=isNaN(this.currentMonthWinRate)?[0]:[this.currentMonthWinRate],this.detailedDayTrades.length>0&&(this.DetailedChartOptions.series=[{name:"P&L",data:this.detailedDayTrades}]),t=[],e=0,r=0,a=0,i=0,n=0,this.detailedMonthlyStockType.forEach(t=>{"Futures Intraday"!==t.OptionStrategy&&"Futures"!==t.OptionStrategy||(e=t.totalgainloss/this.currentMonthProfit*100)<0&&(e=-e),"Long Call Intraday"===t.OptionStrategy&&(r=t.totalgainloss/this.currentMonthProfit*100)<0&&(r=-r),"Long Put Intraday"===t.OptionStrategy&&(a=t.totalgainloss/this.currentMonthProfit*100)<0&&(a=-a),"Short Call Intraday"===t.OptionStrategy&&(i=t.totalgainloss/this.currentMonthProfit*100)<0&&(i=-i),"Short Put Intraday"===t.OptionStrategy&&(n=t.totalgainloss/this.currentMonthProfit*100)<0&&(n=-n)}),this.stockTypeChartOptions.labels=[],e>0&&(t.push(e.toFixed(0)),this.stockTypeChartOptions.labels.push("Futures")),r>0&&(t.push(r.toFixed(0)),this.stockTypeChartOptions.labels.push("Long Call")),a>0&&(t.push(a.toFixed(0)),this.stockTypeChartOptions.labels.push("Long Put")),i>0&&(t.push(i.toFixed(0)),this.stockTypeChartOptions.labels.push("Short Call")),n>0&&(t.push(n.toFixed(0)),this.stockTypeChartOptions.labels.push("Short Put")),this.stockTypeChartOptions.series=t,this.hourlyDetails=this.currentMonthEntryHours,this.tradeTagsChartOptions.series=[{name:"P&L",data:this.currentMonthTradeTags}],this.chartDisplay="Monthly",this.isLoading.next(!0)):"Monthly"===this.chartDisplay?this.currentMonthChartTrades.length<=0&&(this.chartOptions.series=[{name:"P&L",data:this.currentYearChartTrades}],this.winRateChartOptions.series=isNaN(this.currentYearWinRate)?[0]:[this.currentYearWinRate],t=[],e=0,r=0,a=0,i=0,n=0,this.detailedYearlyStockType.forEach(t=>{"Futures Intraday"!==t.OptionStrategy&&"Futures"!==t.OptionStrategy||(e=t.totalgainloss/this.currentYearProfit*100)<0&&(e=-e),"Long Call Intraday"===t.OptionStrategy&&(r=t.totalgainloss/this.currentYearProfit*100)<0&&(r=-r),"Long Put Intraday"===t.OptionStrategy&&(a=t.totalgainloss/this.currentYearProfit*100)<0&&(a=-a),"Short Call Intraday"===t.OptionStrategy&&(i=t.totalgainloss/this.currentYearProfit*100)<0&&(i=-i),"Short Put Intraday"===t.OptionStrategy&&(n=t.totalgainloss/this.currentYearProfit*100)<0&&(n=-n)}),this.stockTypeChartOptions.labels=[],e>0&&(t.push(e.toFixed(0)),this.stockTypeChartOptions.labels.push("Futures")),r>0&&(t.push(r.toFixed(0)),this.stockTypeChartOptions.labels.push("Long Call")),a>0&&(t.push(a.toFixed(0)),this.stockTypeChartOptions.labels.push("Long Put")),i>0&&(t.push(i.toFixed(0)),this.stockTypeChartOptions.labels.push("Short Call")),n>0&&(t.push(n.toFixed(0)),this.stockTypeChartOptions.labels.push("Short Put")),this.stockTypeChartOptions.series=t,this.hourlyDetails=this.currentYearEntryHours,this.tradeTagsChartOptions.series=[{name:"P&L",data:this.currentYearTradeTags}],this.chartDisplay="Yearly",this.isLoading.next(!0)):(this.chartOptions.series=[{name:"P&L",data:this.currentYearChartTrades}],this.winRateChartOptions.series=isNaN(this.currentYearWinRate)?[0]:[this.currentYearWinRate],t=[],e=0,r=0,a=0,i=0,n=0,this.detailedYearlyStockType.forEach(t=>{"Futures Intraday"!==t.OptionStrategy&&"Futures"!==t.OptionStrategy||(e=t.totalgainloss/this.currentYearProfit*100)<0&&(e=-e),"Long Call Intraday"===t.OptionStrategy&&(r=t.totalgainloss/this.currentYearProfit*100)<0&&(r=-r),"Long Put Intraday"===t.OptionStrategy&&(a=t.totalgainloss/this.currentYearProfit*100)<0&&(a=-a),"Short Call Intraday"===t.OptionStrategy&&(i=t.totalgainloss/this.currentYearProfit*100)<0&&(i=-i),"Short Put Intraday"===t.OptionStrategy&&(n=t.totalgainloss/this.currentYearProfit*100)<0&&(n=-n)}),this.stockTypeChartOptions.labels=[],e>0&&(t.push(e.toFixed(0)),this.stockTypeChartOptions.labels.push("Futures")),r>0&&(t.push(r.toFixed(0)),this.stockTypeChartOptions.labels.push("Long Call")),a>0&&(t.push(a.toFixed(0)),this.stockTypeChartOptions.labels.push("Long Put")),i>0&&(t.push(i.toFixed(0)),this.stockTypeChartOptions.labels.push("Short Call")),n>0&&(t.push(n.toFixed(0)),this.stockTypeChartOptions.labels.push("Short Put")),this.stockTypeChartOptions.series=t,this.hourlyDetails=this.currentYearEntryHours,this.tradeTagsChartOptions.series=[{name:"P&L",data:this.currentYearTradeTags}],this.chartDisplay="Yearly",this.isLoading.next(!0)))}openTradeJournal(t){this.router.navigate(["/trade/tradeJournal/edit/"+t])}resetTrades(){this.tradejournalsService.getTradeJournals({RequestType:"ClosedPositions",Status:"Closed",fromDate:l()([l()().year()]).format("M/DD/YYYY"),toDate:l()().add(1,"days").format()}),this.chartDisplay="Weekly"}get isLoading$(){return this.isLoading.asObservable()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(d.Ub(O.a),d.Ub(U.a),d.Ub(J.h))},t.\u0275cmp=d.Ob({type:t,selectors:[["app-performance-analytics"]],viewQuery:function(t,e){var r;1&t&&d.Vc(zt,!0),2&t&&d.Dc(r=d.mc())&&(e.chart=r.first)},features:[d.Gb([{provide:$.b,useClass:B.b},{provide:$.c,useClass:B.c}])],decls:111,vars:108,consts:[[1,"card","card-custom","card-stretch",2,"min-height","550px"],[4,"ngIf"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"card-toolbar"],[1,"btn","btn-sm","btn-secondary","form-control-sm",3,"click"],[1,"flaticon2-circular-arrow"],[1,"card-body"],[1,"row"],[1,"col-lg-6"],["id","chart"],[3,"series","chart","dataLabels","plotOptions","yaxis","xaxis","title","tooltip","noData"],[1,"row","mt-5"],[1,"col-lg-12"],["class",".text-dark","style","\n                      margin-top: 10px;\n                      text-align: right;\n                      margin-right: 10px;\n                    ",3,"ngStyle",4,"ngIf"],[1,"row","mt-5","ml-5"],[1,"col-lg-8"],["name","chartDisplay",1,"form-control",3,"ngModel","ngModelChange","change"],[1,"row","ml-5","mt-5"],[1,"col-lg-2"],[1,"col-lg-8",2,"text-align","left"],["id","winRateChart",1,"ml-10"],[3,"series","chart","plotOptions","labels","fill","stroke"],[1,"col-lg-4"],[1,"col-lg-8",2,"text-align","left","margin-top","-15px"],[1,"font-weight-bold"],[1,"font-weight-bolder","text-primary"],[1,"col-lg-8",2,"text-align","left","margin-top","5px"],[1,"col-lg-6","mt-5"],["id","stockTypeChart"],[3,"series","chart","plotOptions","labels","legend","colors"],["class","row",4,"ngIf"],[1,"progress","progress-modal"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated","bg-primary",2,"width","100%"],[1,".text-dark",2,"margin-top","10px","text-align","right","margin-right","10px",3,"ngStyle"],["cacheSVG","true","class","svg-icon svg-icon-md ml-5",3,"inlineSVG",4,"ngIf"],["cacheSVG","true",1,"svg-icon","svg-icon-md","ml-5",3,"inlineSVG"],["id","DetailedChart"],[3,"series","chart","dataLabels","plotOptions","yaxis","xaxis","title","tooltip","noData","colors"],[1,"d-flex","align-items-center","ml-20","mt-15"],[1,"symbol","symbol-40","symbol-light-primary","mr-5"],[1,"symbol-label","font-weight-bolder","font-size-lg"],[1,"d-flex","flex-column","font-weight-bold"],[1,"text-dark","text-hover-primary","mb-1","font-size-lg"],[1,"text-muted"],["id","hourlyWinRateChart",2,"margin-top","10px"],[1,"d-flex","align-items-center","ml-20",2,"margin-top","-10px"],[1,"d-flex","align-items-center","ml-5","mt-15"],[1,"d-flex","align-items-center","ml-5",2,"margin-top","-10px"],["id","tradeTagsChart"],[3,"series","chart","dataLabels","plotOptions","yaxis","xaxis","title","tooltip","noData","colors","fill"]],template:function(t,e){1&t&&(d.ac(0,"div",0),d.Oc(1,Bt,3,0,"ng-container",1),d.pc(2,"async"),d.ac(3,"div",0),d.ac(4,"div",2),d.ac(5,"div",3),d.ac(6,"h3",4),d.Qc(7,"Analytics Dashboard"),d.Zb(),d.Zb(),d.ac(8,"div",5),d.ac(9,"button",6),d.lc("click",function(){return e.resetTrades()}),d.Vb(10,"i",7),d.Qc(11," Reset "),d.Zb(),d.Zb(),d.Zb(),d.ac(12,"div",8),d.ac(13,"div",9),d.ac(14,"div",10),d.ac(15,"div",11),d.Vb(16,"apx-chart",12),d.Zb(),d.Zb(),d.ac(17,"div",10),d.ac(18,"div",13),d.ac(19,"div",10),d.ac(20,"div",13),d.ac(21,"div",14),d.Oc(22,Gt,5,10,"h4",15),d.Oc(23,Kt,5,10,"h4",15),d.Oc(24,re,5,10,"h4",15),d.Zb(),d.Zb(),d.Zb(),d.ac(25,"div",10),d.ac(26,"div",16),d.ac(27,"div",17),d.ac(28,"select",18),d.lc("ngModelChange",function(t){return e.chartDisplay=t})("change",function(){return e.updateSeries()}),d.ac(29,"option"),d.Qc(30,"Weekly"),d.Zb(),d.ac(31,"option"),d.Qc(32,"Monthly"),d.Zb(),d.ac(33,"option"),d.Qc(34,"Yearly"),d.Zb(),d.Zb(),d.Zb(),d.Zb(),d.Zb(),d.Zb(),d.ac(35,"div",19),d.ac(36,"div",10),d.ac(37,"div",9),d.Vb(38,"div",20),d.ac(39,"div",21),d.ac(40,"div",22),d.Vb(41,"apx-chart",23),d.Zb(),d.Zb(),d.Zb(),d.ac(42,"div",9),d.Vb(43,"div",24),d.ac(44,"div",25),d.ac(45,"span",26),d.Qc(46," Total Trades : \xa0 "),d.Zb(),d.ac(47,"span",27),d.Qc(48),d.Zb(),d.Zb(),d.Zb(),d.ac(49,"div",9),d.Vb(50,"div",24),d.ac(51,"div",28),d.ac(52,"span",26),d.Qc(53," Profit Factor : \xa0 "),d.Zb(),d.ac(54,"span",27),d.Qc(55),d.pc(56,"number"),d.pc(57,"number"),d.pc(58,"number"),d.pc(59,"number"),d.Zb(),d.Zb(),d.Zb(),d.ac(60,"div",9),d.Vb(61,"div",24),d.ac(62,"div",28),d.ac(63,"span",26),d.Qc(64," Avg. Win : \xa0 "),d.Zb(),d.ac(65,"span",27),d.Qc(66),d.pc(67,"currency"),d.pc(68,"currency"),d.pc(69,"currency"),d.pc(70,"currency"),d.Zb(),d.Zb(),d.Zb(),d.ac(71,"div",9),d.Vb(72,"div",24),d.ac(73,"div",28),d.ac(74,"span",26),d.Qc(75," Avg. Loss : \xa0 "),d.Zb(),d.ac(76,"span",27),d.Qc(77),d.pc(78,"currency"),d.pc(79,"currency"),d.pc(80,"currency"),d.pc(81,"currency"),d.Zb(),d.Zb(),d.Zb(),d.ac(82,"div",9),d.Vb(83,"div",24),d.ac(84,"div",28),d.ac(85,"span",26),d.Qc(86," Best Trade : \xa0 "),d.Zb(),d.ac(87,"span",27),d.Qc(88),d.pc(89,"number"),d.pc(90,"number"),d.pc(91,"number"),d.pc(92,"number"),d.Zb(),d.Zb(),d.Zb(),d.ac(93,"div",9),d.Vb(94,"div",24),d.ac(95,"div",28),d.ac(96,"span",26),d.Qc(97," Worst Trade : \xa0 "),d.Zb(),d.ac(98,"span",27),d.Qc(99),d.pc(100,"number"),d.pc(101,"number"),d.pc(102,"number"),d.pc(103,"number"),d.Zb(),d.Zb(),d.Zb(),d.Zb(),d.ac(104,"div",29),d.ac(105,"div",30),d.Vb(106,"apx-chart",31),d.Zb(),d.Zb(),d.Zb(),d.Zb(),d.Zb(),d.Oc(107,ae,85,66,"div",32),d.pc(108,"async"),d.Oc(109,ie,4,11,"div",32),d.pc(110,"async"),d.Zb(),d.Zb(),d.Zb()),2&t&&(d.Hb(1),d.wc("ngIf",d.qc(2,34,e.tradejournalsService.isLoading$)),d.Hb(15),d.wc("series",e.chartOptions.series)("chart",e.chartOptions.chart)("dataLabels",e.chartOptions.dataLabels)("plotOptions",e.chartOptions.plotOptions)("yaxis",e.chartOptions.yaxis)("xaxis",e.chartOptions.xaxis)("title",e.chartOptions.title)("tooltip",e.chartOptions.tooltip)("noData",e.chartOptions.nodata),d.Hb(6),d.wc("ngIf","Weekly"==e.chartDisplay),d.Hb(1),d.wc("ngIf","Monthly"==e.chartDisplay),d.Hb(1),d.wc("ngIf","Yearly"==e.chartDisplay),d.Hb(4),d.wc("ngModel",e.chartDisplay),d.Hb(13),d.wc("series",e.winRateChartOptions.series)("chart",e.winRateChartOptions.chart)("plotOptions",e.winRateChartOptions.plotOptions)("labels",e.winRateChartOptions.labels)("fill",e.winRateChartOptions.fill)("stroke",e.winRateChartOptions.stroke),d.Hb(7),d.Sc(" ","Weekly"==e.chartDisplay?e.currentWeekTotalTrades:"Monthly"==e.chartDisplay?e.currentMonthTotalTrades:"Yearly"==e.chartDisplay?e.currentYearTotalTrades:e.currentWeekTotalTrades," "),d.Hb(7),d.Sc(" ","Weekly"==e.chartDisplay?d.rc(56,36,e.currentWeekProfitFactor,"0.2-2"):"Monthly"==e.chartDisplay?d.rc(57,39,e.currentMonthProfitFactor,"0.2-2"):"Yearly"==e.chartDisplay?d.rc(58,42,e.currentYearProfitFactor,"0.2-2"):d.rc(59,45,e.currentWeekProfitFactor,"0.2-2")," "),d.Hb(11),d.Sc(" ","Weekly"==e.chartDisplay?e.currentWeekAvgProfit?d.sc(67,48,e.currentWeekAvgProfit,"INR","\u20b9 "):0:"Monthly"==e.chartDisplay?e.currentMonthAvgProfit?d.sc(68,52,e.currentMonthAvgProfit,"INR","\u20b9 "):0:"Yearly"==e.chartDisplay?e.currentYearAvgProfit?d.sc(69,56,e.currentYearAvgProfit,"INR","\u20b9 "):0:e.currentWeekAvgProfit?d.sc(70,60,e.currentWeekAvgProfit,"INR","\u20b9 "):0," "),d.Hb(11),d.Sc(" ","Weekly"==e.chartDisplay?e.currentWeekAvgLoss?d.sc(78,64,e.currentWeekAvgLoss,"INR","\u20b9 "):0:"Monthly"==e.chartDisplay?e.currentMonthAvgLoss?d.sc(79,68,e.currentMonthAvgLoss,"INR","\u20b9 "):0:"Yearly"==e.chartDisplay?e.currentMonthAvgLoss?d.sc(80,72,e.currentMonthAvgLoss,"INR","\u20b9 "):0:e.currentMonthAvgLoss?d.sc(81,76,e.currentMonthAvgLoss,"INR","\u20b9 "):0," "),d.Hb(11),d.Sc(" ","Weekly"==e.chartDisplay?d.rc(89,80,e.currentWeekMaxProfit,"0.2-2"):"Monthly"==e.chartDisplay?d.rc(90,83,e.currentMonthMaxProfit,"0.2-2"):"Yearly"==e.chartDisplay?d.rc(91,86,e.currentYearMaxProfit,"0.2-2"):d.rc(92,89,e.currentWeekMaxProfit,"0.2-2")," "),d.Hb(11),d.Sc(" ","Weekly"==e.chartDisplay?d.rc(100,92,e.currentWeekMaxLoss,"0.2-2"):"Monthly"==e.chartDisplay?d.rc(101,95,e.currentMonthMaxLoss,"0.2-2"):"Yearly"==e.chartDisplay?d.rc(102,98,e.currentYearMaxLoss,"0.2-2"):d.rc(103,101,e.currentWeekProfitFactor,"0.2-2")," "),d.Hb(7),d.wc("series",e.stockTypeChartOptions.series)("chart",e.stockTypeChartOptions.chart)("plotOptions",e.stockTypeChartOptions.plotOptions)("labels",e.stockTypeChartOptions.labels)("legend",e.stockTypeChartOptions.legend)("colors",e.stockTypeChartOptions.colors),d.Hb(1),d.wc("ngIf",d.qc(108,104,e.isLoading$)),d.Hb(2),d.wc("ngIf",d.qc(110,106,e.isLoading$)))},directives:[o.o,T.a,G.q,G.j,G.l,G.m,G.s,o.p,i.a],pipes:[o.b,o.g,o.d],styles:["#chart[_ngcontent-%COMP%], #DetailedChart[_ngcontent-%COMP%]{max-width:90%;margin:20px auto}#winRateChart[_ngcontent-%COMP%]{padding:0;max-width:90%;margin:5px auto}#hourlyWinRateChart[_ngcontent-%COMP%]{padding:0;max-width:25%;margin:5px auto}#stockTypeChart[_ngcontent-%COMP%]{padding:0;max-width:100%;margin:25px auto}#tradeTagsChart[_ngcontent-%COMP%]{padding:0;max-width:95%;margin:20px auto}"]}),t})()},{path:"algoAnalytics",component:Vt},{path:"stockAnalytics",component:Dt},{path:"optionsAnalytics",component:ct},{path:"equityAnalytics",component:z},{path:"",redirectTo:"performanceAnalytics",pathMatch:"full"},{path:"**",redirectTo:"performanceAnalytics",pathMatch:"full"}]}];let oe=(()=>{class t{}return t.\u0275mod=d.Sb({type:t}),t.\u0275inj=d.Rb({factory:function(e){return new(e||t)},imports:[[J.l.forChild(ne)],J.l]}),t})();var se=r("oOf3");let le=(()=>{class t{}return t.\u0275mod=d.Sb({type:t}),t.\u0275inj=d.Rb({factory:function(e){return new(e||t)},imports:[[o.c,oe,T.b,n.a,i.b,a.a,G.g,$.l,$.d,G.p,se.a]]}),t})()},LvDl:function(t,e,r){(function(t){var a;(function(){var i="Expected a function",n="__lodash_placeholder__",o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],s="[object Arguments]",l="[object Array]",c="[object Boolean]",u="[object Date]",h="[object Error]",d="[object Function]",p="[object GeneratorFunction]",f="[object Map]",g="[object Number]",b="[object Object]",y="[object RegExp]",v="[object Set]",m="[object String]",x="[object Symbol]",O="[object WeakMap]",T="[object ArrayBuffer]",D="[object DataView]",S="[object Float32Array]",k="[object Float64Array]",w="[object Int8Array]",L="[object Int16Array]",_="[object Int32Array]",P="[object Uint8Array]",C="[object Uint16Array]",M="[object Uint32Array]",Z=/\b__p \+= '';/g,Y=/\b(__p \+=) '' \+/g,j=/(__e\(.*?\)|\b__t\)) \+\n'';/g,W=/&(?:amp|lt|gt|quot|#39);/g,A=/[&<>"']/g,I=RegExp(W.source),R=RegExp(A.source),E=/<%-([\s\S]+?)%>/g,H=/<%([\s\S]+?)%>/g,F=/<%=([\s\S]+?)%>/g,N=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,V=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,z=/[\\^$.*+?()[\]{}|]/g,B=RegExp(z.source),$=/^\s+/,U=/\s/,J=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,G=/\{\n\/\* \[wrapped with (.+)\] \*/,q=/,? & /,X=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,K=/[()=,{}\[\]\/\s]/,tt=/\\(\\)?/g,et=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,rt=/\w*$/,at=/^[-+]0x[0-9a-f]+$/i,it=/^0b[01]+$/i,nt=/^\[object .+?Constructor\]$/,ot=/^0o[0-7]+$/i,st=/^(?:0|[1-9]\d*)$/,lt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ct=/($^)/,ut=/['\n\r\u2028\u2029\\]/g,ht="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",dt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pt="["+dt+"]",ft="["+ht+"]",gt="\\d+",bt="[a-z\\xdf-\\xf6\\xf8-\\xff]",yt="[^\\ud800-\\udfff"+dt+gt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",vt="\\ud83c[\\udffb-\\udfff]",mt="[^\\ud800-\\udfff]",xt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ot="[\\ud800-\\udbff][\\udc00-\\udfff]",Tt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Dt="(?:"+bt+"|"+yt+")",St="(?:"+Tt+"|"+yt+")",kt="(?:"+ft+"|"+vt+")?",wt="[\\ufe0e\\ufe0f]?"+kt+"(?:\\u200d(?:"+[mt,xt,Ot].join("|")+")[\\ufe0e\\ufe0f]?"+kt+")*",Lt="(?:"+["[\\u2700-\\u27bf]",xt,Ot].join("|")+")"+wt,_t="(?:"+[mt+ft+"?",ft,xt,Ot,"[\\ud800-\\udfff]"].join("|")+")",Pt=RegExp("['\u2019]","g"),Ct=RegExp(ft,"g"),Mt=RegExp(vt+"(?="+vt+")|"+_t+wt,"g"),Zt=RegExp([Tt+"?"+bt+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[pt,Tt,"$"].join("|")+")",St+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[pt,Tt+Dt,"$"].join("|")+")",Tt+"?"+Dt+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Tt+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",gt,Lt].join("|"),"g"),Yt=RegExp("[\\u200d\\ud800-\\udfff"+ht+"\\ufe0e\\ufe0f]"),jt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Wt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],At=-1,It={};It[S]=It[k]=It[w]=It[L]=It[_]=It[P]=It["[object Uint8ClampedArray]"]=It[C]=It[M]=!0,It[s]=It[l]=It[T]=It[c]=It[D]=It[u]=It[h]=It[d]=It[f]=It[g]=It[b]=It[y]=It[v]=It[m]=It[O]=!1;var Rt={};Rt[s]=Rt[l]=Rt[T]=Rt[D]=Rt[c]=Rt[u]=Rt[S]=Rt[k]=Rt[w]=Rt[L]=Rt[_]=Rt[f]=Rt[g]=Rt[b]=Rt[y]=Rt[v]=Rt[m]=Rt[x]=Rt[P]=Rt["[object Uint8ClampedArray]"]=Rt[C]=Rt[M]=!0,Rt[h]=Rt[d]=Rt[O]=!1;var Et={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ht=parseFloat,Ft=parseInt,Nt="object"==typeof global&&global&&global.Object===Object&&global,Qt="object"==typeof self&&self&&self.Object===Object&&self,Vt=Nt||Qt||Function("return this")(),zt=e&&!e.nodeType&&e,Bt=zt&&"object"==typeof t&&t&&!t.nodeType&&t,$t=Bt&&Bt.exports===zt,Ut=$t&&Nt.process,Jt=function(){try{return Bt&&Bt.require&&Bt.require("util").types||Ut&&Ut.binding&&Ut.binding("util")}catch(t){}}(),Gt=Jt&&Jt.isArrayBuffer,qt=Jt&&Jt.isDate,Xt=Jt&&Jt.isMap,Kt=Jt&&Jt.isRegExp,te=Jt&&Jt.isSet,ee=Jt&&Jt.isTypedArray;function re(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function ae(t,e,r,a){for(var i=-1,n=null==t?0:t.length;++i<n;){var o=t[i];e(a,o,r(o),t)}return a}function ie(t,e){for(var r=-1,a=null==t?0:t.length;++r<a&&!1!==e(t[r],r,t););return t}function ne(t,e){for(var r=null==t?0:t.length;r--&&!1!==e(t[r],r,t););return t}function oe(t,e){for(var r=-1,a=null==t?0:t.length;++r<a;)if(!e(t[r],r,t))return!1;return!0}function se(t,e){for(var r=-1,a=null==t?0:t.length,i=0,n=[];++r<a;){var o=t[r];e(o,r,t)&&(n[i++]=o)}return n}function le(t,e){return!(null==t||!t.length)&&ve(t,e,0)>-1}function ce(t,e,r){for(var a=-1,i=null==t?0:t.length;++a<i;)if(r(e,t[a]))return!0;return!1}function ue(t,e){for(var r=-1,a=null==t?0:t.length,i=Array(a);++r<a;)i[r]=e(t[r],r,t);return i}function he(t,e){for(var r=-1,a=e.length,i=t.length;++r<a;)t[i+r]=e[r];return t}function de(t,e,r,a){var i=-1,n=null==t?0:t.length;for(a&&n&&(r=t[++i]);++i<n;)r=e(r,t[i],i,t);return r}function pe(t,e,r,a){var i=null==t?0:t.length;for(a&&i&&(r=t[--i]);i--;)r=e(r,t[i],i,t);return r}function fe(t,e){for(var r=-1,a=null==t?0:t.length;++r<a;)if(e(t[r],r,t))return!0;return!1}var ge=Te("length");function be(t,e,r){var a;return r(t,function(t,r,i){if(e(t,r,i))return a=r,!1}),a}function ye(t,e,r,a){for(var i=t.length,n=r+(a?1:-1);a?n--:++n<i;)if(e(t[n],n,t))return n;return-1}function ve(t,e,r){return e==e?function(t,e,r){for(var a=r-1,i=t.length;++a<i;)if(t[a]===e)return a;return-1}(t,e,r):ye(t,xe,r)}function me(t,e,r,a){for(var i=r-1,n=t.length;++i<n;)if(a(t[i],e))return i;return-1}function xe(t){return t!=t}function Oe(t,e){var r=null==t?0:t.length;return r?ke(t,e)/r:NaN}function Te(t){return function(e){return null==e?void 0:e[t]}}function De(t){return function(e){return null==t?void 0:t[e]}}function Se(t,e,r,a,i){return i(t,function(t,i,n){r=a?(a=!1,t):e(r,t,i,n)}),r}function ke(t,e){for(var r,a=-1,i=t.length;++a<i;){var n=e(t[a]);void 0!==n&&(r=void 0===r?n:r+n)}return r}function we(t,e){for(var r=-1,a=Array(t);++r<t;)a[r]=e(r);return a}function Le(t){return t?t.slice(0,ze(t)+1).replace($,""):t}function _e(t){return function(e){return t(e)}}function Pe(t,e){return ue(e,function(e){return t[e]})}function Ce(t,e){return t.has(e)}function Me(t,e){for(var r=-1,a=t.length;++r<a&&ve(e,t[r],0)>-1;);return r}function Ze(t,e){for(var r=t.length;r--&&ve(e,t[r],0)>-1;);return r}function Ye(t,e){for(var r=t.length,a=0;r--;)t[r]===e&&++a;return a}var je=De({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),We=De({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ae(t){return"\\"+Et[t]}function Ie(t){return Yt.test(t)}function Re(t){var e=-1,r=Array(t.size);return t.forEach(function(t,a){r[++e]=[a,t]}),r}function Ee(t,e){return function(r){return t(e(r))}}function He(t,e){for(var r=-1,a=t.length,i=0,o=[];++r<a;){var s=t[r];s!==e&&s!==n||(t[r]=n,o[i++]=r)}return o}function Fe(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function Ne(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=[t,t]}),r}function Qe(t){return Ie(t)?function(t){for(var e=Mt.lastIndex=0;Mt.test(t);)++e;return e}(t):ge(t)}function Ve(t){return Ie(t)?function(t){return t.match(Mt)||[]}(t):function(t){return t.split("")}(t)}function ze(t){for(var e=t.length;e--&&U.test(t.charAt(e)););return e}var Be=De({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),$e=function t(e){var r,a=(e=null==e?Vt:$e.defaults(Vt.Object(),e,$e.pick(Vt,Wt))).Array,U=e.Date,ht=e.Error,dt=e.Function,pt=e.Math,ft=e.Object,gt=e.RegExp,bt=e.String,yt=e.TypeError,vt=a.prototype,mt=ft.prototype,xt=e["__core-js_shared__"],Ot=dt.prototype.toString,Tt=mt.hasOwnProperty,Dt=0,St=(r=/[^.]+$/.exec(xt&&xt.keys&&xt.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",kt=mt.toString,wt=Ot.call(ft),Lt=Vt._,_t=gt("^"+Ot.call(Tt).replace(z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Mt=$t?e.Buffer:void 0,Yt=e.Symbol,Et=e.Uint8Array,Nt=Mt?Mt.allocUnsafe:void 0,Qt=Ee(ft.getPrototypeOf,ft),zt=ft.create,Bt=mt.propertyIsEnumerable,Ut=vt.splice,Jt=Yt?Yt.isConcatSpreadable:void 0,ge=Yt?Yt.iterator:void 0,De=Yt?Yt.toStringTag:void 0,Ue=function(){try{var t=qi(ft,"defineProperty");return t({},"",{}),t}catch(e){}}(),Je=e.clearTimeout!==Vt.clearTimeout&&e.clearTimeout,Ge=U&&U.now!==Vt.Date.now&&U.now,qe=e.setTimeout!==Vt.setTimeout&&e.setTimeout,Xe=pt.ceil,Ke=pt.floor,tr=ft.getOwnPropertySymbols,er=Mt?Mt.isBuffer:void 0,rr=e.isFinite,ar=vt.join,ir=Ee(ft.keys,ft),nr=pt.max,or=pt.min,sr=U.now,lr=e.parseInt,cr=pt.random,ur=vt.reverse,hr=qi(e,"DataView"),dr=qi(e,"Map"),pr=qi(e,"Promise"),fr=qi(e,"Set"),gr=qi(e,"WeakMap"),br=qi(ft,"create"),yr=gr&&new gr,vr={},mr=Ln(hr),xr=Ln(dr),Or=Ln(pr),Tr=Ln(fr),Dr=Ln(gr),Sr=Yt?Yt.prototype:void 0,kr=Sr?Sr.valueOf:void 0,wr=Sr?Sr.toString:void 0;function Lr(t){if(zo(t)&&!jo(t)&&!(t instanceof Mr)){if(t instanceof Cr)return t;if(Tt.call(t,"__wrapped__"))return _n(t)}return new Cr(t)}var _r=function(){function t(){}return function(e){if(!Vo(e))return{};if(zt)return zt(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function Pr(){}function Cr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function Mr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Zr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}function Yr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}function jr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}function Wr(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new jr;++e<r;)this.add(t[e])}function Ar(t){var e=this.__data__=new Yr(t);this.size=e.size}function Ir(t,e){var r=jo(t),a=!r&&Yo(t),i=!r&&!a&&Ro(t),n=!r&&!a&&!i&&Ko(t),o=r||a||i||n,s=o?we(t.length,bt):[],l=s.length;for(var c in t)!e&&!Tt.call(t,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||n&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||nn(c,l))||s.push(c);return s}function Rr(t){var e=t.length;return e?t[ja(0,e-1)]:void 0}function Er(t,e){return Tn(gi(t),Ur(e,0,t.length))}function Hr(t){return Tn(gi(t))}function Fr(t,e,r){(void 0!==r&&!Co(t[e],r)||void 0===r&&!(e in t))&&Br(t,e,r)}function Nr(t,e,r){var a=t[e];Tt.call(t,e)&&Co(a,r)&&(void 0!==r||e in t)||Br(t,e,r)}function Qr(t,e){for(var r=t.length;r--;)if(Co(t[r][0],e))return r;return-1}function Vr(t,e,r,a){return Kr(t,function(t,i,n){e(a,t,r(t),n)}),a}function zr(t,e){return t&&bi(e,Os(e),t)}function Br(t,e,r){"__proto__"==e&&Ue?Ue(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function $r(t,e){for(var r=-1,i=e.length,n=a(i),o=null==t;++r<i;)n[r]=o?void 0:bs(t,e[r]);return n}function Ur(t,e,r){return t==t&&(void 0!==r&&(t=t<=r?t:r),void 0!==e&&(t=t>=e?t:e)),t}function Jr(t,e,r,a,i,n){var o,l=1&e,h=2&e,O=4&e;if(r&&(o=i?r(t,a,i,n):r(t)),void 0!==o)return o;if(!Vo(t))return t;var Z=jo(t);if(Z){if(o=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Tt.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!l)return gi(t,o)}else{var Y=tn(t),j=Y==d||Y==p;if(Ro(t))return ci(t,l);if(Y==b||Y==s||j&&!i){if(o=h||j?{}:rn(t),!l)return h?function(t,e){return bi(t,Ki(t),e)}(t,function(t,e){return t&&bi(e,Ts(e),t)}(o,t)):function(t,e){return bi(t,Xi(t),e)}(t,zr(o,t))}else{if(!Rt[Y])return i?t:{};o=function(t,e,r){var a=t.constructor;switch(e){case T:return ui(t);case c:case u:return new a(+t);case D:return function(t,e){var r=e?ui(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case S:case k:case w:case L:case _:case P:case"[object Uint8ClampedArray]":case C:case M:return hi(t,r);case f:return new a;case g:case m:return new a(t);case y:return function(t){var e=new t.constructor(t.source,rt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case v:return new a;case x:return kr?ft(kr.call(t)):{}}}(t,Y,l)}}n||(n=new Ar);var W=n.get(t);if(W)return W;n.set(t,o),Go(t)?t.forEach(function(a){o.add(Jr(a,e,r,a,t,n))}):Bo(t)&&t.forEach(function(a,i){o.set(i,Jr(a,e,r,i,t,n))});var A=Z?void 0:(O?h?Vi:Qi:h?Ts:Os)(t);return ie(A||t,function(a,i){A&&(a=t[i=a]),Nr(o,i,Jr(a,e,r,i,t,n))}),o}function Gr(t,e,r){var a=r.length;if(null==t)return!a;for(t=ft(t);a--;){var i=r[a],n=t[i];if(void 0===n&&!(i in t)||!(0,e[i])(n))return!1}return!0}function qr(t,e,r){if("function"!=typeof t)throw new yt(i);return vn(function(){t.apply(void 0,r)},e)}function Xr(t,e,r,a){var i=-1,n=le,o=!0,s=t.length,l=[],c=e.length;if(!s)return l;r&&(e=ue(e,_e(r))),a?(n=ce,o=!1):e.length>=200&&(n=Ce,o=!1,e=new Wr(e));t:for(;++i<s;){var u=t[i],h=null==r?u:r(u);if(u=a||0!==u?u:0,o&&h==h){for(var d=c;d--;)if(e[d]===h)continue t;l.push(u)}else n(e,h,a)||l.push(u)}return l}Lr.templateSettings={escape:E,evaluate:H,interpolate:F,variable:"",imports:{_:Lr}},(Lr.prototype=Pr.prototype).constructor=Lr,(Cr.prototype=_r(Pr.prototype)).constructor=Cr,(Mr.prototype=_r(Pr.prototype)).constructor=Mr,Zr.prototype.clear=function(){this.__data__=br?br(null):{},this.size=0},Zr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Zr.prototype.get=function(t){var e=this.__data__;if(br){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return Tt.call(e,t)?e[t]:void 0},Zr.prototype.has=function(t){var e=this.__data__;return br?void 0!==e[t]:Tt.call(e,t)},Zr.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=br&&void 0===e?"__lodash_hash_undefined__":e,this},Yr.prototype.clear=function(){this.__data__=[],this.size=0},Yr.prototype.delete=function(t){var e=this.__data__,r=Qr(e,t);return!(r<0||(r==e.length-1?e.pop():Ut.call(e,r,1),--this.size,0))},Yr.prototype.get=function(t){var e=this.__data__,r=Qr(e,t);return r<0?void 0:e[r][1]},Yr.prototype.has=function(t){return Qr(this.__data__,t)>-1},Yr.prototype.set=function(t,e){var r=this.__data__,a=Qr(r,t);return a<0?(++this.size,r.push([t,e])):r[a][1]=e,this},jr.prototype.clear=function(){this.size=0,this.__data__={hash:new Zr,map:new(dr||Yr),string:new Zr}},jr.prototype.delete=function(t){var e=Ji(this,t).delete(t);return this.size-=e?1:0,e},jr.prototype.get=function(t){return Ji(this,t).get(t)},jr.prototype.has=function(t){return Ji(this,t).has(t)},jr.prototype.set=function(t,e){var r=Ji(this,t),a=r.size;return r.set(t,e),this.size+=r.size==a?0:1,this},Wr.prototype.add=Wr.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Wr.prototype.has=function(t){return this.__data__.has(t)},Ar.prototype.clear=function(){this.__data__=new Yr,this.size=0},Ar.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Ar.prototype.get=function(t){return this.__data__.get(t)},Ar.prototype.has=function(t){return this.__data__.has(t)},Ar.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Yr){var a=r.__data__;if(!dr||a.length<199)return a.push([t,e]),this.size=++r.size,this;r=this.__data__=new jr(a)}return r.set(t,e),this.size=r.size,this};var Kr=mi(sa),ta=mi(la,!0);function ea(t,e){var r=!0;return Kr(t,function(t,a,i){return r=!!e(t,a,i)}),r}function ra(t,e,r){for(var a=-1,i=t.length;++a<i;){var n=t[a],o=e(n);if(null!=o&&(void 0===s?o==o&&!Xo(o):r(o,s)))var s=o,l=n}return l}function aa(t,e){var r=[];return Kr(t,function(t,a,i){e(t,a,i)&&r.push(t)}),r}function ia(t,e,r,a,i){var n=-1,o=t.length;for(r||(r=an),i||(i=[]);++n<o;){var s=t[n];e>0&&r(s)?e>1?ia(s,e-1,r,a,i):he(i,s):a||(i[i.length]=s)}return i}var na=xi(),oa=xi(!0);function sa(t,e){return t&&na(t,e,Os)}function la(t,e){return t&&oa(t,e,Os)}function ca(t,e){return se(e,function(e){return Fo(t[e])})}function ua(t,e){for(var r=0,a=(e=ni(e,t)).length;null!=t&&r<a;)t=t[wn(e[r++])];return r&&r==a?t:void 0}function ha(t,e,r){var a=e(t);return jo(t)?a:he(a,r(t))}function da(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":De&&De in ft(t)?function(t){var e=Tt.call(t,De),r=t[De];try{t[De]=void 0;var a=!0}catch(n){}var i=kt.call(t);return a&&(e?t[De]=r:delete t[De]),i}(t):function(t){return kt.call(t)}(t)}function pa(t,e){return t>e}function fa(t,e){return null!=t&&Tt.call(t,e)}function ga(t,e){return null!=t&&e in ft(t)}function ba(t,e,r){for(var i=r?ce:le,n=t[0].length,o=t.length,s=o,l=a(o),c=1/0,u=[];s--;){var h=t[s];s&&e&&(h=ue(h,_e(e))),c=or(h.length,c),l[s]=!r&&(e||n>=120&&h.length>=120)?new Wr(s&&h):void 0}h=t[0];var d=-1,p=l[0];t:for(;++d<n&&u.length<c;){var f=h[d],g=e?e(f):f;if(f=r||0!==f?f:0,!(p?Ce(p,g):i(u,g,r))){for(s=o;--s;){var b=l[s];if(!(b?Ce(b,g):i(t[s],g,r)))continue t}p&&p.push(g),u.push(f)}}return u}function ya(t,e,r){var a=null==(t=fn(t,e=ni(e,t)))?t:t[wn(En(e))];return null==a?void 0:re(a,t,r)}function va(t){return zo(t)&&da(t)==s}function ma(t,e,r,a,i){return t===e||(null==t||null==e||!zo(t)&&!zo(e)?t!=t&&e!=e:function(t,e,r,a,i,n){var o=jo(t),d=jo(e),p=o?l:tn(t),O=d?l:tn(e),S=(p=p==s?b:p)==b,k=(O=O==s?b:O)==b,w=p==O;if(w&&Ro(t)){if(!Ro(e))return!1;o=!0,S=!1}if(w&&!S)return n||(n=new Ar),o||Ko(t)?Fi(t,e,r,a,i,n):function(t,e,r,a,i,n,o){switch(r){case D:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case T:return!(t.byteLength!=e.byteLength||!n(new Et(t),new Et(e)));case c:case u:case g:return Co(+t,+e);case h:return t.name==e.name&&t.message==e.message;case y:case m:return t==e+"";case f:var s=Re;case v:if(s||(s=Fe),t.size!=e.size&&!(1&a))return!1;var l=o.get(t);if(l)return l==e;a|=2,o.set(t,e);var d=Fi(s(t),s(e),a,i,n,o);return o.delete(t),d;case x:if(kr)return kr.call(t)==kr.call(e)}return!1}(t,e,p,r,a,i,n);if(!(1&r)){var L=S&&Tt.call(t,"__wrapped__"),_=k&&Tt.call(e,"__wrapped__");if(L||_){var P=L?t.value():t,C=_?e.value():e;return n||(n=new Ar),i(P,C,r,a,n)}}return!!w&&(n||(n=new Ar),function(t,e,r,a,i,n){var o=1&r,s=Qi(t),l=s.length;if(l!=Qi(e).length&&!o)return!1;for(var c=l;c--;){var u=s[c];if(!(o?u in e:Tt.call(e,u)))return!1}var h=n.get(t),d=n.get(e);if(h&&d)return h==e&&d==t;var p=!0;n.set(t,e),n.set(e,t);for(var f=o;++c<l;){var g=t[u=s[c]],b=e[u];if(a)var y=o?a(b,g,u,e,t,n):a(g,b,u,t,e,n);if(!(void 0===y?g===b||i(g,b,r,a,n):y)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var v=t.constructor,m=e.constructor;v==m||!("constructor"in t)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof m&&m instanceof m||(p=!1)}return n.delete(t),n.delete(e),p}(t,e,r,a,i,n))}(t,e,r,a,ma,i))}function xa(t,e,r,a){var i=r.length,n=i,o=!a;if(null==t)return!n;for(t=ft(t);i--;){var s=r[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<n;){var l=(s=r[i])[0],c=t[l],u=s[1];if(o&&s[2]){if(void 0===c&&!(l in t))return!1}else{var h=new Ar;if(a)var d=a(c,u,l,t,e,h);if(!(void 0===d?ma(u,c,3,a,h):d))return!1}}return!0}function Oa(t){return!(!Vo(t)||(e=t,St&&St in e))&&(Fo(t)?_t:nt).test(Ln(t));var e}function Ta(t){return"function"==typeof t?t:null==t?$s:"object"==typeof t?jo(t)?La(t[0],t[1]):wa(t):rl(t)}function Da(t){if(!un(t))return ir(t);var e=[];for(var r in ft(t))Tt.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Sa(t,e){return t<e}function ka(t,e){var r=-1,i=Ao(t)?a(t.length):[];return Kr(t,function(t,a,n){i[++r]=e(t,a,n)}),i}function wa(t){var e=Gi(t);return 1==e.length&&e[0][2]?dn(e[0][0],e[0][1]):function(r){return r===t||xa(r,t,e)}}function La(t,e){return sn(t)&&hn(e)?dn(wn(t),e):function(r){var a=bs(r,t);return void 0===a&&a===e?ys(r,t):ma(e,a,3)}}function _a(t,e,r,a,i){t!==e&&na(e,function(n,o){if(i||(i=new Ar),Vo(n))!function(t,e,r,a,i,n,o){var s=bn(t,r),l=bn(e,r),c=o.get(l);if(c)Fr(t,r,c);else{var u=n?n(s,l,r+"",t,e,o):void 0,h=void 0===u;if(h){var d=jo(l),p=!d&&Ro(l),f=!d&&!p&&Ko(l);u=l,d||p||f?jo(s)?u=s:Io(s)?u=gi(s):p?(h=!1,u=ci(l,!0)):f?(h=!1,u=hi(l,!0)):u=[]:Uo(l)||Yo(l)?(u=s,Yo(s)?u=ss(s):Vo(s)&&!Fo(s)||(u=rn(l))):h=!1}h&&(o.set(l,u),i(u,l,a,n,o),o.delete(l)),Fr(t,r,u)}}(t,e,o,r,_a,a,i);else{var s=a?a(bn(t,o),n,o+"",t,e,i):void 0;void 0===s&&(s=n),Fr(t,o,s)}},Ts)}function Pa(t,e){var r=t.length;if(r)return nn(e+=e<0?r:0,r)?t[e]:void 0}function Ca(t,e,r){e=e.length?ue(e,function(t){return jo(t)?function(e){return ua(e,1===t.length?t[0]:t)}:t}):[$s];var a=-1;return e=ue(e,_e(Ui())),function(t,e){var a=t.length;for(t.sort(function(t,e){return function(t,e,r){for(var a=-1,i=t.criteria,n=e.criteria,o=i.length,s=r.length;++a<o;){var l=di(i[a],n[a]);if(l)return a>=s?l:l*("desc"==r[a]?-1:1)}return t.index-e.index}(t,e,r)});a--;)t[a]=t[a].value;return t}(ka(t,function(t,r,i){return{criteria:ue(e,function(e){return e(t)}),index:++a,value:t}}))}function Ma(t,e,r){for(var a=-1,i=e.length,n={};++a<i;){var o=e[a],s=ua(t,o);r(s,o)&&Ea(n,ni(o,t),s)}return n}function Za(t,e,r,a){var i=a?me:ve,n=-1,o=e.length,s=t;for(t===e&&(e=gi(e)),r&&(s=ue(t,_e(r)));++n<o;)for(var l=0,c=e[n],u=r?r(c):c;(l=i(s,u,l,a))>-1;)s!==t&&Ut.call(s,l,1),Ut.call(t,l,1);return t}function Ya(t,e){for(var r=t?e.length:0,a=r-1;r--;){var i=e[r];if(r==a||i!==n){var n=i;nn(i)?Ut.call(t,i,1):qa(t,i)}}return t}function ja(t,e){return t+Ke(cr()*(e-t+1))}function Wa(t,e){var r="";if(!t||e<1||e>9007199254740991)return r;do{e%2&&(r+=t),(e=Ke(e/2))&&(t+=t)}while(e);return r}function Aa(t,e){return mn(pn(t,e,$s),t+"")}function Ia(t){return Rr(Cs(t))}function Ra(t,e){var r=Cs(t);return Tn(r,Ur(e,0,r.length))}function Ea(t,e,r,a){if(!Vo(t))return t;for(var i=-1,n=(e=ni(e,t)).length,o=n-1,s=t;null!=s&&++i<n;){var l=wn(e[i]),c=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(i!=o){var u=s[l];void 0===(c=a?a(u,l,s):void 0)&&(c=Vo(u)?u:nn(e[i+1])?[]:{})}Nr(s,l,c),s=s[l]}return t}var Ha=yr?function(t,e){return yr.set(t,e),t}:$s,Fa=Ue?function(t,e){return Ue(t,"toString",{configurable:!0,enumerable:!1,value:Vs(e),writable:!0})}:$s;function Na(t){return Tn(Cs(t))}function Qa(t,e,r){var i=-1,n=t.length;e<0&&(e=-e>n?0:n+e),(r=r>n?n:r)<0&&(r+=n),n=e>r?0:r-e>>>0,e>>>=0;for(var o=a(n);++i<n;)o[i]=t[i+e];return o}function Va(t,e){var r;return Kr(t,function(t,a,i){return!(r=e(t,a,i))}),!!r}function za(t,e,r){var a=0,i=null==t?a:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;a<i;){var n=a+i>>>1,o=t[n];null!==o&&!Xo(o)&&(r?o<=e:o<e)?a=n+1:i=n}return i}return Ba(t,e,$s,r)}function Ba(t,e,r,a){var i=0,n=null==t?0:t.length;if(0===n)return 0;for(var o=(e=r(e))!=e,s=null===e,l=Xo(e),c=void 0===e;i<n;){var u=Ke((i+n)/2),h=r(t[u]),d=void 0!==h,p=null===h,f=h==h,g=Xo(h);if(o)var b=a||f;else b=c?f&&(a||d):s?f&&d&&(a||!p):l?f&&d&&!p&&(a||!g):!p&&!g&&(a?h<=e:h<e);b?i=u+1:n=u}return or(n,4294967294)}function $a(t,e){for(var r=-1,a=t.length,i=0,n=[];++r<a;){var o=t[r],s=e?e(o):o;if(!r||!Co(s,l)){var l=s;n[i++]=0===o?0:o}}return n}function Ua(t){return"number"==typeof t?t:Xo(t)?NaN:+t}function Ja(t){if("string"==typeof t)return t;if(jo(t))return ue(t,Ja)+"";if(Xo(t))return wr?wr.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ga(t,e,r){var a=-1,i=le,n=t.length,o=!0,s=[],l=s;if(r)o=!1,i=ce;else if(n>=200){var c=e?null:Wi(t);if(c)return Fe(c);o=!1,i=Ce,l=new Wr}else l=e?[]:s;t:for(;++a<n;){var u=t[a],h=e?e(u):u;if(u=r||0!==u?u:0,o&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),s.push(u)}else i(l,h,r)||(l!==s&&l.push(h),s.push(u))}return s}function qa(t,e){return null==(t=fn(t,e=ni(e,t)))||delete t[wn(En(e))]}function Xa(t,e,r,a){return Ea(t,e,r(ua(t,e)),a)}function Ka(t,e,r,a){for(var i=t.length,n=a?i:-1;(a?n--:++n<i)&&e(t[n],n,t););return r?Qa(t,a?0:n,a?n+1:i):Qa(t,a?n+1:0,a?i:n)}function ti(t,e){var r=t;return r instanceof Mr&&(r=r.value()),de(e,function(t,e){return e.func.apply(e.thisArg,he([t],e.args))},r)}function ei(t,e,r){var i=t.length;if(i<2)return i?Ga(t[0]):[];for(var n=-1,o=a(i);++n<i;)for(var s=t[n],l=-1;++l<i;)l!=n&&(o[n]=Xr(o[n]||s,t[l],e,r));return Ga(ia(o,1),e,r)}function ri(t,e,r){for(var a=-1,i=t.length,n=e.length,o={};++a<i;)r(o,t[a],a<n?e[a]:void 0);return o}function ai(t){return Io(t)?t:[]}function ii(t){return"function"==typeof t?t:$s}function ni(t,e){return jo(t)?t:sn(t,e)?[t]:kn(ls(t))}var oi=Aa;function si(t,e,r){var a=t.length;return r=void 0===r?a:r,!e&&r>=a?t:Qa(t,e,r)}var li=Je||function(t){return Vt.clearTimeout(t)};function ci(t,e){if(e)return t.slice();var r=t.length,a=Nt?Nt(r):new t.constructor(r);return t.copy(a),a}function ui(t){var e=new t.constructor(t.byteLength);return new Et(e).set(new Et(t)),e}function hi(t,e){var r=e?ui(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function di(t,e){if(t!==e){var r=void 0!==t,a=null===t,i=t==t,n=Xo(t),o=void 0!==e,s=null===e,l=e==e,c=Xo(e);if(!s&&!c&&!n&&t>e||n&&o&&l&&!s&&!c||a&&o&&l||!r&&l||!i)return 1;if(!a&&!n&&!c&&t<e||c&&r&&i&&!a&&!n||s&&r&&i||!o&&i||!l)return-1}return 0}function pi(t,e,r,i){for(var n=-1,o=t.length,s=r.length,l=-1,c=e.length,u=nr(o-s,0),h=a(c+u),d=!i;++l<c;)h[l]=e[l];for(;++n<s;)(d||n<o)&&(h[r[n]]=t[n]);for(;u--;)h[l++]=t[n++];return h}function fi(t,e,r,i){for(var n=-1,o=t.length,s=-1,l=r.length,c=-1,u=e.length,h=nr(o-l,0),d=a(h+u),p=!i;++n<h;)d[n]=t[n];for(var f=n;++c<u;)d[f+c]=e[c];for(;++s<l;)(p||n<o)&&(d[f+r[s]]=t[n++]);return d}function gi(t,e){var r=-1,i=t.length;for(e||(e=a(i));++r<i;)e[r]=t[r];return e}function bi(t,e,r,a){var i=!r;r||(r={});for(var n=-1,o=e.length;++n<o;){var s=e[n],l=a?a(r[s],t[s],s,r,t):void 0;void 0===l&&(l=t[s]),i?Br(r,s,l):Nr(r,s,l)}return r}function yi(t,e){return function(r,a){var i=jo(r)?ae:Vr,n=e?e():{};return i(r,t,Ui(a,2),n)}}function vi(t){return Aa(function(e,r){var a=-1,i=r.length,n=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(n=t.length>3&&"function"==typeof n?(i--,n):void 0,o&&on(r[0],r[1],o)&&(n=i<3?void 0:n,i=1),e=ft(e);++a<i;){var s=r[a];s&&t(e,s,a,n)}return e})}function mi(t,e){return function(r,a){if(null==r)return r;if(!Ao(r))return t(r,a);for(var i=r.length,n=e?i:-1,o=ft(r);(e?n--:++n<i)&&!1!==a(o[n],n,o););return r}}function xi(t){return function(e,r,a){for(var i=-1,n=ft(e),o=a(e),s=o.length;s--;){var l=o[t?s:++i];if(!1===r(n[l],l,n))break}return e}}function Oi(t){return function(e){var r=Ie(e=ls(e))?Ve(e):void 0,a=r?r[0]:e.charAt(0),i=r?si(r,1).join(""):e.slice(1);return a[t]()+i}}function Ti(t){return function(e){return de(Fs(Ys(e).replace(Pt,"")),t,"")}}function Di(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=_r(t.prototype),a=t.apply(r,e);return Vo(a)?a:r}}function Si(t){return function(e,r,a){var i=ft(e);if(!Ao(e)){var n=Ui(r,3);e=Os(e),r=function(t){return n(i[t],t,i)}}var o=t(e,r,a);return o>-1?i[n?e[o]:o]:void 0}}function ki(t){return Ni(function(e){var r=e.length,a=r,n=Cr.prototype.thru;for(t&&e.reverse();a--;){var o=e[a];if("function"!=typeof o)throw new yt(i);if(n&&!s&&"wrapper"==Bi(o))var s=new Cr([],!0)}for(a=s?a:r;++a<r;){var l=Bi(o=e[a]),c="wrapper"==l?zi(o):void 0;s=c&&ln(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?s[Bi(c[0])].apply(s,c[3]):1==o.length&&ln(o)?s[l]():s.thru(o)}return function(){var t=arguments,a=t[0];if(s&&1==t.length&&jo(a))return s.plant(a).value();for(var i=0,n=r?e[i].apply(this,t):a;++i<r;)n=e[i].call(this,n);return n}})}function wi(t,e,r,i,n,o,s,l,c,u){var h=128&e,d=1&e,p=2&e,f=24&e,g=512&e,b=p?void 0:Di(t);return function y(){for(var v=arguments.length,m=a(v),x=v;x--;)m[x]=arguments[x];if(f)var O=$i(y),T=Ye(m,O);if(i&&(m=pi(m,i,n,f)),o&&(m=fi(m,o,s,f)),v-=T,f&&v<u){var D=He(m,O);return Yi(t,e,wi,y.placeholder,r,m,D,l,c,u-v)}var S=d?r:this,k=p?S[t]:t;return v=m.length,l?m=gn(m,l):g&&v>1&&m.reverse(),h&&c<v&&(m.length=c),this&&this!==Vt&&this instanceof y&&(k=b||Di(k)),k.apply(S,m)}}function Li(t,e){return function(r,a){return function(t,e,r,a){return sa(t,function(t,i,n){e(a,r(t),i,n)}),a}(r,t,e(a),{})}}function _i(t,e){return function(r,a){var i;if(void 0===r&&void 0===a)return e;if(void 0!==r&&(i=r),void 0!==a){if(void 0===i)return a;"string"==typeof r||"string"==typeof a?(r=Ja(r),a=Ja(a)):(r=Ua(r),a=Ua(a)),i=t(r,a)}return i}}function Pi(t){return Ni(function(e){return e=ue(e,_e(Ui())),Aa(function(r){var a=this;return t(e,function(t){return re(t,a,r)})})})}function Ci(t,e){var r=(e=void 0===e?" ":Ja(e)).length;if(r<2)return r?Wa(e,t):e;var a=Wa(e,Xe(t/Qe(e)));return Ie(e)?si(Ve(a),0,t).join(""):a.slice(0,t)}function Mi(t){return function(e,r,i){return i&&"number"!=typeof i&&on(e,r,i)&&(r=i=void 0),e=as(e),void 0===r?(r=e,e=0):r=as(r),function(t,e,r,i){for(var n=-1,o=nr(Xe((e-t)/(r||1)),0),s=a(o);o--;)s[i?o:++n]=t,t+=r;return s}(e,r,i=void 0===i?e<r?1:-1:as(i),t)}}function Zi(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=os(e),r=os(r)),t(e,r)}}function Yi(t,e,r,a,i,n,o,s,l,c){var u=8&e;e|=u?32:64,4&(e&=~(u?64:32))||(e&=-4);var h=[t,e,i,u?n:void 0,u?o:void 0,u?void 0:n,u?void 0:o,s,l,c],d=r.apply(void 0,h);return ln(t)&&yn(d,h),d.placeholder=a,xn(d,t,e)}function ji(t){var e=pt[t];return function(t,r){if(t=os(t),(r=null==r?0:or(is(r),292))&&rr(t)){var a=(ls(t)+"e").split("e");return+((a=(ls(e(a[0]+"e"+(+a[1]+r)))+"e").split("e"))[0]+"e"+(+a[1]-r))}return e(t)}}var Wi=fr&&1/Fe(new fr([,-0]))[1]==1/0?function(t){return new fr(t)}:Xs;function Ai(t){return function(e){var r=tn(e);return r==f?Re(e):r==v?Ne(e):function(t,e){return ue(e,function(e){return[e,t[e]]})}(e,t(e))}}function Ii(t,e,r,o,s,l,c,u){var h=2&e;if(!h&&"function"!=typeof t)throw new yt(i);var d=o?o.length:0;if(d||(e&=-97,o=s=void 0),c=void 0===c?c:nr(is(c),0),u=void 0===u?u:is(u),d-=s?s.length:0,64&e){var p=o,f=s;o=s=void 0}var g=h?void 0:zi(t),b=[t,e,r,o,s,p,f,l,c,u];if(g&&function(t,e){var r=t[1],a=e[1],i=r|a;if(!(i<131||128==a&&8==r||128==a&&256==r&&t[7].length<=e[8]||384==a&&e[7].length<=e[8]&&8==r))return t;1&a&&(t[2]=e[2],i|=1&r?0:4);var o=e[3];if(o){var s=t[3];t[3]=s?pi(s,o,e[4]):o,t[4]=s?He(t[3],n):e[4]}(o=e[5])&&(t[5]=(s=t[5])?fi(s,o,e[6]):o,t[6]=s?He(t[5],n):e[6]),(o=e[7])&&(t[7]=o),128&a&&(t[8]=null==t[8]?e[8]:or(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(b,g),t=b[0],e=b[1],r=b[2],o=b[3],s=b[4],!(u=b[9]=void 0===b[9]?h?0:t.length:nr(b[9]-d,0))&&24&e&&(e&=-25),e&&1!=e)y=8==e||16==e?function(t,e,r){var i=Di(t);return function n(){for(var o=arguments.length,s=a(o),l=o,c=$i(n);l--;)s[l]=arguments[l];var u=o<3&&s[0]!==c&&s[o-1]!==c?[]:He(s,c);return(o-=u.length)<r?Yi(t,e,wi,n.placeholder,void 0,s,u,void 0,void 0,r-o):re(this&&this!==Vt&&this instanceof n?i:t,this,s)}}(t,e,u):32!=e&&33!=e||s.length?wi.apply(void 0,b):function(t,e,r,i){var n=1&e,o=Di(t);return function e(){for(var s=-1,l=arguments.length,c=-1,u=i.length,h=a(u+l),d=this&&this!==Vt&&this instanceof e?o:t;++c<u;)h[c]=i[c];for(;l--;)h[c++]=arguments[++s];return re(d,n?r:this,h)}}(t,e,r,o);else var y=function(t,e,r){var a=1&e,i=Di(t);return function e(){return(this&&this!==Vt&&this instanceof e?i:t).apply(a?r:this,arguments)}}(t,e,r);return xn((g?Ha:yn)(y,b),t,e)}function Ri(t,e,r,a){return void 0===t||Co(t,mt[r])&&!Tt.call(a,r)?e:t}function Ei(t,e,r,a,i,n){return Vo(t)&&Vo(e)&&(n.set(e,t),_a(t,e,void 0,Ei,n),n.delete(e)),t}function Hi(t){return Uo(t)?void 0:t}function Fi(t,e,r,a,i,n){var o=1&r,s=t.length,l=e.length;if(s!=l&&!(o&&l>s))return!1;var c=n.get(t),u=n.get(e);if(c&&u)return c==e&&u==t;var h=-1,d=!0,p=2&r?new Wr:void 0;for(n.set(t,e),n.set(e,t);++h<s;){var f=t[h],g=e[h];if(a)var b=o?a(g,f,h,e,t,n):a(f,g,h,t,e,n);if(void 0!==b){if(b)continue;d=!1;break}if(p){if(!fe(e,function(t,e){if(!Ce(p,e)&&(f===t||i(f,t,r,a,n)))return p.push(e)})){d=!1;break}}else if(f!==g&&!i(f,g,r,a,n)){d=!1;break}}return n.delete(t),n.delete(e),d}function Ni(t){return mn(pn(t,void 0,jn),t+"")}function Qi(t){return ha(t,Os,Xi)}function Vi(t){return ha(t,Ts,Ki)}var zi=yr?function(t){return yr.get(t)}:Xs;function Bi(t){for(var e=t.name+"",r=vr[e],a=Tt.call(vr,e)?r.length:0;a--;){var i=r[a],n=i.func;if(null==n||n==t)return i.name}return e}function $i(t){return(Tt.call(Lr,"placeholder")?Lr:t).placeholder}function Ui(){var t=Lr.iteratee||Us;return t=t===Us?Ta:t,arguments.length?t(arguments[0],arguments[1]):t}function Ji(t,e){var r,a,i=t.__data__;return("string"==(a=typeof(r=e))||"number"==a||"symbol"==a||"boolean"==a?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function Gi(t){for(var e=Os(t),r=e.length;r--;){var a=e[r],i=t[a];e[r]=[a,i,hn(i)]}return e}function qi(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return Oa(r)?r:void 0}var Xi=tr?function(t){return null==t?[]:(t=ft(t),se(tr(t),function(e){return Bt.call(t,e)}))}:nl,Ki=tr?function(t){for(var e=[];t;)he(e,Xi(t)),t=Qt(t);return e}:nl,tn=da;function en(t,e,r){for(var a=-1,i=(e=ni(e,t)).length,n=!1;++a<i;){var o=wn(e[a]);if(!(n=null!=t&&r(t,o)))break;t=t[o]}return n||++a!=i?n:!!(i=null==t?0:t.length)&&Qo(i)&&nn(o,i)&&(jo(t)||Yo(t))}function rn(t){return"function"!=typeof t.constructor||un(t)?{}:_r(Qt(t))}function an(t){return jo(t)||Yo(t)||!!(Jt&&t&&t[Jt])}function nn(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&st.test(t))&&t>-1&&t%1==0&&t<e}function on(t,e,r){if(!Vo(r))return!1;var a=typeof e;return!!("number"==a?Ao(r)&&nn(e,r.length):"string"==a&&e in r)&&Co(r[e],t)}function sn(t,e){if(jo(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Xo(t))||Q.test(t)||!N.test(t)||null!=e&&t in ft(e)}function ln(t){var e=Bi(t),r=Lr[e];if("function"!=typeof r||!(e in Mr.prototype))return!1;if(t===r)return!0;var a=zi(r);return!!a&&t===a[0]}(hr&&tn(new hr(new ArrayBuffer(1)))!=D||dr&&tn(new dr)!=f||pr&&"[object Promise]"!=tn(pr.resolve())||fr&&tn(new fr)!=v||gr&&tn(new gr)!=O)&&(tn=function(t){var e=da(t),r=e==b?t.constructor:void 0,a=r?Ln(r):"";if(a)switch(a){case mr:return D;case xr:return f;case Or:return"[object Promise]";case Tr:return v;case Dr:return O}return e});var cn=xt?Fo:ol;function un(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||mt)}function hn(t){return t==t&&!Vo(t)}function dn(t,e){return function(r){return null!=r&&r[t]===e&&(void 0!==e||t in ft(r))}}function pn(t,e,r){return e=nr(void 0===e?t.length-1:e,0),function(){for(var i=arguments,n=-1,o=nr(i.length-e,0),s=a(o);++n<o;)s[n]=i[e+n];n=-1;for(var l=a(e+1);++n<e;)l[n]=i[n];return l[e]=r(s),re(t,this,l)}}function fn(t,e){return e.length<2?t:ua(t,Qa(e,0,-1))}function gn(t,e){for(var r=t.length,a=or(e.length,r),i=gi(t);a--;){var n=e[a];t[a]=nn(n,r)?i[n]:void 0}return t}function bn(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var yn=On(Ha),vn=qe||function(t,e){return Vt.setTimeout(t,e)},mn=On(Fa);function xn(t,e,r){var a=e+"";return mn(t,function(t,e){var r=e.length;if(!r)return t;var a=r-1;return e[a]=(r>1?"& ":"")+e[a],e=e.join(r>2?", ":" "),t.replace(J,"{\n/* [wrapped with "+e+"] */\n")}(a,function(t,e){return ie(o,function(r){var a="_."+r[0];e&r[1]&&!le(t,a)&&t.push(a)}),t.sort()}(function(t){var e=t.match(G);return e?e[1].split(q):[]}(a),r)))}function On(t){var e=0,r=0;return function(){var a=sr(),i=16-(a-r);if(r=a,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Tn(t,e){var r=-1,a=t.length,i=a-1;for(e=void 0===e?a:e;++r<e;){var n=ja(r,i),o=t[n];t[n]=t[r],t[r]=o}return t.length=e,t}var Dn,Sn,kn=(Dn=So(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(V,function(t,r,a,i){e.push(a?i.replace(tt,"$1"):r||t)}),e},function(t){return 500===Sn.size&&Sn.clear(),t}),Sn=Dn.cache,Dn);function wn(t){if("string"==typeof t||Xo(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ln(t){if(null!=t){try{return Ot.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function _n(t){if(t instanceof Mr)return t.clone();var e=new Cr(t.__wrapped__,t.__chain__);return e.__actions__=gi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Pn=Aa(function(t,e){return Io(t)?Xr(t,ia(e,1,Io,!0)):[]}),Cn=Aa(function(t,e){var r=En(e);return Io(r)&&(r=void 0),Io(t)?Xr(t,ia(e,1,Io,!0),Ui(r,2)):[]}),Mn=Aa(function(t,e){var r=En(e);return Io(r)&&(r=void 0),Io(t)?Xr(t,ia(e,1,Io,!0),void 0,r):[]});function Zn(t,e,r){var a=null==t?0:t.length;if(!a)return-1;var i=null==r?0:is(r);return i<0&&(i=nr(a+i,0)),ye(t,Ui(e,3),i)}function Yn(t,e,r){var a=null==t?0:t.length;if(!a)return-1;var i=a-1;return void 0!==r&&(i=is(r),i=r<0?nr(a+i,0):or(i,a-1)),ye(t,Ui(e,3),i,!0)}function jn(t){return null!=t&&t.length?ia(t,1):[]}function Wn(t){return t&&t.length?t[0]:void 0}var An=Aa(function(t){var e=ue(t,ai);return e.length&&e[0]===t[0]?ba(e):[]}),In=Aa(function(t){var e=En(t),r=ue(t,ai);return e===En(r)?e=void 0:r.pop(),r.length&&r[0]===t[0]?ba(r,Ui(e,2)):[]}),Rn=Aa(function(t){var e=En(t),r=ue(t,ai);return(e="function"==typeof e?e:void 0)&&r.pop(),r.length&&r[0]===t[0]?ba(r,void 0,e):[]});function En(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var Hn=Aa(Fn);function Fn(t,e){return t&&t.length&&e&&e.length?Za(t,e):t}var Nn=Ni(function(t,e){var r=null==t?0:t.length,a=$r(t,e);return Ya(t,ue(e,function(t){return nn(t,r)?+t:t}).sort(di)),a});function Qn(t){return null==t?t:ur.call(t)}var Vn=Aa(function(t){return Ga(ia(t,1,Io,!0))}),zn=Aa(function(t){var e=En(t);return Io(e)&&(e=void 0),Ga(ia(t,1,Io,!0),Ui(e,2))}),Bn=Aa(function(t){var e=En(t);return e="function"==typeof e?e:void 0,Ga(ia(t,1,Io,!0),void 0,e)});function $n(t){if(!t||!t.length)return[];var e=0;return t=se(t,function(t){if(Io(t))return e=nr(t.length,e),!0}),we(e,function(e){return ue(t,Te(e))})}function Un(t,e){if(!t||!t.length)return[];var r=$n(t);return null==e?r:ue(r,function(t){return re(e,void 0,t)})}var Jn=Aa(function(t,e){return Io(t)?Xr(t,e):[]}),Gn=Aa(function(t){return ei(se(t,Io))}),qn=Aa(function(t){var e=En(t);return Io(e)&&(e=void 0),ei(se(t,Io),Ui(e,2))}),Xn=Aa(function(t){var e=En(t);return e="function"==typeof e?e:void 0,ei(se(t,Io),void 0,e)}),Kn=Aa($n),to=Aa(function(t){var e=t.length,r=e>1?t[e-1]:void 0;return r="function"==typeof r?(t.pop(),r):void 0,Un(t,r)});function eo(t){var e=Lr(t);return e.__chain__=!0,e}function ro(t,e){return e(t)}var ao=Ni(function(t){var e=t.length,r=e?t[0]:0,a=this.__wrapped__,i=function(e){return $r(e,t)};return!(e>1||this.__actions__.length)&&a instanceof Mr&&nn(r)?((a=a.slice(r,+r+(e?1:0))).__actions__.push({func:ro,args:[i],thisArg:void 0}),new Cr(a,this.__chain__).thru(function(t){return e&&!t.length&&t.push(void 0),t})):this.thru(i)}),io=yi(function(t,e,r){Tt.call(t,r)?++t[r]:Br(t,r,1)}),no=Si(Zn),oo=Si(Yn);function so(t,e){return(jo(t)?ie:Kr)(t,Ui(e,3))}function lo(t,e){return(jo(t)?ne:ta)(t,Ui(e,3))}var co=yi(function(t,e,r){Tt.call(t,r)?t[r].push(e):Br(t,r,[e])}),uo=Aa(function(t,e,r){var i=-1,n="function"==typeof e,o=Ao(t)?a(t.length):[];return Kr(t,function(t){o[++i]=n?re(e,t,r):ya(t,e,r)}),o}),ho=yi(function(t,e,r){Br(t,r,e)});function po(t,e){return(jo(t)?ue:ka)(t,Ui(e,3))}var fo=yi(function(t,e,r){t[r?0:1].push(e)},function(){return[[],[]]}),go=Aa(function(t,e){if(null==t)return[];var r=e.length;return r>1&&on(t,e[0],e[1])?e=[]:r>2&&on(e[0],e[1],e[2])&&(e=[e[0]]),Ca(t,ia(e,1),[])}),bo=Ge||function(){return Vt.Date.now()};function yo(t,e,r){return e=r?void 0:e,Ii(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:e)}function vo(t,e){var r;if("function"!=typeof e)throw new yt(i);return t=is(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}var mo=Aa(function(t,e,r){var a=1;if(r.length){var i=He(r,$i(mo));a|=32}return Ii(t,a,e,r,i)}),xo=Aa(function(t,e,r){var a=3;if(r.length){var i=He(r,$i(xo));a|=32}return Ii(e,a,t,r,i)});function Oo(t,e,r){var a,n,o,s,l,c,u=0,h=!1,d=!1,p=!0;if("function"!=typeof t)throw new yt(i);function f(e){var r=a,i=n;return a=n=void 0,u=e,s=t.apply(i,r)}function g(t){return u=t,l=vn(y,e),h?f(t):s}function b(t){var r=t-c;return void 0===c||r>=e||r<0||d&&t-u>=o}function y(){var t=bo();if(b(t))return v(t);l=vn(y,function(t){var r=e-(t-c);return d?or(r,o-(t-u)):r}(t))}function v(t){return l=void 0,p&&a?f(t):(a=n=void 0,s)}function m(){var t=bo(),r=b(t);if(a=arguments,n=this,c=t,r){if(void 0===l)return g(c);if(d)return li(l),l=vn(y,e),f(c)}return void 0===l&&(l=vn(y,e)),s}return e=os(e)||0,Vo(r)&&(h=!!r.leading,o=(d="maxWait"in r)?nr(os(r.maxWait)||0,e):o,p="trailing"in r?!!r.trailing:p),m.cancel=function(){void 0!==l&&li(l),u=0,a=c=n=l=void 0},m.flush=function(){return void 0===l?s:v(bo())},m}var To=Aa(function(t,e){return qr(t,1,e)}),Do=Aa(function(t,e,r){return qr(t,os(e)||0,r)});function So(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new yt(i);var r=function(){var a=arguments,i=e?e.apply(this,a):a[0],n=r.cache;if(n.has(i))return n.get(i);var o=t.apply(this,a);return r.cache=n.set(i,o)||n,o};return r.cache=new(So.Cache||jr),r}function ko(t){if("function"!=typeof t)throw new yt(i);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}So.Cache=jr;var wo=oi(function(t,e){var r=(e=1==e.length&&jo(e[0])?ue(e[0],_e(Ui())):ue(ia(e,1),_e(Ui()))).length;return Aa(function(a){for(var i=-1,n=or(a.length,r);++i<n;)a[i]=e[i].call(this,a[i]);return re(t,this,a)})}),Lo=Aa(function(t,e){return Ii(t,32,void 0,e,He(e,$i(Lo)))}),_o=Aa(function(t,e){return Ii(t,64,void 0,e,He(e,$i(_o)))}),Po=Ni(function(t,e){return Ii(t,256,void 0,void 0,void 0,e)});function Co(t,e){return t===e||t!=t&&e!=e}var Mo=Zi(pa),Zo=Zi(function(t,e){return t>=e}),Yo=va(function(){return arguments}())?va:function(t){return zo(t)&&Tt.call(t,"callee")&&!Bt.call(t,"callee")},jo=a.isArray,Wo=Gt?_e(Gt):function(t){return zo(t)&&da(t)==T};function Ao(t){return null!=t&&Qo(t.length)&&!Fo(t)}function Io(t){return zo(t)&&Ao(t)}var Ro=er||ol,Eo=qt?_e(qt):function(t){return zo(t)&&da(t)==u};function Ho(t){if(!zo(t))return!1;var e=da(t);return e==h||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Uo(t)}function Fo(t){if(!Vo(t))return!1;var e=da(t);return e==d||e==p||"[object AsyncFunction]"==e||"[object Proxy]"==e}function No(t){return"number"==typeof t&&t==is(t)}function Qo(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Vo(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function zo(t){return null!=t&&"object"==typeof t}var Bo=Xt?_e(Xt):function(t){return zo(t)&&tn(t)==f};function $o(t){return"number"==typeof t||zo(t)&&da(t)==g}function Uo(t){if(!zo(t)||da(t)!=b)return!1;var e=Qt(t);if(null===e)return!0;var r=Tt.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&Ot.call(r)==wt}var Jo=Kt?_e(Kt):function(t){return zo(t)&&da(t)==y},Go=te?_e(te):function(t){return zo(t)&&tn(t)==v};function qo(t){return"string"==typeof t||!jo(t)&&zo(t)&&da(t)==m}function Xo(t){return"symbol"==typeof t||zo(t)&&da(t)==x}var Ko=ee?_e(ee):function(t){return zo(t)&&Qo(t.length)&&!!It[da(t)]},ts=Zi(Sa),es=Zi(function(t,e){return t<=e});function rs(t){if(!t)return[];if(Ao(t))return qo(t)?Ve(t):gi(t);if(ge&&t[ge])return function(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}(t[ge]());var e=tn(t);return(e==f?Re:e==v?Fe:Cs)(t)}function as(t){return t?1/0===(t=os(t))||-1/0===t?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function is(t){var e=as(t),r=e%1;return e==e?r?e-r:e:0}function ns(t){return t?Ur(is(t),0,4294967295):0}function os(t){if("number"==typeof t)return t;if(Xo(t))return NaN;if(Vo(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Vo(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Le(t);var r=it.test(t);return r||ot.test(t)?Ft(t.slice(2),r?2:8):at.test(t)?NaN:+t}function ss(t){return bi(t,Ts(t))}function ls(t){return null==t?"":Ja(t)}var cs=vi(function(t,e){if(un(e)||Ao(e))bi(e,Os(e),t);else for(var r in e)Tt.call(e,r)&&Nr(t,r,e[r])}),us=vi(function(t,e){bi(e,Ts(e),t)}),hs=vi(function(t,e,r,a){bi(e,Ts(e),t,a)}),ds=vi(function(t,e,r,a){bi(e,Os(e),t,a)}),ps=Ni($r),fs=Aa(function(t,e){t=ft(t);var r=-1,a=e.length,i=a>2?e[2]:void 0;for(i&&on(e[0],e[1],i)&&(a=1);++r<a;)for(var n=e[r],o=Ts(n),s=-1,l=o.length;++s<l;){var c=o[s],u=t[c];(void 0===u||Co(u,mt[c])&&!Tt.call(t,c))&&(t[c]=n[c])}return t}),gs=Aa(function(t){return t.push(void 0,Ei),re(Ss,void 0,t)});function bs(t,e,r){var a=null==t?void 0:ua(t,e);return void 0===a?r:a}function ys(t,e){return null!=t&&en(t,e,ga)}var vs=Li(function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=kt.call(e)),t[e]=r},Vs($s)),ms=Li(function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=kt.call(e)),Tt.call(t,e)?t[e].push(r):t[e]=[r]},Ui),xs=Aa(ya);function Os(t){return Ao(t)?Ir(t):Da(t)}function Ts(t){return Ao(t)?Ir(t,!0):function(t){if(!Vo(t))return function(t){var e=[];if(null!=t)for(var r in ft(t))e.push(r);return e}(t);var e=un(t),r=[];for(var a in t)("constructor"!=a||!e&&Tt.call(t,a))&&r.push(a);return r}(t)}var Ds=vi(function(t,e,r){_a(t,e,r)}),Ss=vi(function(t,e,r,a){_a(t,e,r,a)}),ks=Ni(function(t,e){var r={};if(null==t)return r;var a=!1;e=ue(e,function(e){return e=ni(e,t),a||(a=e.length>1),e}),bi(t,Vi(t),r),a&&(r=Jr(r,7,Hi));for(var i=e.length;i--;)qa(r,e[i]);return r}),ws=Ni(function(t,e){return null==t?{}:function(t,e){return Ma(t,e,function(e,r){return ys(t,r)})}(t,e)});function Ls(t,e){if(null==t)return{};var r=ue(Vi(t),function(t){return[t]});return e=Ui(e),Ma(t,r,function(t,r){return e(t,r[0])})}var _s=Ai(Os),Ps=Ai(Ts);function Cs(t){return null==t?[]:Pe(t,Os(t))}var Ms=Ti(function(t,e,r){return e=e.toLowerCase(),t+(r?Zs(e):e)});function Zs(t){return Hs(ls(t).toLowerCase())}function Ys(t){return(t=ls(t))&&t.replace(lt,je).replace(Ct,"")}var js=Ti(function(t,e,r){return t+(r?"-":"")+e.toLowerCase()}),Ws=Ti(function(t,e,r){return t+(r?" ":"")+e.toLowerCase()}),As=Oi("toLowerCase"),Is=Ti(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}),Rs=Ti(function(t,e,r){return t+(r?" ":"")+Hs(e)}),Es=Ti(function(t,e,r){return t+(r?" ":"")+e.toUpperCase()}),Hs=Oi("toUpperCase");function Fs(t,e,r){return t=ls(t),void 0===(e=r?void 0:e)?function(t){return jt.test(t)}(t)?function(t){return t.match(Zt)||[]}(t):function(t){return t.match(X)||[]}(t):t.match(e)||[]}var Ns=Aa(function(t,e){try{return re(t,void 0,e)}catch(r){return Ho(r)?r:new ht(r)}}),Qs=Ni(function(t,e){return ie(e,function(e){e=wn(e),Br(t,e,mo(t[e],t))}),t});function Vs(t){return function(){return t}}var zs=ki(),Bs=ki(!0);function $s(t){return t}function Us(t){return Ta("function"==typeof t?t:Jr(t,1))}var Js=Aa(function(t,e){return function(r){return ya(r,t,e)}}),Gs=Aa(function(t,e){return function(r){return ya(t,r,e)}});function qs(t,e,r){var a=Os(e),i=ca(e,a);null!=r||Vo(e)&&(i.length||!a.length)||(r=e,e=t,t=this,i=ca(e,Os(e)));var n=!(Vo(r)&&"chain"in r&&!r.chain),o=Fo(t);return ie(i,function(r){var a=e[r];t[r]=a,o&&(t.prototype[r]=function(){var e=this.__chain__;if(n||e){var r=t(this.__wrapped__),i=r.__actions__=gi(this.__actions__);return i.push({func:a,args:arguments,thisArg:t}),r.__chain__=e,r}return a.apply(t,he([this.value()],arguments))})}),t}function Xs(){}var Ks=Pi(ue),tl=Pi(oe),el=Pi(fe);function rl(t){return sn(t)?Te(wn(t)):function(t){return function(e){return ua(e,t)}}(t)}var al=Mi(),il=Mi(!0);function nl(){return[]}function ol(){return!1}var sl,ll=_i(function(t,e){return t+e},0),cl=ji("ceil"),ul=_i(function(t,e){return t/e},1),hl=ji("floor"),dl=_i(function(t,e){return t*e},1),pl=ji("round"),fl=_i(function(t,e){return t-e},0);return Lr.after=function(t,e){if("function"!=typeof e)throw new yt(i);return t=is(t),function(){if(--t<1)return e.apply(this,arguments)}},Lr.ary=yo,Lr.assign=cs,Lr.assignIn=us,Lr.assignInWith=hs,Lr.assignWith=ds,Lr.at=ps,Lr.before=vo,Lr.bind=mo,Lr.bindAll=Qs,Lr.bindKey=xo,Lr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return jo(t)?t:[t]},Lr.chain=eo,Lr.chunk=function(t,e,r){e=(r?on(t,e,r):void 0===e)?1:nr(is(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var n=0,o=0,s=a(Xe(i/e));n<i;)s[o++]=Qa(t,n,n+=e);return s},Lr.compact=function(t){for(var e=-1,r=null==t?0:t.length,a=0,i=[];++e<r;){var n=t[e];n&&(i[a++]=n)}return i},Lr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=a(t-1),r=arguments[0],i=t;i--;)e[i-1]=arguments[i];return he(jo(r)?gi(r):[r],ia(e,1))},Lr.cond=function(t){var e=null==t?0:t.length,r=Ui();return t=e?ue(t,function(t){if("function"!=typeof t[1])throw new yt(i);return[r(t[0]),t[1]]}):[],Aa(function(r){for(var a=-1;++a<e;){var i=t[a];if(re(i[0],this,r))return re(i[1],this,r)}})},Lr.conforms=function(t){return function(t){var e=Os(t);return function(r){return Gr(r,t,e)}}(Jr(t,1))},Lr.constant=Vs,Lr.countBy=io,Lr.create=function(t,e){var r=_r(t);return null==e?r:zr(r,e)},Lr.curry=function t(e,r,a){var i=Ii(e,8,void 0,void 0,void 0,void 0,void 0,r=a?void 0:r);return i.placeholder=t.placeholder,i},Lr.curryRight=function t(e,r,a){var i=Ii(e,16,void 0,void 0,void 0,void 0,void 0,r=a?void 0:r);return i.placeholder=t.placeholder,i},Lr.debounce=Oo,Lr.defaults=fs,Lr.defaultsDeep=gs,Lr.defer=To,Lr.delay=Do,Lr.difference=Pn,Lr.differenceBy=Cn,Lr.differenceWith=Mn,Lr.drop=function(t,e,r){var a=null==t?0:t.length;return a?Qa(t,(e=r||void 0===e?1:is(e))<0?0:e,a):[]},Lr.dropRight=function(t,e,r){var a=null==t?0:t.length;return a?Qa(t,0,(e=a-(e=r||void 0===e?1:is(e)))<0?0:e):[]},Lr.dropRightWhile=function(t,e){return t&&t.length?Ka(t,Ui(e,3),!0,!0):[]},Lr.dropWhile=function(t,e){return t&&t.length?Ka(t,Ui(e,3),!0):[]},Lr.fill=function(t,e,r,a){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&on(t,e,r)&&(r=0,a=i),function(t,e,r,a){var i=t.length;for((r=is(r))<0&&(r=-r>i?0:i+r),(a=void 0===a||a>i?i:is(a))<0&&(a+=i),a=r>a?0:ns(a);r<a;)t[r++]=e;return t}(t,e,r,a)):[]},Lr.filter=function(t,e){return(jo(t)?se:aa)(t,Ui(e,3))},Lr.flatMap=function(t,e){return ia(po(t,e),1)},Lr.flatMapDeep=function(t,e){return ia(po(t,e),1/0)},Lr.flatMapDepth=function(t,e,r){return r=void 0===r?1:is(r),ia(po(t,e),r)},Lr.flatten=jn,Lr.flattenDeep=function(t){return null!=t&&t.length?ia(t,1/0):[]},Lr.flattenDepth=function(t,e){return null!=t&&t.length?ia(t,e=void 0===e?1:is(e)):[]},Lr.flip=function(t){return Ii(t,512)},Lr.flow=zs,Lr.flowRight=Bs,Lr.fromPairs=function(t){for(var e=-1,r=null==t?0:t.length,a={};++e<r;){var i=t[e];a[i[0]]=i[1]}return a},Lr.functions=function(t){return null==t?[]:ca(t,Os(t))},Lr.functionsIn=function(t){return null==t?[]:ca(t,Ts(t))},Lr.groupBy=co,Lr.initial=function(t){return null!=t&&t.length?Qa(t,0,-1):[]},Lr.intersection=An,Lr.intersectionBy=In,Lr.intersectionWith=Rn,Lr.invert=vs,Lr.invertBy=ms,Lr.invokeMap=uo,Lr.iteratee=Us,Lr.keyBy=ho,Lr.keys=Os,Lr.keysIn=Ts,Lr.map=po,Lr.mapKeys=function(t,e){var r={};return e=Ui(e,3),sa(t,function(t,a,i){Br(r,e(t,a,i),t)}),r},Lr.mapValues=function(t,e){var r={};return e=Ui(e,3),sa(t,function(t,a,i){Br(r,a,e(t,a,i))}),r},Lr.matches=function(t){return wa(Jr(t,1))},Lr.matchesProperty=function(t,e){return La(t,Jr(e,1))},Lr.memoize=So,Lr.merge=Ds,Lr.mergeWith=Ss,Lr.method=Js,Lr.methodOf=Gs,Lr.mixin=qs,Lr.negate=ko,Lr.nthArg=function(t){return t=is(t),Aa(function(e){return Pa(e,t)})},Lr.omit=ks,Lr.omitBy=function(t,e){return Ls(t,ko(Ui(e)))},Lr.once=function(t){return vo(2,t)},Lr.orderBy=function(t,e,r,a){return null==t?[]:(jo(e)||(e=null==e?[]:[e]),jo(r=a?void 0:r)||(r=null==r?[]:[r]),Ca(t,e,r))},Lr.over=Ks,Lr.overArgs=wo,Lr.overEvery=tl,Lr.overSome=el,Lr.partial=Lo,Lr.partialRight=_o,Lr.partition=fo,Lr.pick=ws,Lr.pickBy=Ls,Lr.property=rl,Lr.propertyOf=function(t){return function(e){return null==t?void 0:ua(t,e)}},Lr.pull=Hn,Lr.pullAll=Fn,Lr.pullAllBy=function(t,e,r){return t&&t.length&&e&&e.length?Za(t,e,Ui(r,2)):t},Lr.pullAllWith=function(t,e,r){return t&&t.length&&e&&e.length?Za(t,e,void 0,r):t},Lr.pullAt=Nn,Lr.range=al,Lr.rangeRight=il,Lr.rearg=Po,Lr.reject=function(t,e){return(jo(t)?se:aa)(t,ko(Ui(e,3)))},Lr.remove=function(t,e){var r=[];if(!t||!t.length)return r;var a=-1,i=[],n=t.length;for(e=Ui(e,3);++a<n;){var o=t[a];e(o,a,t)&&(r.push(o),i.push(a))}return Ya(t,i),r},Lr.rest=function(t,e){if("function"!=typeof t)throw new yt(i);return Aa(t,e=void 0===e?e:is(e))},Lr.reverse=Qn,Lr.sampleSize=function(t,e,r){return e=(r?on(t,e,r):void 0===e)?1:is(e),(jo(t)?Er:Ra)(t,e)},Lr.set=function(t,e,r){return null==t?t:Ea(t,e,r)},Lr.setWith=function(t,e,r,a){return a="function"==typeof a?a:void 0,null==t?t:Ea(t,e,r,a)},Lr.shuffle=function(t){return(jo(t)?Hr:Na)(t)},Lr.slice=function(t,e,r){var a=null==t?0:t.length;return a?(r&&"number"!=typeof r&&on(t,e,r)?(e=0,r=a):(e=null==e?0:is(e),r=void 0===r?a:is(r)),Qa(t,e,r)):[]},Lr.sortBy=go,Lr.sortedUniq=function(t){return t&&t.length?$a(t):[]},Lr.sortedUniqBy=function(t,e){return t&&t.length?$a(t,Ui(e,2)):[]},Lr.split=function(t,e,r){return r&&"number"!=typeof r&&on(t,e,r)&&(e=r=void 0),(r=void 0===r?4294967295:r>>>0)?(t=ls(t))&&("string"==typeof e||null!=e&&!Jo(e))&&!(e=Ja(e))&&Ie(t)?si(Ve(t),0,r):t.split(e,r):[]},Lr.spread=function(t,e){if("function"!=typeof t)throw new yt(i);return e=null==e?0:nr(is(e),0),Aa(function(r){var a=r[e],i=si(r,0,e);return a&&he(i,a),re(t,this,i)})},Lr.tail=function(t){var e=null==t?0:t.length;return e?Qa(t,1,e):[]},Lr.take=function(t,e,r){return t&&t.length?Qa(t,0,(e=r||void 0===e?1:is(e))<0?0:e):[]},Lr.takeRight=function(t,e,r){var a=null==t?0:t.length;return a?Qa(t,(e=a-(e=r||void 0===e?1:is(e)))<0?0:e,a):[]},Lr.takeRightWhile=function(t,e){return t&&t.length?Ka(t,Ui(e,3),!1,!0):[]},Lr.takeWhile=function(t,e){return t&&t.length?Ka(t,Ui(e,3)):[]},Lr.tap=function(t,e){return e(t),t},Lr.throttle=function(t,e,r){var a=!0,n=!0;if("function"!=typeof t)throw new yt(i);return Vo(r)&&(a="leading"in r?!!r.leading:a,n="trailing"in r?!!r.trailing:n),Oo(t,e,{leading:a,maxWait:e,trailing:n})},Lr.thru=ro,Lr.toArray=rs,Lr.toPairs=_s,Lr.toPairsIn=Ps,Lr.toPath=function(t){return jo(t)?ue(t,wn):Xo(t)?[t]:gi(kn(ls(t)))},Lr.toPlainObject=ss,Lr.transform=function(t,e,r){var a=jo(t),i=a||Ro(t)||Ko(t);if(e=Ui(e,4),null==r){var n=t&&t.constructor;r=i?a?new n:[]:Vo(t)&&Fo(n)?_r(Qt(t)):{}}return(i?ie:sa)(t,function(t,a,i){return e(r,t,a,i)}),r},Lr.unary=function(t){return yo(t,1)},Lr.union=Vn,Lr.unionBy=zn,Lr.unionWith=Bn,Lr.uniq=function(t){return t&&t.length?Ga(t):[]},Lr.uniqBy=function(t,e){return t&&t.length?Ga(t,Ui(e,2)):[]},Lr.uniqWith=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?Ga(t,void 0,e):[]},Lr.unset=function(t,e){return null==t||qa(t,e)},Lr.unzip=$n,Lr.unzipWith=Un,Lr.update=function(t,e,r){return null==t?t:Xa(t,e,ii(r))},Lr.updateWith=function(t,e,r,a){return a="function"==typeof a?a:void 0,null==t?t:Xa(t,e,ii(r),a)},Lr.values=Cs,Lr.valuesIn=function(t){return null==t?[]:Pe(t,Ts(t))},Lr.without=Jn,Lr.words=Fs,Lr.wrap=function(t,e){return Lo(ii(e),t)},Lr.xor=Gn,Lr.xorBy=qn,Lr.xorWith=Xn,Lr.zip=Kn,Lr.zipObject=function(t,e){return ri(t||[],e||[],Nr)},Lr.zipObjectDeep=function(t,e){return ri(t||[],e||[],Ea)},Lr.zipWith=to,Lr.entries=_s,Lr.entriesIn=Ps,Lr.extend=us,Lr.extendWith=hs,qs(Lr,Lr),Lr.add=ll,Lr.attempt=Ns,Lr.camelCase=Ms,Lr.capitalize=Zs,Lr.ceil=cl,Lr.clamp=function(t,e,r){return void 0===r&&(r=e,e=void 0),void 0!==r&&(r=(r=os(r))==r?r:0),void 0!==e&&(e=(e=os(e))==e?e:0),Ur(os(t),e,r)},Lr.clone=function(t){return Jr(t,4)},Lr.cloneDeep=function(t){return Jr(t,5)},Lr.cloneDeepWith=function(t,e){return Jr(t,5,e="function"==typeof e?e:void 0)},Lr.cloneWith=function(t,e){return Jr(t,4,e="function"==typeof e?e:void 0)},Lr.conformsTo=function(t,e){return null==e||Gr(t,e,Os(e))},Lr.deburr=Ys,Lr.defaultTo=function(t,e){return null==t||t!=t?e:t},Lr.divide=ul,Lr.endsWith=function(t,e,r){t=ls(t),e=Ja(e);var a=t.length,i=r=void 0===r?a:Ur(is(r),0,a);return(r-=e.length)>=0&&t.slice(r,i)==e},Lr.eq=Co,Lr.escape=function(t){return(t=ls(t))&&R.test(t)?t.replace(A,We):t},Lr.escapeRegExp=function(t){return(t=ls(t))&&B.test(t)?t.replace(z,"\\$&"):t},Lr.every=function(t,e,r){var a=jo(t)?oe:ea;return r&&on(t,e,r)&&(e=void 0),a(t,Ui(e,3))},Lr.find=no,Lr.findIndex=Zn,Lr.findKey=function(t,e){return be(t,Ui(e,3),sa)},Lr.findLast=oo,Lr.findLastIndex=Yn,Lr.findLastKey=function(t,e){return be(t,Ui(e,3),la)},Lr.floor=hl,Lr.forEach=so,Lr.forEachRight=lo,Lr.forIn=function(t,e){return null==t?t:na(t,Ui(e,3),Ts)},Lr.forInRight=function(t,e){return null==t?t:oa(t,Ui(e,3),Ts)},Lr.forOwn=function(t,e){return t&&sa(t,Ui(e,3))},Lr.forOwnRight=function(t,e){return t&&la(t,Ui(e,3))},Lr.get=bs,Lr.gt=Mo,Lr.gte=Zo,Lr.has=function(t,e){return null!=t&&en(t,e,fa)},Lr.hasIn=ys,Lr.head=Wn,Lr.identity=$s,Lr.includes=function(t,e,r,a){t=Ao(t)?t:Cs(t),r=r&&!a?is(r):0;var i=t.length;return r<0&&(r=nr(i+r,0)),qo(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&ve(t,e,r)>-1},Lr.indexOf=function(t,e,r){var a=null==t?0:t.length;if(!a)return-1;var i=null==r?0:is(r);return i<0&&(i=nr(a+i,0)),ve(t,e,i)},Lr.inRange=function(t,e,r){return e=as(e),void 0===r?(r=e,e=0):r=as(r),function(t,e,r){return t>=or(e,r)&&t<nr(e,r)}(t=os(t),e,r)},Lr.invoke=xs,Lr.isArguments=Yo,Lr.isArray=jo,Lr.isArrayBuffer=Wo,Lr.isArrayLike=Ao,Lr.isArrayLikeObject=Io,Lr.isBoolean=function(t){return!0===t||!1===t||zo(t)&&da(t)==c},Lr.isBuffer=Ro,Lr.isDate=Eo,Lr.isElement=function(t){return zo(t)&&1===t.nodeType&&!Uo(t)},Lr.isEmpty=function(t){if(null==t)return!0;if(Ao(t)&&(jo(t)||"string"==typeof t||"function"==typeof t.splice||Ro(t)||Ko(t)||Yo(t)))return!t.length;var e=tn(t);if(e==f||e==v)return!t.size;if(un(t))return!Da(t).length;for(var r in t)if(Tt.call(t,r))return!1;return!0},Lr.isEqual=function(t,e){return ma(t,e)},Lr.isEqualWith=function(t,e,r){var a=(r="function"==typeof r?r:void 0)?r(t,e):void 0;return void 0===a?ma(t,e,void 0,r):!!a},Lr.isError=Ho,Lr.isFinite=function(t){return"number"==typeof t&&rr(t)},Lr.isFunction=Fo,Lr.isInteger=No,Lr.isLength=Qo,Lr.isMap=Bo,Lr.isMatch=function(t,e){return t===e||xa(t,e,Gi(e))},Lr.isMatchWith=function(t,e,r){return r="function"==typeof r?r:void 0,xa(t,e,Gi(e),r)},Lr.isNaN=function(t){return $o(t)&&t!=+t},Lr.isNative=function(t){if(cn(t))throw new ht("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Oa(t)},Lr.isNil=function(t){return null==t},Lr.isNull=function(t){return null===t},Lr.isNumber=$o,Lr.isObject=Vo,Lr.isObjectLike=zo,Lr.isPlainObject=Uo,Lr.isRegExp=Jo,Lr.isSafeInteger=function(t){return No(t)&&t>=-9007199254740991&&t<=9007199254740991},Lr.isSet=Go,Lr.isString=qo,Lr.isSymbol=Xo,Lr.isTypedArray=Ko,Lr.isUndefined=function(t){return void 0===t},Lr.isWeakMap=function(t){return zo(t)&&tn(t)==O},Lr.isWeakSet=function(t){return zo(t)&&"[object WeakSet]"==da(t)},Lr.join=function(t,e){return null==t?"":ar.call(t,e)},Lr.kebabCase=js,Lr.last=En,Lr.lastIndexOf=function(t,e,r){var a=null==t?0:t.length;if(!a)return-1;var i=a;return void 0!==r&&(i=(i=is(r))<0?nr(a+i,0):or(i,a-1)),e==e?function(t,e,r){for(var a=r+1;a--;)if(t[a]===e)return a;return a}(t,e,i):ye(t,xe,i,!0)},Lr.lowerCase=Ws,Lr.lowerFirst=As,Lr.lt=ts,Lr.lte=es,Lr.max=function(t){return t&&t.length?ra(t,$s,pa):void 0},Lr.maxBy=function(t,e){return t&&t.length?ra(t,Ui(e,2),pa):void 0},Lr.mean=function(t){return Oe(t,$s)},Lr.meanBy=function(t,e){return Oe(t,Ui(e,2))},Lr.min=function(t){return t&&t.length?ra(t,$s,Sa):void 0},Lr.minBy=function(t,e){return t&&t.length?ra(t,Ui(e,2),Sa):void 0},Lr.stubArray=nl,Lr.stubFalse=ol,Lr.stubObject=function(){return{}},Lr.stubString=function(){return""},Lr.stubTrue=function(){return!0},Lr.multiply=dl,Lr.nth=function(t,e){return t&&t.length?Pa(t,is(e)):void 0},Lr.noConflict=function(){return Vt._===this&&(Vt._=Lt),this},Lr.noop=Xs,Lr.now=bo,Lr.pad=function(t,e,r){t=ls(t);var a=(e=is(e))?Qe(t):0;if(!e||a>=e)return t;var i=(e-a)/2;return Ci(Ke(i),r)+t+Ci(Xe(i),r)},Lr.padEnd=function(t,e,r){t=ls(t);var a=(e=is(e))?Qe(t):0;return e&&a<e?t+Ci(e-a,r):t},Lr.padStart=function(t,e,r){t=ls(t);var a=(e=is(e))?Qe(t):0;return e&&a<e?Ci(e-a,r)+t:t},Lr.parseInt=function(t,e,r){return r||null==e?e=0:e&&(e=+e),lr(ls(t).replace($,""),e||0)},Lr.random=function(t,e,r){if(r&&"boolean"!=typeof r&&on(t,e,r)&&(e=r=void 0),void 0===r&&("boolean"==typeof e?(r=e,e=void 0):"boolean"==typeof t&&(r=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=as(t),void 0===e?(e=t,t=0):e=as(e)),t>e){var a=t;t=e,e=a}if(r||t%1||e%1){var i=cr();return or(t+i*(e-t+Ht("1e-"+((i+"").length-1))),e)}return ja(t,e)},Lr.reduce=function(t,e,r){var a=jo(t)?de:Se,i=arguments.length<3;return a(t,Ui(e,4),r,i,Kr)},Lr.reduceRight=function(t,e,r){var a=jo(t)?pe:Se,i=arguments.length<3;return a(t,Ui(e,4),r,i,ta)},Lr.repeat=function(t,e,r){return e=(r?on(t,e,r):void 0===e)?1:is(e),Wa(ls(t),e)},Lr.replace=function(){var t=arguments,e=ls(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Lr.result=function(t,e,r){var a=-1,i=(e=ni(e,t)).length;for(i||(i=1,t=void 0);++a<i;){var n=null==t?void 0:t[wn(e[a])];void 0===n&&(a=i,n=r),t=Fo(n)?n.call(t):n}return t},Lr.round=pl,Lr.runInContext=t,Lr.sample=function(t){return(jo(t)?Rr:Ia)(t)},Lr.size=function(t){if(null==t)return 0;if(Ao(t))return qo(t)?Qe(t):t.length;var e=tn(t);return e==f||e==v?t.size:Da(t).length},Lr.snakeCase=Is,Lr.some=function(t,e,r){var a=jo(t)?fe:Va;return r&&on(t,e,r)&&(e=void 0),a(t,Ui(e,3))},Lr.sortedIndex=function(t,e){return za(t,e)},Lr.sortedIndexBy=function(t,e,r){return Ba(t,e,Ui(r,2))},Lr.sortedIndexOf=function(t,e){var r=null==t?0:t.length;if(r){var a=za(t,e);if(a<r&&Co(t[a],e))return a}return-1},Lr.sortedLastIndex=function(t,e){return za(t,e,!0)},Lr.sortedLastIndexBy=function(t,e,r){return Ba(t,e,Ui(r,2),!0)},Lr.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var r=za(t,e,!0)-1;if(Co(t[r],e))return r}return-1},Lr.startCase=Rs,Lr.startsWith=function(t,e,r){return t=ls(t),r=null==r?0:Ur(is(r),0,t.length),e=Ja(e),t.slice(r,r+e.length)==e},Lr.subtract=fl,Lr.sum=function(t){return t&&t.length?ke(t,$s):0},Lr.sumBy=function(t,e){return t&&t.length?ke(t,Ui(e,2)):0},Lr.template=function(t,e,r){var a=Lr.templateSettings;r&&on(t,e,r)&&(e=void 0),t=ls(t),e=hs({},e,a,Ri);var i,n,o=hs({},e.imports,a.imports,Ri),s=Os(o),l=Pe(o,s),c=0,u=e.interpolate||ct,h="__p += '",d=gt((e.escape||ct).source+"|"+u.source+"|"+(u===F?et:ct).source+"|"+(e.evaluate||ct).source+"|$","g"),p="//# sourceURL="+(Tt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++At+"]")+"\n";t.replace(d,function(e,r,a,o,s,l){return a||(a=o),h+=t.slice(c,l).replace(ut,Ae),r&&(i=!0,h+="' +\n__e("+r+") +\n'"),s&&(n=!0,h+="';\n"+s+";\n__p += '"),a&&(h+="' +\n((__t = ("+a+")) == null ? '' : __t) +\n'"),c=l+e.length,e}),h+="';\n";var f=Tt.call(e,"variable")&&e.variable;if(f){if(K.test(f))throw new ht("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(n?h.replace(Z,""):h).replace(Y,"$1").replace(j,"$1;"),h="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(n?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Ns(function(){return dt(s,p+"return "+h).apply(void 0,l)});if(g.source=h,Ho(g))throw g;return g},Lr.times=function(t,e){if((t=is(t))<1||t>9007199254740991)return[];var r=4294967295,a=or(t,4294967295);t-=4294967295;for(var i=we(a,e=Ui(e));++r<t;)e(r);return i},Lr.toFinite=as,Lr.toInteger=is,Lr.toLength=ns,Lr.toLower=function(t){return ls(t).toLowerCase()},Lr.toNumber=os,Lr.toSafeInteger=function(t){return t?Ur(is(t),-9007199254740991,9007199254740991):0===t?t:0},Lr.toString=ls,Lr.toUpper=function(t){return ls(t).toUpperCase()},Lr.trim=function(t,e,r){if((t=ls(t))&&(r||void 0===e))return Le(t);if(!t||!(e=Ja(e)))return t;var a=Ve(t),i=Ve(e);return si(a,Me(a,i),Ze(a,i)+1).join("")},Lr.trimEnd=function(t,e,r){if((t=ls(t))&&(r||void 0===e))return t.slice(0,ze(t)+1);if(!t||!(e=Ja(e)))return t;var a=Ve(t);return si(a,0,Ze(a,Ve(e))+1).join("")},Lr.trimStart=function(t,e,r){if((t=ls(t))&&(r||void 0===e))return t.replace($,"");if(!t||!(e=Ja(e)))return t;var a=Ve(t);return si(a,Me(a,Ve(e))).join("")},Lr.truncate=function(t,e){var r=30,a="...";if(Vo(e)){var i="separator"in e?e.separator:i;r="length"in e?is(e.length):r,a="omission"in e?Ja(e.omission):a}var n=(t=ls(t)).length;if(Ie(t)){var o=Ve(t);n=o.length}if(r>=n)return t;var s=r-Qe(a);if(s<1)return a;var l=o?si(o,0,s).join(""):t.slice(0,s);if(void 0===i)return l+a;if(o&&(s+=l.length-s),Jo(i)){if(t.slice(s).search(i)){var c,u=l;for(i.global||(i=gt(i.source,ls(rt.exec(i))+"g")),i.lastIndex=0;c=i.exec(u);)var h=c.index;l=l.slice(0,void 0===h?s:h)}}else if(t.indexOf(Ja(i),s)!=s){var d=l.lastIndexOf(i);d>-1&&(l=l.slice(0,d))}return l+a},Lr.unescape=function(t){return(t=ls(t))&&I.test(t)?t.replace(W,Be):t},Lr.uniqueId=function(t){var e=++Dt;return ls(t)+e},Lr.upperCase=Es,Lr.upperFirst=Hs,Lr.each=so,Lr.eachRight=lo,Lr.first=Wn,qs(Lr,(sl={},sa(Lr,function(t,e){Tt.call(Lr.prototype,e)||(sl[e]=t)}),sl),{chain:!1}),Lr.VERSION="4.17.21",ie(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){Lr[t].placeholder=Lr}),ie(["drop","take"],function(t,e){Mr.prototype[t]=function(r){r=void 0===r?1:nr(is(r),0);var a=this.__filtered__&&!e?new Mr(this):this.clone();return a.__filtered__?a.__takeCount__=or(r,a.__takeCount__):a.__views__.push({size:or(r,4294967295),type:t+(a.__dir__<0?"Right":"")}),a},Mr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ie(["filter","map","takeWhile"],function(t,e){var r=e+1,a=1==r||3==r;Mr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Ui(t,3),type:r}),e.__filtered__=e.__filtered__||a,e}}),ie(["head","last"],function(t,e){var r="take"+(e?"Right":"");Mr.prototype[t]=function(){return this[r](1).value()[0]}}),ie(["initial","tail"],function(t,e){var r="drop"+(e?"":"Right");Mr.prototype[t]=function(){return this.__filtered__?new Mr(this):this[r](1)}}),Mr.prototype.compact=function(){return this.filter($s)},Mr.prototype.find=function(t){return this.filter(t).head()},Mr.prototype.findLast=function(t){return this.reverse().find(t)},Mr.prototype.invokeMap=Aa(function(t,e){return"function"==typeof t?new Mr(this):this.map(function(r){return ya(r,t,e)})}),Mr.prototype.reject=function(t){return this.filter(ko(Ui(t)))},Mr.prototype.slice=function(t,e){t=is(t);var r=this;return r.__filtered__&&(t>0||e<0)?new Mr(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),void 0!==e&&(r=(e=is(e))<0?r.dropRight(-e):r.take(e-t)),r)},Mr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Mr.prototype.toArray=function(){return this.take(4294967295)},sa(Mr.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),a=/^(?:head|last)$/.test(e),i=Lr[a?"take"+("last"==e?"Right":""):e],n=a||/^find/.test(e);i&&(Lr.prototype[e]=function(){var e=this.__wrapped__,o=a?[1]:arguments,s=e instanceof Mr,l=o[0],c=s||jo(e),u=function(t){var e=i.apply(Lr,he([t],o));return a&&h?e[0]:e};c&&r&&"function"==typeof l&&1!=l.length&&(s=c=!1);var h=this.__chain__,d=!!this.__actions__.length,p=n&&!h,f=s&&!d;if(!n&&c){e=f?e:new Mr(this);var g=t.apply(e,o);return g.__actions__.push({func:ro,args:[u],thisArg:void 0}),new Cr(g,h)}return p&&f?t.apply(this,o):(g=this.thru(u),p?a?g.value()[0]:g.value():g)})}),ie(["pop","push","shift","sort","splice","unshift"],function(t){var e=vt[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",a=/^(?:pop|shift)$/.test(t);Lr.prototype[t]=function(){var t=arguments;if(a&&!this.__chain__){var i=this.value();return e.apply(jo(i)?i:[],t)}return this[r](function(r){return e.apply(jo(r)?r:[],t)})}}),sa(Mr.prototype,function(t,e){var r=Lr[e];if(r){var a=r.name+"";Tt.call(vr,a)||(vr[a]=[]),vr[a].push({name:e,func:r})}}),vr[wi(void 0,2).name]=[{name:"wrapper",func:void 0}],Mr.prototype.clone=function(){var t=new Mr(this.__wrapped__);return t.__actions__=gi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=gi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=gi(this.__views__),t},Mr.prototype.reverse=function(){if(this.__filtered__){var t=new Mr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Mr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,r=jo(t),a=e<0,i=r?t.length:0,n=function(t,e,r){for(var a=-1,i=r.length;++a<i;){var n=r[a],o=n.size;switch(n.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=or(e,t+o);break;case"takeRight":t=nr(t,e-o)}}return{start:t,end:e}}(0,i,this.__views__),o=n.start,s=n.end,l=s-o,c=a?s:o-1,u=this.__iteratees__,h=u.length,d=0,p=or(l,this.__takeCount__);if(!r||!a&&i==l&&p==l)return ti(t,this.__actions__);var f=[];t:for(;l--&&d<p;){for(var g=-1,b=t[c+=e];++g<h;){var y=u[g],v=y.type,m=(0,y.iteratee)(b);if(2==v)b=m;else if(!m){if(1==v)continue t;break t}}f[d++]=b}return f},Lr.prototype.at=ao,Lr.prototype.chain=function(){return eo(this)},Lr.prototype.commit=function(){return new Cr(this.value(),this.__chain__)},Lr.prototype.next=function(){void 0===this.__values__&&(this.__values__=rs(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},Lr.prototype.plant=function(t){for(var e,r=this;r instanceof Pr;){var a=_n(r);a.__index__=0,a.__values__=void 0,e?i.__wrapped__=a:e=a;var i=a;r=r.__wrapped__}return i.__wrapped__=t,e},Lr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Mr){var e=t;return this.__actions__.length&&(e=new Mr(this)),(e=e.reverse()).__actions__.push({func:ro,args:[Qn],thisArg:void 0}),new Cr(e,this.__chain__)}return this.thru(Qn)},Lr.prototype.toJSON=Lr.prototype.valueOf=Lr.prototype.value=function(){return ti(this.__wrapped__,this.__actions__)},Lr.prototype.first=Lr.prototype.head,ge&&(Lr.prototype[ge]=function(){return this}),Lr}();Vt._=$e,void 0===(a=(function(){return $e}).call(e,r,e,t))||(t.exports=a)}).call(this)}).call(this,r("YuTi")(t))}}]);